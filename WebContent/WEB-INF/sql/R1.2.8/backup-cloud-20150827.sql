-- MySQL dump 10.13  Distrib 5.6.25, for Win64 (x86_64)
--
-- Host: localhost    Database: timectrl
-- ------------------------------------------------------
-- Server version	5.6.25-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `tarea`
--

DROP TABLE IF EXISTS `tarea`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tarea` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(10) NOT NULL DEFAULT '',
  `cName` varchar(50) NOT NULL,
  `cCostCenter` varchar(10) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tarea`
--

LOCK TABLES `tarea` WRITE;
/*!40000 ALTER TABLE `tarea` DISABLE KEYS */;
INSERT INTO `tarea` VALUES (1,'100','Casa Matriz','100'),(2,'300','Teno','300'),(3,'200','Trapen','200'),(4,'500','Pe√±on','500'),(5,'400','San Lorenzo','400'),(6,'600','Ossa1000','600');
/*!40000 ALTER TABLE `tarea` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tattendancelog`
--

DROP TABLE IF EXISTS `tattendancelog`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tattendancelog` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cEmployeeKey` varchar(15) DEFAULT NULL,
  `cMachine` bigint(20) NOT NULL,
  `cDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `cMarkType` bigint(20) NOT NULL,
  PRIMARY KEY (`cId`),
  KEY `AttendanceLog_index_Machine` (`cMachine`),
  KEY `AttendanceLog_index_MarkType` (`cMachine`),
  KEY `AttendanceLog_index_FastSearch` (`cEmployeeKey`,`cDate`,`cMarkType`),
  KEY `AttendanceLog_To_MarkType` (`cMarkType`),
  CONSTRAINT `AttendanceLog_To_Machine` FOREIGN KEY (`cMachine`) REFERENCES `tmachine` (`cId`),
  CONSTRAINT `AttendanceLog_To_MarkType` FOREIGN KEY (`cMarkType`) REFERENCES `tmarktype` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=129328 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tattendancelog`
--

LOCK TABLES `tattendancelog` WRITE;
/*!40000 ALTER TABLE `tattendancelog` DISABLE KEYS */;
INSERT INTO `tattendancelog` VALUES (127900,'1',6,'2014-05-25 16:39:36',1),(127901,'1',6,'2014-05-25 16:41:25',1),(127902,'1',6,'2014-05-25 16:44:11',1),(127903,'1',6,'2014-05-25 16:44:17',1),(127904,'1',6,'2014-05-25 16:45:08',1),(127905,'1',6,'2014-05-25 16:54:27',1),(127906,'1',6,'2014-05-25 16:54:38',1),(127907,'1',6,'2014-05-25 17:01:44',1),(127908,'1',6,'2014-05-25 17:07:10',1),(127909,'1',6,'2014-05-25 17:12:19',1),(127910,'1',6,'2014-05-25 17:12:26',1),(127911,'1',6,'2014-05-25 17:13:48',1),(127912,'1',6,'2014-05-25 17:14:13',1),(127913,'1',6,'2014-05-25 17:15:44',1),(127914,'1',6,'2014-05-25 17:16:45',1),(127915,'1',6,'2014-05-25 17:17:40',1),(127916,'1',6,'2014-11-09 15:21:52',1),(127917,'1',6,'2014-11-09 15:22:47',1),(127918,'1',6,'2014-11-09 15:23:28',1),(127919,'1',6,'2014-11-09 15:24:11',1),(127920,'1',6,'2014-11-09 15:24:40',1),(127921,'1',6,'2014-11-09 15:25:08',1),(127922,'1',6,'2014-11-09 15:25:39',1),(127923,'1',6,'2014-11-09 15:26:51',1),(127924,'1',6,'2014-11-09 15:27:18',1),(127925,'1',6,'2014-11-09 15:35:09',1),(127926,'1',6,'2014-11-09 15:35:39',1),(127927,'1',6,'2014-11-09 16:05:31',1),(127928,'1',6,'2014-11-09 16:05:39',1),(127929,'1',6,'2014-11-09 16:06:20',1),(127930,'1',6,'2014-11-09 16:06:31',1),(127931,'1',6,'2014-11-09 16:07:01',1),(127932,'1',6,'2014-11-09 16:07:09',1),(127933,'1',6,'2015-05-10 23:03:52',1),(127934,'1',6,'2015-05-10 23:04:08',1),(127935,'1',6,'2015-05-10 23:04:56',1),(127936,'1',6,'2015-05-10 23:05:28',1),(127937,'1',6,'2015-05-10 23:06:05',1),(127938,'1',6,'2015-05-10 23:06:45',1),(127939,'1',6,'2015-05-10 23:07:16',1),(127940,'1',6,'2015-05-10 23:07:51',1),(127941,'1',6,'2015-05-10 23:08:26',1),(127942,'1',6,'2015-05-10 23:08:56',1),(127943,'1',6,'2015-05-10 23:09:23',1),(127944,'1',6,'2015-05-10 23:09:35',1),(127945,'1',6,'2015-05-10 23:10:19',1),(127946,'1',6,'2015-05-10 23:10:52',1),(127947,'1',6,'2015-05-10 23:11:00',1),(127948,'1',6,'2015-05-10 23:11:32',1),(127949,'1',6,'2015-05-10 23:11:48',1),(127950,'1',6,'2015-05-10 23:12:35',1),(127951,'1',6,'2015-05-10 23:13:33',1),(127952,'1',6,'2015-05-10 23:15:46',1),(127953,'1',6,'2015-05-10 23:17:03',1),(127954,'1',6,'2015-05-10 23:17:46',1),(127955,'1',6,'2015-05-10 23:17:58',1),(127956,'1',6,'2015-05-10 23:20:26',1),(127957,'1',6,'2015-05-10 23:31:43',1),(127958,'1',6,'2015-05-10 23:31:50',1),(127959,'1',6,'2015-05-12 20:08:54',1),(127960,'1',6,'2015-05-12 20:09:24',1),(127961,'1',6,'2015-05-12 20:09:33',1),(127962,'1',6,'2015-05-12 20:15:15',1),(127963,'1',6,'2015-05-12 20:15:36',1),(127964,'1',6,'2015-05-12 21:37:34',1),(127965,'1',6,'2015-05-12 21:37:51',1),(127966,'1',6,'2015-05-12 21:42:23',1),(127967,'1',6,'2015-05-12 22:12:29',1),(127968,'1',6,'2015-05-12 22:12:37',1),(127969,'1',6,'2015-05-12 22:13:08',1),(127970,'1',6,'2015-05-12 22:13:16',1),(127971,'5',6,'2015-05-13 00:25:31',1),(127972,'6',6,'2015-05-13 00:27:01',1),(127973,'7',6,'2015-05-13 01:31:44',1),(127974,'7',6,'2015-05-13 01:31:46',1),(127975,'5',6,'2015-05-13 01:32:24',1),(127976,'7',6,'2015-05-13 01:33:11',4),(127977,'5',6,'2015-05-13 01:33:57',4),(127978,'7',6,'2015-05-13 01:34:34',1),(127979,'7',6,'2015-05-13 01:47:39',1),(127980,'7',6,'2015-05-13 10:35:43',1),(127981,'5',6,'2015-05-13 10:52:17',1),(127982,'3',6,'2015-05-13 10:54:07',1),(127983,'2',6,'2015-05-13 10:55:42',1),(127984,'3',6,'2015-05-13 11:44:24',1),(127985,'3',6,'2015-05-13 15:26:58',1),(127986,'2',6,'2015-05-13 15:27:09',1),(127987,'2',6,'2015-05-13 15:27:56',1),(127988,'3',6,'2015-05-13 17:02:03',1),(127989,'2',6,'2015-05-14 10:45:06',1),(127990,'3',6,'2015-05-14 11:29:34',1),(127991,'8',6,'2015-05-17 09:38:26',1),(127992,'8',6,'2015-05-17 11:40:57',1),(127993,'10',6,'2015-05-17 14:10:30',1),(127994,'5',6,'2015-05-17 21:51:46',1),(127995,'5',6,'2015-05-18 11:00:15',1),(127996,'6',6,'2015-05-18 11:04:12',1),(127997,'2',6,'2015-05-18 18:16:42',1),(127998,'5',6,'2015-05-18 18:33:46',1),(127999,'5',6,'2015-05-18 18:34:02',1),(128000,'5',6,'2015-05-18 18:34:17',4),(128001,'7',6,'2015-05-19 01:32:29',1),(128002,'2',6,'2015-05-19 01:32:48',4),(128003,'7',6,'2015-05-19 10:50:51',1),(128004,'5',6,'2015-05-19 10:51:33',1),(128005,'6',6,'2015-05-19 10:57:46',1),(128006,'2',6,'2015-05-19 18:21:28',1),(128007,'3',6,'2015-05-19 18:21:32',1),(128008,'6',6,'2015-05-19 18:21:41',4),(128009,'5',6,'2015-05-19 18:34:11',1),(128010,'5',6,'2015-05-19 18:34:23',4),(128011,'7',6,'2015-05-20 01:37:13',1),(128012,'2',6,'2015-05-20 01:37:23',4),(128013,'7',6,'2015-05-20 10:55:59',4),(128014,'5',6,'2015-05-20 10:56:09',1),(128015,'6',6,'2015-05-20 11:01:00',1),(128016,'2',6,'2015-05-20 18:09:15',1),(128017,'5',6,'2015-05-20 18:29:30',4),(128018,'5',6,'2015-05-20 18:31:14',1),(128019,'7',6,'2015-05-21 01:32:00',1),(128020,'2',6,'2015-05-21 01:32:09',1),(128021,'3',6,'2015-05-21 01:32:23',1),(128022,'2',6,'2015-05-21 01:32:48',4),(128023,'3',6,'2015-05-21 01:33:01',1),(128024,'3',6,'2015-05-21 01:33:31',1),(128025,'3',6,'2015-05-21 01:33:53',1),(128026,'3',6,'2015-05-21 01:34:03',1),(128027,'3',6,'2015-05-21 01:34:29',4),(128028,'7',6,'2015-05-21 11:03:30',1),(128029,'7',6,'2015-05-21 11:03:49',4),(128030,'5',6,'2015-05-21 11:04:11',1),(128031,'6',6,'2015-05-21 12:57:43',1),(128032,'1',6,'2015-05-21 16:25:16',1),(128033,'5',6,'2015-05-21 18:48:50',1),(128034,'5',6,'2015-05-21 21:02:39',4),(128035,'7',6,'2015-05-21 21:57:36',1),(128036,'5',6,'2015-05-22 10:34:51',1),(128037,'7',6,'2015-05-22 10:36:15',1),(128038,'7',6,'2015-05-22 10:36:58',4),(128039,'3',6,'2015-05-22 15:05:01',1),(128040,'3',6,'2015-05-22 15:05:13',4),(128041,'5',6,'2015-05-22 16:10:49',1),(128042,'5',6,'2015-05-22 18:38:12',4),(128043,'7',6,'2015-05-23 01:27:21',1),(128044,'3',6,'2015-05-23 01:27:33',1),(128045,'7',6,'2015-05-23 10:50:42',4),(128046,'3',6,'2015-05-23 19:16:56',1),(128047,'8',6,'2015-05-23 22:50:55',1),(128048,'8',6,'2015-05-24 11:50:37',4),(128049,'10',6,'2015-05-24 12:39:27',1),(128050,'10',6,'2015-05-24 20:45:49',1),(128051,'8',6,'2015-05-24 23:43:25',1),(128052,'8',6,'2015-05-25 10:41:17',4),(128053,'2',6,'2015-05-25 11:48:15',1),(128054,'3',6,'2015-05-25 11:48:27',1),(128055,'5',6,'2015-05-25 18:27:05',1),(128056,'2',6,'2015-05-25 18:27:17',4),(128057,'7',6,'2015-05-26 01:42:05',1),(128058,'5',6,'2015-05-26 01:53:13',4),(128059,'6',6,'2015-05-26 01:53:49',1),(128060,'6',6,'2015-05-26 01:54:17',4),(128061,'2',6,'2015-05-26 10:32:03',1),(128062,'7',6,'2015-05-26 10:32:18',1),(128063,'3',6,'2015-05-26 11:54:06',1),(128064,'5',6,'2015-05-26 18:25:45',1),(128065,'2',6,'2015-05-26 18:25:57',4),(128066,'3',6,'2015-05-26 18:26:02',4),(128067,'6',6,'2015-05-26 18:32:27',1),(128068,'7',6,'2015-05-27 01:38:17',1),(128069,'5',6,'2015-05-27 01:55:37',4),(128070,'6',6,'2015-05-27 01:55:52',4),(128071,'2',6,'2015-05-27 18:10:32',1),(128072,'3',6,'2015-05-27 18:10:42',1),(128073,'5',6,'2015-05-27 18:11:46',1),(128074,'6',6,'2015-05-27 18:29:02',1),(128075,'7',6,'2015-05-28 01:34:23',1),(128076,'6',6,'2015-05-28 01:53:22',1),(128077,'5',6,'2015-05-28 01:53:31',4),(128078,'6',6,'2015-05-28 01:53:41',4),(128079,'7',6,'2015-05-28 10:42:23',1),(128080,'2',6,'2015-05-28 10:42:31',1),(128081,'2',6,'2015-05-28 11:50:36',1),(128082,'6',6,'2015-05-28 17:53:37',1),(128083,'5',6,'2015-05-28 18:24:51',1),(128084,'2',6,'2015-05-28 18:24:59',4),(128085,'7',6,'2015-05-29 01:47:48',1),(128086,'6',6,'2015-05-29 01:58:49',1),(128087,'6',6,'2015-05-29 01:58:58',4),(128088,'5',6,'2015-05-29 01:59:03',4),(128089,'7',6,'2015-05-29 10:50:40',1),(128090,'7',6,'2015-05-29 10:51:13',4),(128091,'5',6,'2015-05-29 18:21:00',1),(128092,'3',6,'2015-05-29 18:21:16',4),(128093,'6',6,'2015-05-29 18:41:19',1),(128094,'6',6,'2015-05-30 01:58:43',1),(128095,'6',6,'2015-05-30 01:59:00',4),(128096,'5',6,'2015-05-30 01:59:37',1),(128097,'5',6,'2015-05-30 01:59:47',4),(128098,'5',6,'2015-05-30 11:01:30',1),(128099,'7',6,'2015-05-30 11:01:46',4),(128100,'6',6,'2015-05-30 12:45:25',1),(128101,'5',6,'2015-05-30 21:00:27',4),(128102,'8',6,'2015-05-30 22:44:52',1),(128103,'6',6,'2015-05-30 23:19:52',1),(128104,'6',6,'2015-05-30 23:20:01',4),(128105,'8',6,'2015-05-31 11:52:55',4),(128106,'10',6,'2015-05-31 13:25:07',1),(128107,'10',6,'2015-05-31 20:54:51',1),(128108,'10',6,'2015-05-31 20:55:17',4),(128109,'8',6,'2015-05-31 23:47:53',1),(128110,'5',6,'2015-06-01 10:43:09',1),(128111,'6',6,'2015-06-01 10:47:28',1),(128112,'8',6,'2015-06-01 10:53:48',4),(128113,'2',6,'2015-06-01 18:03:54',1),(128114,'3',6,'2015-06-01 18:21:59',1),(128115,'5',6,'2015-06-01 18:30:05',4),(128116,'6',6,'2015-06-01 18:30:15',4),(128117,'7',6,'2015-06-02 01:41:20',1),(128118,'2',6,'2015-06-02 01:41:37',4),(128119,'3',6,'2015-06-02 01:45:44',1),(128120,'3',6,'2015-06-02 01:46:07',4),(128121,'5',6,'2015-06-02 10:51:55',1),(128122,'6',6,'2015-06-02 10:53:36',1),(128123,'7',6,'2015-06-02 10:54:27',4),(128124,'2',6,'2015-06-02 18:04:08',1),(128125,'6',6,'2015-06-02 18:32:00',1),(128126,'6',6,'2015-06-02 18:32:12',4),(128127,'5',6,'2015-06-02 18:40:04',4),(128128,'3',6,'2015-06-02 19:17:06',1),(128129,'3',6,'2015-06-02 19:20:01',4),(128130,'7',6,'2015-06-03 01:33:34',1),(128131,'2',6,'2015-06-03 01:38:50',1),(128132,'3',6,'2015-06-03 01:44:08',1),(128133,'3',6,'2015-06-03 01:44:37',4),(128134,'5',6,'2015-06-03 10:46:21',1),(128135,'7',6,'2015-06-03 10:47:04',4),(128136,'7',6,'2015-06-03 10:47:26',1),(128137,'7',6,'2015-06-03 10:47:42',4),(128138,'6',6,'2015-06-03 10:57:55',1),(128139,'3',6,'2015-06-03 18:24:06',1),(128140,'2',6,'2015-06-03 18:24:13',1),(128141,'6',6,'2015-06-03 18:30:05',1),(128142,'6',6,'2015-06-03 18:30:41',4),(128143,'5',6,'2015-06-03 18:48:26',4),(128144,'2',6,'2015-06-03 20:32:41',1),(128145,'2',6,'2015-06-04 01:41:51',4),(128146,'7',6,'2015-06-04 01:44:17',1),(128147,'3',6,'2015-06-04 01:45:36',1),(128148,'3',6,'2015-06-04 01:46:03',1),(128149,'3',6,'2015-06-04 01:46:15',4),(128150,'5',6,'2015-06-04 10:46:40',1),(128151,'7',6,'2015-06-04 10:46:56',4),(128152,'6',6,'2015-06-04 10:52:29',1),(128153,'6',6,'2015-06-04 14:06:23',1),(128154,'6',6,'2015-06-04 14:06:59',4),(128155,'6',6,'2015-06-04 14:37:11',1),(128156,'2',6,'2015-06-04 18:27:34',1),(128157,'3',6,'2015-06-04 18:27:44',1),(128158,'6',6,'2015-06-04 18:30:24',4),(128159,'5',6,'2015-06-04 18:45:26',4),(128160,'1',6,'2015-06-04 22:05:58',1),(128161,'7',6,'2015-06-05 01:28:32',1),(128162,'3',6,'2015-06-05 01:55:07',1),(128163,'2',6,'2015-06-05 01:55:16',4),(128164,'3',6,'2015-06-05 01:55:24',4),(128165,'5',6,'2015-06-05 10:49:33',1),(128166,'7',6,'2015-06-05 10:50:20',1),(128167,'6',6,'2015-06-05 10:54:13',1),(128168,'3',6,'2015-06-05 18:23:44',1),(128169,'2',6,'2015-06-05 18:26:34',1),(128170,'6',6,'2015-06-05 18:30:51',4),(128171,'5',6,'2015-06-05 18:33:53',4),(128172,'7',6,'2015-06-06 01:33:17',1),(128173,'3',6,'2015-06-06 01:53:57',4),(128174,'2',6,'2015-06-06 01:55:43',1),(128175,'2',6,'2015-06-06 01:55:46',1),(128176,'2',6,'2015-06-06 01:55:57',4),(128177,'2',6,'2015-06-06 10:41:40',1),(128178,'7',6,'2015-06-06 10:42:24',1),(128179,'3',6,'2015-06-06 12:57:16',1),(128180,'8',6,'2015-06-06 22:48:11',1),(128181,'3',6,'2015-06-06 23:00:02',1),(128182,'3',6,'2015-06-06 23:00:11',4),(128183,'8',6,'2015-06-07 11:59:29',4),(128184,'8',6,'2015-06-07 23:50:47',1),(128185,'5',6,'2015-06-08 10:50:58',1),(128186,'8',6,'2015-06-08 10:59:04',4),(128187,'3',6,'2015-06-08 12:18:24',1),(128188,'2',6,'2015-06-08 18:22:08',1),(128189,'3',6,'2015-06-08 18:22:29',4),(128190,'6',6,'2015-06-08 18:32:46',1),(128191,'5',6,'2015-06-08 18:33:24',4),(128192,'7',6,'2015-06-09 01:43:25',1),(128193,'2',6,'2015-06-09 01:47:47',1),(128194,'6',6,'2015-06-09 02:00:47',4),(128195,'2',6,'2015-06-09 10:45:32',1),(128196,'7',6,'2015-06-09 10:46:17',4),(128197,'3',6,'2015-06-09 10:49:58',1),(128198,'5',6,'2015-06-09 18:25:19',1),(128199,'6',6,'2015-06-09 18:27:37',1),(128200,'3',6,'2015-06-09 18:30:42',4),(128201,'7',6,'2015-06-10 01:42:33',1),(128202,'5',6,'2015-06-10 02:00:27',4),(128203,'6',6,'2015-06-10 02:00:38',1),(128204,'2',6,'2015-06-10 10:31:52',1),(128205,'7',6,'2015-06-10 10:42:34',1),(128206,'3',6,'2015-06-10 10:47:39',1),(128207,'5',6,'2015-06-10 18:21:16',1),(128208,'6',6,'2015-06-10 18:30:33',1),(128209,'7',6,'2015-06-11 01:47:33',1),(128210,'5',6,'2015-06-11 02:00:24',4),(128211,'6',6,'2015-06-11 02:00:34',4),(128212,'2',6,'2015-06-11 10:45:17',1),(128213,'7',6,'2015-06-11 10:45:34',4),(128214,'3',6,'2015-06-11 10:53:56',1),(128215,'5',6,'2015-06-11 18:19:40',1),(128216,'2',6,'2015-06-11 18:23:21',1),(128217,'6',6,'2015-06-11 18:25:16',1),(128218,'3',6,'2015-06-11 18:28:52',4),(128219,'7',6,'2015-06-12 01:30:48',1),(128220,'6',6,'2015-06-12 02:00:11',4),(128221,'5',6,'2015-06-12 02:35:55',4),(128222,'2',6,'2015-06-12 10:39:01',1),(128223,'7',6,'2015-06-12 10:40:21',4),(128224,'3',6,'2015-06-12 10:45:37',1),(128225,'2',6,'2015-06-12 18:19:28',4),(128226,'3',6,'2015-06-12 18:19:33',4),(128227,'5',6,'2015-06-12 18:20:00',1),(128228,'6',6,'2015-06-12 18:34:27',1),(128229,'7',6,'2015-06-13 01:36:39',1),(128230,'6',6,'2015-06-13 02:00:16',4),(128231,'5',6,'2015-06-13 02:00:35',4),(128232,'5',6,'2015-06-13 11:19:31',1),(128233,'7',6,'2015-06-13 11:19:42',4),(128234,'6',6,'2015-06-13 12:51:56',1),(128235,'5',6,'2015-06-13 21:50:07',4),(128236,'8',6,'2015-06-13 22:55:58',1),(128237,'6',6,'2015-06-13 23:02:56',4),(128238,'10',6,'2015-06-14 13:09:36',1),(128239,'10',6,'2015-06-14 20:57:48',1),(128240,'10',6,'2015-06-14 20:58:20',4),(128241,'8',6,'2015-06-14 23:53:27',1),(128242,'5',6,'2015-06-15 10:48:20',1),(128243,'8',6,'2015-06-15 10:52:07',4),(128244,'6',6,'2015-06-15 10:52:46',1),(128245,'3',6,'2015-06-15 18:11:08',1),(128246,'2',6,'2015-06-15 18:18:34',1),(128247,'5',6,'2015-06-15 18:30:57',4),(128248,'7',6,'2015-06-16 01:25:57',1),(128249,'2',6,'2015-06-16 01:34:39',1),(128250,'3',6,'2015-06-16 02:27:06',1),(128251,'3',6,'2015-06-16 02:27:16',4),(128252,'5',6,'2015-06-16 10:49:59',1),(128253,'7',6,'2015-06-16 10:50:28',1),(128254,'6',6,'2015-06-16 10:58:27',1),(128255,'3',6,'2015-06-16 18:21:33',1),(128256,'2',6,'2015-06-16 18:21:42',1),(128257,'6',6,'2015-06-16 18:30:09',4),(128258,'5',6,'2015-06-16 18:31:03',1),(128259,'7',6,'2015-06-17 01:26:12',1),(128260,'2',6,'2015-06-17 01:28:29',1),(128261,'3',6,'2015-06-17 01:46:16',4),(128262,'7',6,'2015-06-17 10:48:37',1),(128263,'5',6,'2015-06-17 10:49:35',1),(128264,'7',6,'2015-06-17 10:50:53',4),(128265,'6',6,'2015-06-17 10:52:44',1),(128266,'3',6,'2015-06-17 17:59:06',1),(128267,'2',6,'2015-06-17 18:09:15',1),(128268,'5',6,'2015-06-17 18:32:15',4),(128269,'6',6,'2015-06-17 18:32:30',1),(128270,'6',6,'2015-06-17 18:32:51',4),(128271,'3',6,'2015-06-18 01:51:34',1),(128272,'2',6,'2015-06-18 01:51:42',4),(128273,'3',6,'2015-06-18 01:51:49',4),(128274,'7',6,'2015-06-18 01:54:25',1),(128275,'5',6,'2015-06-18 10:50:25',1),(128276,'7',6,'2015-06-18 10:53:38',1),(128277,'6',6,'2015-06-18 10:58:01',1),(128278,'3',6,'2015-06-18 18:15:03',1),(128279,'2',6,'2015-06-18 18:15:35',1),(128280,'5',6,'2015-06-18 18:37:58',4),(128281,'6',6,'2015-06-18 18:38:14',1),(128282,'6',6,'2015-06-18 18:38:28',4),(128283,'7',6,'2015-06-19 01:27:16',1),(128284,'2',6,'2015-06-19 01:32:05',1),(128285,'2',6,'2015-06-19 01:32:13',4),(128286,'3',6,'2015-06-19 01:36:44',4),(128287,'5',6,'2015-06-19 10:54:36',1),(128288,'7',6,'2015-06-19 10:55:02',1),(128289,'6',6,'2015-06-19 11:03:58',1),(128290,'3',6,'2015-06-19 18:28:05',1),(128291,'6',6,'2015-06-19 18:34:26',4),(128292,'7',6,'2015-06-20 01:19:48',1),(128293,'3',6,'2015-06-20 01:30:05',4),(128294,'5',6,'2015-06-20 02:15:32',4),(128295,'2',6,'2015-06-20 10:36:25',1),(128296,'7',6,'2015-06-20 10:36:41',4),(128297,'3',6,'2015-06-20 12:51:41',1),(128298,'8',6,'2015-06-20 23:24:44',1),(128299,'2',6,'2015-06-20 23:50:51',1),(128300,'8',6,'2015-06-21 12:06:02',4),(128301,'10',6,'2015-06-21 13:06:28',1),(128302,'10',6,'2015-06-21 20:47:56',4),(128303,'8',6,'2015-06-21 23:49:57',1),(128304,'3',6,'2015-06-22 10:58:04',1),(128305,'8',6,'2015-06-22 10:58:11',4),(128306,'2',6,'2015-06-22 14:25:57',1),(128307,'5',6,'2015-06-22 18:19:10',1),(128308,'2',6,'2015-06-22 18:27:16',4),(128309,'3',6,'2015-06-22 18:27:21',4),(128310,'6',6,'2015-06-22 18:30:03',1),(128311,'7',6,'2015-06-23 01:29:05',1),(128312,'6',6,'2015-06-23 02:00:23',4),(128313,'5',6,'2015-06-23 02:00:27',4),(128314,'2',6,'2015-06-23 10:39:29',1),(128315,'7',6,'2015-06-23 10:41:12',1),(128316,'3',6,'2015-06-23 11:12:30',1),(128317,'5',6,'2015-06-23 18:22:17',1),(128318,'2',6,'2015-06-23 18:22:31',4),(128319,'6',6,'2015-06-23 18:34:32',1),(128320,'7',6,'2015-06-24 01:24:34',1),(128321,'5',6,'2015-06-24 02:00:10',4),(128322,'6',6,'2015-06-24 02:00:22',4),(128323,'2',6,'2015-06-24 10:46:58',1),(128324,'7',6,'2015-06-24 10:47:19',4),(128325,'3',6,'2015-06-24 11:43:39',1),(128326,'5',6,'2015-06-24 18:05:28',1),(128327,'2',6,'2015-06-24 18:08:32',1),(128328,'6',6,'2015-06-24 18:16:29',1),(128329,'3',6,'2015-06-24 18:20:17',1),(128330,'3',6,'2015-06-24 18:20:42',4),(128331,'1',6,'2014-05-25 15:39:36',1),(128332,'1',6,'2014-05-25 15:41:25',1),(128333,'1',6,'2014-05-25 15:44:11',1),(128334,'1',6,'2014-05-25 15:44:17',1),(128335,'1',6,'2014-05-25 15:45:08',1),(128336,'1',6,'2014-05-25 15:54:27',1),(128337,'1',6,'2014-05-25 15:54:38',1),(128338,'1',6,'2014-05-25 16:01:44',1),(128339,'1',6,'2014-05-25 16:07:10',1),(128340,'1',6,'2014-05-25 16:12:19',1),(128341,'1',6,'2014-05-25 16:12:26',1),(128342,'1',6,'2014-05-25 16:13:48',1),(128343,'1',6,'2014-05-25 16:14:13',1),(128344,'1',6,'2014-05-25 16:15:44',1),(128345,'1',6,'2014-05-25 16:16:45',1),(128346,'1',6,'2014-05-25 16:17:40',1),(128347,'1',6,'2015-05-10 22:03:52',1),(128348,'1',6,'2015-05-10 22:04:08',1),(128349,'1',6,'2015-05-10 22:04:56',1),(128350,'1',6,'2015-05-10 22:05:28',1),(128351,'1',6,'2015-05-10 22:06:05',1),(128352,'1',6,'2015-05-10 22:06:45',1),(128353,'1',6,'2015-05-10 22:07:16',1),(128354,'1',6,'2015-05-10 22:07:51',1),(128355,'1',6,'2015-05-10 22:08:26',1),(128356,'1',6,'2015-05-10 22:08:56',1),(128357,'1',6,'2015-05-10 22:09:23',1),(128358,'1',6,'2015-05-10 22:09:35',1),(128359,'1',6,'2015-05-10 22:10:19',1),(128360,'1',6,'2015-05-10 22:10:52',1),(128361,'1',6,'2015-05-10 22:11:00',1),(128362,'1',6,'2015-05-10 22:11:32',1),(128363,'1',6,'2015-05-10 22:11:48',1),(128364,'1',6,'2015-05-10 22:12:35',1),(128365,'1',6,'2015-05-10 22:13:33',1),(128366,'1',6,'2015-05-10 22:15:46',1),(128367,'1',6,'2015-05-10 22:17:03',1),(128368,'1',6,'2015-05-10 22:17:46',1),(128369,'1',6,'2015-05-10 22:17:58',1),(128370,'1',6,'2015-05-10 22:20:26',1),(128371,'1',6,'2015-05-10 22:31:43',1),(128372,'1',6,'2015-05-10 22:31:50',1),(128373,'1',6,'2015-05-12 19:08:54',1),(128374,'1',6,'2015-05-12 19:09:24',1),(128375,'1',6,'2015-05-12 19:09:33',1),(128376,'1',6,'2015-05-12 19:15:15',1),(128377,'1',6,'2015-05-12 19:15:36',1),(128378,'1',6,'2015-05-12 20:37:34',1),(128379,'1',6,'2015-05-12 20:37:51',1),(128380,'1',6,'2015-05-12 20:42:23',1),(128381,'1',6,'2015-05-12 21:12:29',1),(128382,'1',6,'2015-05-12 21:12:37',1),(128383,'1',6,'2015-05-12 21:13:08',1),(128384,'1',6,'2015-05-12 21:13:16',1),(128385,'5',6,'2015-05-12 23:25:31',1),(128386,'6',6,'2015-05-12 23:27:01',1),(128387,'7',6,'2015-05-13 00:31:44',1),(128388,'7',6,'2015-05-13 00:31:46',1),(128389,'5',6,'2015-05-13 00:32:24',1),(128390,'7',6,'2015-05-13 00:33:11',4),(128391,'5',6,'2015-05-13 00:33:57',4),(128392,'7',6,'2015-05-13 00:34:34',1),(128393,'7',6,'2015-05-13 00:47:39',1),(128394,'7',6,'2015-05-13 09:35:43',1),(128395,'5',6,'2015-05-13 09:52:17',1),(128396,'3',6,'2015-05-13 09:54:07',1),(128397,'2',6,'2015-05-13 09:55:42',1),(128398,'3',6,'2015-05-13 10:44:24',1),(128399,'3',6,'2015-05-13 14:26:58',1),(128400,'2',6,'2015-05-13 14:27:09',1),(128401,'2',6,'2015-05-13 14:27:56',1),(128402,'3',6,'2015-05-13 16:02:03',1),(128403,'2',6,'2015-05-14 09:45:06',1),(128404,'3',6,'2015-05-14 10:29:34',1),(128405,'8',6,'2015-05-17 08:38:26',1),(128406,'8',6,'2015-05-17 10:40:57',1),(128407,'10',6,'2015-05-17 13:10:30',1),(128408,'5',6,'2015-05-17 20:51:46',1),(128409,'5',6,'2015-05-18 10:00:15',1),(128410,'6',6,'2015-05-18 10:04:12',1),(128411,'2',6,'2015-05-18 17:16:42',1),(128412,'5',6,'2015-05-18 17:33:46',1),(128413,'5',6,'2015-05-18 17:34:02',1),(128414,'5',6,'2015-05-18 17:34:17',4),(128415,'7',6,'2015-05-19 00:32:29',1),(128416,'2',6,'2015-05-19 00:32:48',4),(128417,'7',6,'2015-05-19 09:50:51',1),(128418,'5',6,'2015-05-19 09:51:33',1),(128419,'6',6,'2015-05-19 09:57:46',1),(128420,'2',6,'2015-05-19 17:21:28',1),(128421,'3',6,'2015-05-19 17:21:32',1),(128422,'6',6,'2015-05-19 17:21:41',4),(128423,'5',6,'2015-05-19 17:34:11',1),(128424,'5',6,'2015-05-19 17:34:23',4),(128425,'7',6,'2015-05-20 00:37:13',1),(128426,'2',6,'2015-05-20 00:37:23',4),(128427,'7',6,'2015-05-20 09:55:59',4),(128428,'5',6,'2015-05-20 09:56:09',1),(128429,'6',6,'2015-05-20 10:01:00',1),(128430,'2',6,'2015-05-20 17:09:15',1),(128431,'5',6,'2015-05-20 17:29:30',4),(128432,'5',6,'2015-05-20 17:31:14',1),(128433,'7',6,'2015-05-21 00:32:00',1),(128434,'2',6,'2015-05-21 00:32:09',1),(128435,'3',6,'2015-05-21 00:32:23',1),(128436,'2',6,'2015-05-21 00:32:48',4),(128437,'3',6,'2015-05-21 00:33:01',1),(128438,'3',6,'2015-05-21 00:33:31',1),(128439,'3',6,'2015-05-21 00:33:53',1),(128440,'3',6,'2015-05-21 00:34:03',1),(128441,'3',6,'2015-05-21 00:34:29',4),(128442,'7',6,'2015-05-21 10:03:30',1),(128443,'7',6,'2015-05-21 10:03:49',4),(128444,'5',6,'2015-05-21 10:04:11',1),(128445,'6',6,'2015-05-21 11:57:43',1),(128446,'1',6,'2015-05-21 15:25:16',1),(128447,'5',6,'2015-05-21 17:48:50',1),(128448,'5',6,'2015-05-21 20:02:39',4),(128449,'7',6,'2015-05-21 20:57:36',1),(128450,'5',6,'2015-05-22 09:34:51',1),(128451,'7',6,'2015-05-22 09:36:15',1),(128452,'7',6,'2015-05-22 09:36:58',4),(128453,'3',6,'2015-05-22 14:05:01',1),(128454,'3',6,'2015-05-22 14:05:13',4),(128455,'5',6,'2015-05-22 15:10:49',1),(128456,'5',6,'2015-05-22 17:38:12',4),(128457,'7',6,'2015-05-23 00:27:21',1),(128458,'3',6,'2015-05-23 00:27:33',1),(128459,'7',6,'2015-05-23 09:50:42',4),(128460,'3',6,'2015-05-23 18:16:56',1),(128461,'8',6,'2015-05-23 21:50:55',1),(128462,'8',6,'2015-05-24 10:50:37',4),(128463,'10',6,'2015-05-24 11:39:27',1),(128464,'10',6,'2015-05-24 19:45:49',1),(128465,'8',6,'2015-05-24 22:43:25',1),(128466,'8',6,'2015-05-25 09:41:17',4),(128467,'2',6,'2015-05-25 10:48:15',1),(128468,'3',6,'2015-05-25 10:48:27',1),(128469,'5',6,'2015-05-25 17:27:05',1),(128470,'2',6,'2015-05-25 17:27:17',4),(128471,'7',6,'2015-05-26 00:42:05',1),(128472,'5',6,'2015-05-26 00:53:13',4),(128473,'6',6,'2015-05-26 00:53:49',1),(128474,'6',6,'2015-05-26 00:54:17',4),(128475,'2',6,'2015-05-26 09:32:03',1),(128476,'7',6,'2015-05-26 09:32:18',1),(128477,'3',6,'2015-05-26 10:54:06',1),(128478,'5',6,'2015-05-26 17:25:45',1),(128479,'2',6,'2015-05-26 17:25:57',4),(128480,'3',6,'2015-05-26 17:26:02',4),(128481,'6',6,'2015-05-26 17:32:27',1),(128482,'7',6,'2015-05-27 00:38:17',1),(128483,'5',6,'2015-05-27 00:55:37',4),(128484,'6',6,'2015-05-27 00:55:52',4),(128485,'2',6,'2015-05-27 17:10:32',1),(128486,'3',6,'2015-05-27 17:10:42',1),(128487,'5',6,'2015-05-27 17:11:46',1),(128488,'6',6,'2015-05-27 17:29:02',1),(128489,'7',6,'2015-05-28 00:34:23',1),(128490,'6',6,'2015-05-28 00:53:22',1),(128491,'5',6,'2015-05-28 00:53:31',4),(128492,'6',6,'2015-05-28 00:53:41',4),(128493,'7',6,'2015-05-28 09:42:23',1),(128494,'2',6,'2015-05-28 09:42:31',1),(128495,'2',6,'2015-05-28 10:50:36',1),(128496,'6',6,'2015-05-28 16:53:37',1),(128497,'5',6,'2015-05-28 17:24:51',1),(128498,'2',6,'2015-05-28 17:24:59',4),(128499,'7',6,'2015-05-29 00:47:48',1),(128500,'6',6,'2015-05-29 00:58:49',1),(128501,'6',6,'2015-05-29 00:58:58',4),(128502,'5',6,'2015-05-29 00:59:03',4),(128503,'7',6,'2015-05-29 09:50:40',1),(128504,'7',6,'2015-05-29 09:51:13',4),(128505,'5',6,'2015-05-29 17:21:00',1),(128506,'3',6,'2015-05-29 17:21:16',4),(128507,'6',6,'2015-05-29 17:41:19',1),(128508,'6',6,'2015-05-30 00:58:43',1),(128509,'6',6,'2015-05-30 00:59:00',4),(128510,'5',6,'2015-05-30 00:59:37',1),(128511,'5',6,'2015-05-30 00:59:47',4),(128512,'5',6,'2015-05-30 10:01:30',1),(128513,'7',6,'2015-05-30 10:01:46',4),(128514,'6',6,'2015-05-30 11:45:25',1),(128515,'5',6,'2015-05-30 20:00:27',4),(128516,'8',6,'2015-05-30 21:44:52',1),(128517,'6',6,'2015-05-30 22:19:52',1),(128518,'6',6,'2015-05-30 22:20:01',4),(128519,'8',6,'2015-05-31 10:52:55',4),(128520,'10',6,'2015-05-31 12:25:07',1),(128521,'10',6,'2015-05-31 19:54:51',1),(128522,'10',6,'2015-05-31 19:55:17',4),(128523,'8',6,'2015-05-31 22:47:53',1),(128524,'5',6,'2015-06-01 09:43:09',1),(128525,'6',6,'2015-06-01 09:47:28',1),(128526,'8',6,'2015-06-01 09:53:48',4),(128527,'2',6,'2015-06-01 17:03:54',1),(128528,'3',6,'2015-06-01 17:21:59',1),(128529,'5',6,'2015-06-01 17:30:05',4),(128530,'6',6,'2015-06-01 17:30:15',4),(128531,'7',6,'2015-06-02 00:41:20',1),(128532,'2',6,'2015-06-02 00:41:37',4),(128533,'3',6,'2015-06-02 00:45:44',1),(128534,'3',6,'2015-06-02 00:46:07',4),(128535,'5',6,'2015-06-02 09:51:55',1),(128536,'6',6,'2015-06-02 09:53:36',1),(128537,'7',6,'2015-06-02 09:54:27',4),(128538,'2',6,'2015-06-02 17:04:08',1),(128539,'6',6,'2015-06-02 17:32:00',1),(128540,'6',6,'2015-06-02 17:32:12',4),(128541,'5',6,'2015-06-02 17:40:04',4),(128542,'3',6,'2015-06-02 18:17:06',1),(128543,'3',6,'2015-06-02 18:20:01',4),(128544,'7',6,'2015-06-03 00:33:34',1),(128545,'2',6,'2015-06-03 00:38:50',1),(128546,'3',6,'2015-06-03 00:44:08',1),(128547,'3',6,'2015-06-03 00:44:37',4),(128548,'5',6,'2015-06-03 09:46:21',1),(128549,'7',6,'2015-06-03 09:47:04',4),(128550,'7',6,'2015-06-03 09:47:26',1),(128551,'7',6,'2015-06-03 09:47:42',4),(128552,'6',6,'2015-06-03 09:57:55',1),(128553,'3',6,'2015-06-03 17:24:06',1),(128554,'2',6,'2015-06-03 17:24:13',1),(128555,'6',6,'2015-06-03 17:30:05',1),(128556,'6',6,'2015-06-03 17:30:41',4),(128557,'5',6,'2015-06-03 17:48:26',4),(128558,'2',6,'2015-06-03 19:32:41',1),(128559,'2',6,'2015-06-04 00:41:51',4),(128560,'7',6,'2015-06-04 00:44:17',1),(128561,'3',6,'2015-06-04 00:45:36',1),(128562,'3',6,'2015-06-04 00:46:03',1),(128563,'3',6,'2015-06-04 00:46:15',4),(128564,'5',6,'2015-06-04 09:46:40',1),(128565,'7',6,'2015-06-04 09:46:56',4),(128566,'6',6,'2015-06-04 09:52:29',1),(128567,'6',6,'2015-06-04 13:06:23',1),(128568,'6',6,'2015-06-04 13:06:59',4),(128569,'6',6,'2015-06-04 13:37:11',1),(128570,'2',6,'2015-06-04 17:27:34',1),(128571,'3',6,'2015-06-04 17:27:44',1),(128572,'6',6,'2015-06-04 17:30:24',4),(128573,'5',6,'2015-06-04 17:45:26',4),(128574,'1',6,'2015-06-04 21:05:58',1),(128575,'7',6,'2015-06-05 00:28:32',1),(128576,'3',6,'2015-06-05 00:55:07',1),(128577,'2',6,'2015-06-05 00:55:16',4),(128578,'3',6,'2015-06-05 00:55:24',4),(128579,'5',6,'2015-06-05 09:49:33',1),(128580,'7',6,'2015-06-05 09:50:20',1),(128581,'6',6,'2015-06-05 09:54:13',1),(128582,'3',6,'2015-06-05 17:23:44',1),(128583,'2',6,'2015-06-05 17:26:34',1),(128584,'6',6,'2015-06-05 17:30:51',4),(128585,'5',6,'2015-06-05 17:33:53',4),(128586,'7',6,'2015-06-06 00:33:17',1),(128587,'3',6,'2015-06-06 00:53:57',4),(128588,'2',6,'2015-06-06 00:55:43',1),(128589,'2',6,'2015-06-06 00:55:46',1),(128590,'2',6,'2015-06-06 00:55:57',4),(128591,'2',6,'2015-06-06 09:41:40',1),(128592,'7',6,'2015-06-06 09:42:24',1),(128593,'3',6,'2015-06-06 11:57:16',1),(128594,'8',6,'2015-06-06 21:48:11',1),(128595,'3',6,'2015-06-06 22:00:02',1),(128596,'3',6,'2015-06-06 22:00:11',4),(128597,'8',6,'2015-06-07 10:59:29',4),(128598,'8',6,'2015-06-07 22:50:47',1),(128599,'5',6,'2015-06-08 09:50:58',1),(128600,'8',6,'2015-06-08 09:59:04',4),(128601,'3',6,'2015-06-08 11:18:24',1),(128602,'2',6,'2015-06-08 17:22:08',1),(128603,'3',6,'2015-06-08 17:22:29',4),(128604,'6',6,'2015-06-08 17:32:46',1),(128605,'5',6,'2015-06-08 17:33:24',4),(128606,'7',6,'2015-06-09 00:43:25',1),(128607,'2',6,'2015-06-09 00:47:47',1),(128608,'6',6,'2015-06-09 01:00:47',4),(128609,'2',6,'2015-06-09 09:45:32',1),(128610,'7',6,'2015-06-09 09:46:17',4),(128611,'3',6,'2015-06-09 09:49:58',1),(128612,'5',6,'2015-06-09 17:25:19',1),(128613,'6',6,'2015-06-09 17:27:37',1),(128614,'3',6,'2015-06-09 17:30:42',4),(128615,'7',6,'2015-06-10 00:42:33',1),(128616,'5',6,'2015-06-10 01:00:27',4),(128617,'6',6,'2015-06-10 01:00:38',1),(128618,'2',6,'2015-06-10 09:31:52',1),(128619,'7',6,'2015-06-10 09:42:34',1),(128620,'3',6,'2015-06-10 09:47:39',1),(128621,'5',6,'2015-06-10 17:21:16',1),(128622,'6',6,'2015-06-10 17:30:33',1),(128623,'7',6,'2015-06-11 00:47:33',1),(128624,'5',6,'2015-06-11 01:00:24',4),(128625,'6',6,'2015-06-11 01:00:34',4),(128626,'2',6,'2015-06-11 09:45:17',1),(128627,'7',6,'2015-06-11 09:45:34',4),(128628,'3',6,'2015-06-11 09:53:56',1),(128629,'5',6,'2015-06-11 17:19:40',1),(128630,'2',6,'2015-06-11 17:23:21',1),(128631,'6',6,'2015-06-11 17:25:16',1),(128632,'3',6,'2015-06-11 17:28:52',4),(128633,'7',6,'2015-06-12 00:30:48',1),(128634,'6',6,'2015-06-12 01:00:11',4),(128635,'5',6,'2015-06-12 01:35:55',4),(128636,'2',6,'2015-06-12 09:39:01',1),(128637,'7',6,'2015-06-12 09:40:21',4),(128638,'3',6,'2015-06-12 09:45:37',1),(128639,'2',6,'2015-06-12 17:19:28',4),(128640,'3',6,'2015-06-12 17:19:33',4),(128641,'5',6,'2015-06-12 17:20:00',1),(128642,'6',6,'2015-06-12 17:34:27',1),(128643,'7',6,'2015-06-13 00:36:39',1),(128644,'6',6,'2015-06-13 01:00:16',4),(128645,'5',6,'2015-06-13 01:00:35',4),(128646,'5',6,'2015-06-13 10:19:31',1),(128647,'7',6,'2015-06-13 10:19:42',4),(128648,'6',6,'2015-06-13 11:51:56',1),(128649,'5',6,'2015-06-13 20:50:07',4),(128650,'8',6,'2015-06-13 21:55:58',1),(128651,'6',6,'2015-06-13 22:02:56',4),(128652,'10',6,'2015-06-14 12:09:36',1),(128653,'10',6,'2015-06-14 19:57:48',1),(128654,'10',6,'2015-06-14 19:58:20',4),(128655,'8',6,'2015-06-14 22:53:27',1),(128656,'5',6,'2015-06-15 09:48:20',1),(128657,'8',6,'2015-06-15 09:52:07',4),(128658,'6',6,'2015-06-15 09:52:46',1),(128659,'3',6,'2015-06-15 17:11:08',1),(128660,'2',6,'2015-06-15 17:18:34',1),(128661,'5',6,'2015-06-15 17:30:57',4),(128662,'7',6,'2015-06-16 00:25:57',1),(128663,'2',6,'2015-06-16 00:34:39',1),(128664,'3',6,'2015-06-16 01:27:06',1),(128665,'3',6,'2015-06-16 01:27:16',4),(128666,'5',6,'2015-06-16 09:49:59',1),(128667,'7',6,'2015-06-16 09:50:28',1),(128668,'6',6,'2015-06-16 09:58:27',1),(128669,'3',6,'2015-06-16 17:21:33',1),(128670,'2',6,'2015-06-16 17:21:42',1),(128671,'6',6,'2015-06-16 17:30:09',4),(128672,'5',6,'2015-06-16 17:31:03',1),(128673,'7',6,'2015-06-17 00:26:12',1),(128674,'2',6,'2015-06-17 00:28:29',1),(128675,'3',6,'2015-06-17 00:46:16',4),(128676,'7',6,'2015-06-17 09:48:37',1),(128677,'5',6,'2015-06-17 09:49:35',1),(128678,'7',6,'2015-06-17 09:50:53',4),(128679,'6',6,'2015-06-17 09:52:44',1),(128680,'3',6,'2015-06-17 16:59:06',1),(128681,'2',6,'2015-06-17 17:09:15',1),(128682,'5',6,'2015-06-17 17:32:15',4),(128683,'6',6,'2015-06-17 17:32:30',1),(128684,'6',6,'2015-06-17 17:32:51',4),(128685,'3',6,'2015-06-18 00:51:34',1),(128686,'2',6,'2015-06-18 00:51:42',4),(128687,'3',6,'2015-06-18 00:51:49',4),(128688,'7',6,'2015-06-18 00:54:25',1),(128689,'5',6,'2015-06-18 09:50:25',1),(128690,'7',6,'2015-06-18 09:53:38',1),(128691,'6',6,'2015-06-18 09:58:01',1),(128692,'3',6,'2015-06-18 17:15:03',1),(128693,'2',6,'2015-06-18 17:15:35',1),(128694,'5',6,'2015-06-18 17:37:58',4),(128695,'6',6,'2015-06-18 17:38:14',1),(128696,'6',6,'2015-06-18 17:38:28',4),(128697,'7',6,'2015-06-19 00:27:16',1),(128698,'2',6,'2015-06-19 00:32:05',1),(128699,'2',6,'2015-06-19 00:32:13',4),(128700,'3',6,'2015-06-19 00:36:44',4),(128701,'5',6,'2015-06-19 09:54:36',1),(128702,'7',6,'2015-06-19 09:55:02',1),(128703,'6',6,'2015-06-19 10:03:58',1),(128704,'3',6,'2015-06-19 17:28:05',1),(128705,'6',6,'2015-06-19 17:34:26',4),(128706,'7',6,'2015-06-20 00:19:48',1),(128707,'3',6,'2015-06-20 00:30:05',4),(128708,'5',6,'2015-06-20 01:15:32',4),(128709,'2',6,'2015-06-20 09:36:25',1),(128710,'7',6,'2015-06-20 09:36:41',4),(128711,'3',6,'2015-06-20 11:51:41',1),(128712,'8',6,'2015-06-20 22:24:44',1),(128713,'2',6,'2015-06-20 22:50:51',1),(128714,'8',6,'2015-06-21 11:06:02',4),(128715,'10',6,'2015-06-21 12:06:28',1),(128716,'10',6,'2015-06-21 19:47:56',4),(128717,'8',6,'2015-06-21 22:49:57',1),(128718,'3',6,'2015-06-22 09:58:04',1),(128719,'8',6,'2015-06-22 09:58:11',4),(128720,'2',6,'2015-06-22 13:25:57',1),(128721,'5',6,'2015-06-22 17:19:10',1),(128722,'2',6,'2015-06-22 17:27:16',4),(128723,'3',6,'2015-06-22 17:27:21',4),(128724,'6',6,'2015-06-22 17:30:03',1),(128725,'7',6,'2015-06-23 00:29:05',1),(128726,'6',6,'2015-06-23 01:00:23',4),(128727,'5',6,'2015-06-23 01:00:27',4),(128728,'2',6,'2015-06-23 09:39:29',1),(128729,'7',6,'2015-06-23 09:41:12',1),(128730,'3',6,'2015-06-23 10:12:30',1),(128731,'5',6,'2015-06-23 17:22:17',1),(128732,'2',6,'2015-06-23 17:22:31',4),(128733,'6',6,'2015-06-23 17:34:32',1),(128734,'7',6,'2015-06-24 00:24:34',1),(128735,'5',6,'2015-06-24 01:00:10',4),(128736,'6',6,'2015-06-24 01:00:22',4),(128737,'2',6,'2015-06-24 09:46:58',1),(128738,'7',6,'2015-06-24 09:47:19',4),(128739,'3',6,'2015-06-24 10:43:39',1),(128740,'5',6,'2015-06-24 17:05:28',1),(128741,'2',6,'2015-06-24 17:08:32',1),(128742,'6',6,'2015-06-24 17:16:29',1),(128743,'3',6,'2015-06-24 17:20:17',1),(128744,'3',6,'2015-06-24 17:20:42',4),(128745,'7',6,'2015-06-24 23:03:27',1),(128746,'5',6,'2015-06-25 01:31:09',4),(128747,'6',6,'2015-06-25 01:33:09',4),(128748,'7',6,'2015-06-25 09:43:22',1),(128749,'2',6,'2015-06-25 09:43:42',1),(128750,'3',6,'2015-06-25 09:43:56',1),(128751,'5',6,'2015-06-25 17:16:30',1),(128752,'2',6,'2015-06-25 17:16:39',4),(128753,'3',6,'2015-06-25 17:23:29',1),(128754,'3',6,'2015-06-25 17:23:39',4),(128755,'6',6,'2015-06-25 17:27:01',1),(128756,'7',6,'2015-06-26 00:40:19',1),(128757,'5',6,'2015-06-26 01:00:09',4),(128758,'6',6,'2015-06-26 01:00:17',4),(128759,'3',6,'2015-06-26 09:35:21',1),(128760,'7',6,'2015-06-26 09:38:32',1),(128761,'2',6,'2015-06-26 09:38:41',1),(128762,'7',6,'2015-06-26 09:38:56',4),(128763,'2',6,'2015-06-26 16:46:59',1),(128764,'2',6,'2015-06-26 16:47:41',1),(128765,'2',6,'2015-06-26 16:48:07',4),(128766,'5',6,'2015-06-26 16:53:17',1),(128767,'5',6,'2015-06-26 16:53:51',1),(128768,'3',6,'2015-06-26 17:27:09',4),(128769,'6',6,'2015-06-26 17:31:07',1),(128770,'7',6,'2015-06-27 00:55:00',1),(128771,'6',6,'2015-06-27 01:12:03',1),(128772,'6',6,'2015-06-27 01:12:12',4),(128773,'5',6,'2015-06-27 01:13:47',1),(128774,'5',6,'2015-06-27 01:13:55',4),(128775,'6',6,'2015-06-27 09:43:15',1),(128776,'7',6,'2015-06-27 09:54:57',1),(128777,'5',6,'2015-06-27 11:57:42',1),(128778,'6',6,'2015-06-27 20:03:24',1),(128779,'6',6,'2015-06-27 20:04:00',4),(128780,'8',6,'2015-06-27 21:51:07',1),(128781,'5',6,'2015-06-27 22:07:58',1),(128782,'5',6,'2015-06-27 22:08:11',4),(128783,'8',6,'2015-06-28 10:56:12',4),(128784,'10',6,'2015-06-28 11:54:15',1),(128785,'10',6,'2015-06-28 20:13:39',4),(128786,'8',6,'2015-06-28 22:59:26',1),(128787,'8',6,'2015-06-29 10:55:32',4),(128788,'2',6,'2015-06-29 10:55:47',1),(128789,'3',6,'2015-06-29 11:35:23',1),(128790,'3',6,'2015-06-29 21:39:45',4),(128791,'7',6,'2015-06-29 21:39:56',1),(128792,'5',6,'2015-06-30 09:51:38',1),(128793,'7',6,'2015-06-30 09:52:30',1),(128794,'7',6,'2015-06-30 09:53:31',4),(128795,'6',6,'2015-06-30 09:57:42',1),(128796,'2',6,'2015-06-30 16:56:40',1),(128797,'3',6,'2015-06-30 16:56:51',1),(128798,'5',6,'2015-06-30 17:30:22',4),(128799,'6',6,'2015-06-30 17:30:28',4),(128800,'7',6,'2015-07-01 00:22:15',1),(128801,'2',6,'2015-07-01 00:32:04',1),(128802,'3',6,'2015-07-01 00:53:57',4),(128803,'6',6,'2015-07-01 09:53:47',1),(128804,'7',6,'2015-07-01 09:54:05',4),(128805,'5',6,'2015-07-01 09:57:49',1),(128806,'2',6,'2015-07-01 17:14:52',1),(128807,'3',6,'2015-07-01 17:15:50',1),(128808,'5',6,'2015-07-01 17:30:15',4),(128809,'7',6,'2015-07-02 00:32:00',1),(128810,'2',6,'2015-07-02 00:33:20',1),(128811,'3',6,'2015-07-02 00:34:11',4),(128812,'5',6,'2015-07-02 09:49:33',1),(128813,'7',6,'2015-07-02 09:51:15',1),(128814,'7',6,'2015-07-02 09:51:39',4),(128815,'6',6,'2015-07-02 10:03:28',1),(128816,'2',6,'2015-07-02 16:55:34',1),(128817,'3',6,'2015-07-02 17:27:53',1),(128818,'5',6,'2015-07-02 17:35:39',4),(128819,'6',6,'2015-07-02 17:36:52',4),(128820,'7',6,'2015-07-03 00:28:36',1),(128821,'7',6,'2015-07-03 00:28:38',1),(128822,'3',6,'2015-07-03 00:45:07',4),(128823,'7',6,'2015-07-03 09:33:33',1),(128824,'7',6,'2015-07-03 09:33:35',1),(128825,'7',6,'2015-07-03 09:34:13',1),(128826,'5',6,'2015-07-03 09:49:53',1),(128827,'7',6,'2015-07-03 09:50:10',4),(128828,'6',6,'2015-07-03 10:09:45',1),(128829,'2',6,'2015-07-03 17:03:36',1),(128830,'3',6,'2015-07-03 17:13:17',1),(128831,'5',6,'2015-07-03 17:38:08',4),(128832,'6',6,'2015-07-03 17:45:47',4),(128833,'7',6,'2015-07-04 00:26:22',1),(128834,'2',6,'2015-07-04 00:27:29',1),(128835,'3',6,'2015-07-04 00:40:20',4),(128836,'3',6,'2015-07-04 09:31:45',1),(128837,'7',6,'2015-07-04 09:41:58',1),(128838,'2',6,'2015-07-04 11:52:14',1),(128839,'3',6,'2015-07-04 18:47:53',1),(128840,'8',6,'2015-07-04 21:44:18',1),(128841,'2',6,'2015-07-04 22:00:42',4),(128842,'8',6,'2015-07-05 11:03:06',4),(128843,'10',6,'2015-07-05 11:53:49',1),(128844,'10',6,'2015-07-05 19:45:08',4),(128845,'8',6,'2015-07-05 22:55:07',1),(128846,'8',6,'2015-07-06 09:57:06',1),(128847,'3',6,'2015-07-06 09:57:13',1),(128848,'8',6,'2015-07-06 09:57:29',4),(128849,'2',6,'2015-07-06 11:10:29',1),(128850,'6',6,'2015-07-06 17:13:23',1),(128851,'5',6,'2015-07-06 17:22:18',1),(128852,'2',6,'2015-07-06 17:29:24',1),(128853,'2',6,'2015-07-06 17:29:26',1),(128854,'2',6,'2015-07-06 17:29:34',4),(128855,'7',6,'2015-07-07 00:26:51',1),(128856,'6',6,'2015-07-07 00:59:37',4),(128857,'5',6,'2015-07-07 01:00:14',4),(128858,'2',6,'2015-07-07 09:35:02',1),(128859,'7',6,'2015-07-07 09:36:31',4),(128860,'3',6,'2015-07-07 09:42:28',1),(128861,'5',6,'2015-07-07 17:25:10',1),(128862,'2',6,'2015-07-07 17:30:04',1),(128863,'3',6,'2015-07-07 17:30:10',1),(128864,'6',6,'2015-07-07 17:30:28',1),(128865,'3',6,'2015-07-07 17:30:35',4),(128866,'7',6,'2015-07-08 00:32:10',1),(128867,'6',6,'2015-07-08 00:59:28',4),(128868,'5',6,'2015-07-08 00:59:37',4),(128869,'3',6,'2015-07-08 09:35:24',1),(128870,'7',6,'2015-07-08 09:52:54',4),(128871,'2',6,'2015-07-08 09:58:48',1),(128872,'2',6,'2015-07-08 17:11:18',1),(128873,'5',6,'2015-07-08 17:21:32',1),(128874,'6',6,'2015-07-08 17:23:44',1),(128875,'3',6,'2015-07-08 17:29:53',4),(128876,'7',6,'2015-07-09 00:35:04',1),(128877,'5',6,'2015-07-09 01:01:34',1),(128878,'5',6,'2015-07-09 01:01:44',4),(128879,'6',6,'2015-07-09 01:13:12',4),(128880,'3',6,'2015-07-09 09:33:23',1),(128881,'7',6,'2015-07-09 09:33:43',4),(128882,'2',6,'2015-07-09 09:41:17',1),(128883,'5',6,'2015-07-09 17:19:49',1),(128884,'6',6,'2015-07-09 17:22:09',1),(128885,'7',6,'2015-07-10 00:44:43',1),(128886,'6',6,'2015-07-10 00:59:15',4),(128887,'5',6,'2015-07-10 01:00:24',1),(128888,'5',6,'2015-07-10 01:00:59',4),(128889,'2',6,'2015-07-10 09:35:16',1),(128890,'7',6,'2015-07-10 09:35:37',4),(128891,'5',6,'2015-07-10 17:07:51',1),(128892,'2',6,'2015-07-10 17:16:22',1),(128893,'2',6,'2015-07-10 17:16:32',4),(128894,'6',6,'2015-07-10 17:24:45',1),(128895,'3',6,'2015-07-10 17:30:15',4),(128896,'7',6,'2015-07-11 00:33:32',1),(128897,'5',6,'2015-07-11 01:02:00',4),(128898,'6',6,'2015-07-11 01:02:29',4),(128899,'5',6,'2015-07-11 09:54:21',1),(128900,'7',6,'2015-07-11 09:55:08',1),(128901,'7',6,'2015-07-11 09:55:45',4),(128902,'6',6,'2015-07-11 11:56:02',1),(128903,'5',6,'2015-07-11 20:04:07',4),(128904,'8',6,'2015-07-11 21:52:42',1),(128905,'6',6,'2015-07-11 22:01:09',4),(128906,'8',6,'2015-07-12 11:00:04',4),(128907,'10',6,'2015-07-12 15:30:23',1),(128908,'10',6,'2015-07-12 19:59:03',1),(128909,'10',6,'2015-07-12 19:59:05',1),(128910,'10',6,'2015-07-12 19:59:15',4),(128911,'8',6,'2015-07-12 22:58:08',1),(128912,'5',6,'2015-07-13 09:52:17',1),(128913,'8',6,'2015-07-13 09:55:58',4),(128914,'6',6,'2015-07-13 10:05:01',1),(128915,'3',6,'2015-07-13 17:20:45',1),(128916,'2',6,'2015-07-13 17:20:49',1),(128917,'5',6,'2015-07-13 17:31:29',4),(128918,'6',6,'2015-07-13 17:40:50',4),(128919,'7',6,'2015-07-14 00:33:37',1),(128920,'2',6,'2015-07-14 00:36:05',1),(128921,'3',6,'2015-07-14 00:49:27',4),(128922,'5',6,'2015-07-14 09:40:37',1),(128923,'7',6,'2015-07-14 09:41:59',1),(128924,'6',6,'2015-07-14 10:02:38',1),(128925,'2',6,'2015-07-14 17:06:17',1),(128926,'3',6,'2015-07-14 17:18:39',1),(128927,'6',6,'2015-07-14 17:33:27',4),(128928,'5',6,'2015-07-14 17:33:47',4),(128929,'7',6,'2015-07-15 00:41:38',1),(128930,'2',6,'2015-07-15 00:45:37',1),(128931,'3',6,'2015-07-15 00:55:07',4),(128932,'5',6,'2015-07-15 09:52:24',1),(128933,'7',6,'2015-07-15 09:52:57',4),(128934,'6',6,'2015-07-15 09:56:39',1),(128935,'4',6,'2015-07-15 17:13:18',1),(128936,'3',6,'2015-07-15 17:15:13',1),(128937,'2',6,'2015-07-15 17:17:38',1),(128938,'5',6,'2015-07-15 17:33:40',1),(128939,'5',6,'2015-07-15 17:33:47',4),(128940,'7',6,'2015-07-16 00:27:42',1),(128941,'2',6,'2015-07-16 00:37:11',4),(128942,'3',6,'2015-07-16 00:55:38',4),(128943,'5',6,'2015-07-16 10:00:48',1),(128944,'7',6,'2015-07-16 10:03:12',4),(128945,'6',6,'2015-07-16 11:46:47',1),(128946,'5',6,'2015-07-16 20:02:22',4),(128947,'7',6,'2015-07-16 21:40:35',1),(128948,'6',6,'2015-07-16 22:26:08',4),(128949,'7',6,'2015-07-17 09:57:21',1),(128950,'5',6,'2015-07-17 09:57:47',1),(128951,'7',6,'2015-07-17 09:58:46',4),(128952,'6',6,'2015-07-17 10:02:29',1),(128953,'3',6,'2015-07-17 17:04:41',1),(128954,'2',6,'2015-07-17 17:05:02',1),(128955,'6',6,'2015-07-17 17:31:46',4),(128956,'7',6,'2015-07-18 00:27:36',1),(128957,'2',6,'2015-07-18 00:34:06',1),(128958,'3',6,'2015-07-18 00:48:24',4),(128959,'2',6,'2015-07-18 09:32:14',1),(128960,'7',6,'2015-07-18 09:33:54',4),(128961,'3',6,'2015-07-18 11:52:16',1),(128962,'2',6,'2015-07-18 19:44:18',1),(128963,'2',6,'2015-07-18 19:44:24',4),(128964,'8',6,'2015-07-18 21:48:22',1),(128965,'8',6,'2015-07-19 11:00:21',4),(128966,'10',6,'2015-07-19 12:25:17',1),(128967,'10',6,'2015-07-19 19:49:32',4),(128968,'8',6,'2015-07-19 22:42:15',1),(128969,'3',6,'2015-07-20 09:54:18',1),(128970,'8',6,'2015-07-20 10:00:45',4),(128971,'2',6,'2015-07-20 10:38:31',1),(128972,'5',6,'2015-07-20 17:24:36',1),(128973,'6',6,'2015-07-20 17:26:52',1),(128974,'7',6,'2015-07-21 00:27:09',1),(128975,'5',6,'2015-07-21 01:05:54',4),(128976,'6',6,'2015-07-21 01:14:04',4),(128977,'2',6,'2015-07-21 09:16:44',1),(128978,'7',6,'2015-07-21 09:44:30',1),(128979,'7',6,'2015-07-21 09:44:52',4),(128980,'3',6,'2015-07-21 14:23:38',1),(128981,'6',6,'2015-07-21 17:17:38',1),(128982,'5',6,'2015-07-21 17:19:18',1),(128983,'2',6,'2015-07-21 17:21:22',4),(128984,'3',6,'2015-07-21 18:42:53',4),(128985,'7',6,'2015-07-22 00:36:57',1),(128986,'7',6,'2015-07-22 00:36:59',1),(128987,'6',6,'2015-07-22 00:58:40',4),(128988,'5',6,'2015-07-22 01:00:12',4),(128989,'2',6,'2015-07-22 09:41:59',1),(128990,'7',6,'2015-07-22 09:42:22',1),(128991,'7',6,'2015-07-22 09:42:40',4),(128992,'3',6,'2015-07-22 09:44:55',1),(128993,'3',6,'2015-07-22 17:24:36',4),(128994,'6',6,'2015-07-22 17:26:47',1),(128995,'5',6,'2015-07-22 17:28:15',1),(128996,'2',6,'2015-07-22 17:29:02',1),(128997,'7',6,'2015-07-23 00:50:40',1),(128998,'6',6,'2015-07-23 01:00:50',1),(128999,'6',6,'2015-07-23 01:01:11',1),(129000,'6',6,'2015-07-23 01:01:23',4),(129001,'2',6,'2015-07-23 09:35:54',1),(129002,'7',6,'2015-07-23 09:36:13',4),(129003,'3',6,'2015-07-23 09:49:25',1),(129004,'5',6,'2015-07-23 17:12:28',1),(129005,'2',6,'2015-07-23 17:15:58',1),(129006,'2',6,'2015-07-23 17:16:05',4),(129007,'6',6,'2015-07-23 17:20:34',1),(129008,'3',6,'2015-07-23 17:26:13',4),(129009,'7',6,'2015-07-24 00:33:13',1),(129010,'6',6,'2015-07-24 00:56:36',4),(129011,'5',6,'2015-07-24 00:57:06',4),(129012,'2',6,'2015-07-24 09:35:35',1),(129013,'7',6,'2015-07-24 09:36:04',1),(129014,'7',6,'2015-07-24 09:36:26',1),(129015,'7',6,'2015-07-24 09:36:47',4),(129016,'3',6,'2015-07-24 10:02:26',1),(129017,'5',6,'2015-07-24 17:21:40',1),(129018,'3',6,'2015-07-24 17:26:18',1),(129019,'3',6,'2015-07-24 17:26:33',4),(129020,'2',6,'2015-07-24 17:26:41',4),(129021,'6',6,'2015-07-24 17:30:38',1),(129022,'5',6,'2015-07-24 22:58:25',1),(129023,'5',6,'2015-07-24 22:58:36',4),(129024,'7',6,'2015-07-25 00:50:56',1),(129025,'6',6,'2015-07-25 01:02:11',4),(129026,'5',6,'2015-07-25 09:49:39',1),(129027,'7',6,'2015-07-25 09:53:33',1),(129028,'7',6,'2015-07-25 09:54:15',1),(129029,'7',6,'2015-07-25 09:55:41',4),(129030,'6',6,'2015-07-25 12:40:46',1),(129031,'5',6,'2015-07-25 20:02:53',4),(129032,'8',6,'2015-07-25 21:47:22',1),(129033,'8',6,'2015-07-26 11:01:13',4),(129034,'10',6,'2015-07-26 11:54:51',1),(129035,'10',6,'2015-07-26 19:47:22',4),(129036,'8',6,'2015-07-26 22:51:44',1),(129037,'5',6,'2015-07-27 09:52:26',1),(129038,'8',6,'2015-07-27 09:56:30',4),(129039,'6',6,'2015-07-27 09:59:05',1),(129040,'3',6,'2015-07-27 16:54:48',1),(129041,'2',6,'2015-07-27 17:16:19',1),(129042,'5',6,'2015-07-27 17:30:27',1),(129043,'5',6,'2015-07-27 17:30:35',4),(129044,'7',6,'2015-07-28 00:29:52',1),(129045,'2',6,'2015-07-28 00:30:05',4),(129046,'3',6,'2015-07-28 00:53:17',4),(129047,'7',6,'2015-07-28 09:44:51',4),(129048,'5',6,'2015-07-28 09:52:34',1),(129049,'6',6,'2015-07-28 10:12:37',1),(129050,'2',6,'2015-07-28 16:47:59',1),(129051,'2',6,'2015-07-28 16:56:05',1),(129052,'3',6,'2015-07-28 17:26:37',1),(129053,'5',6,'2015-07-28 17:30:35',1),(129054,'5',6,'2015-07-28 17:30:42',4),(129055,'6',6,'2015-07-28 18:02:05',4),(129056,'7',6,'2015-07-29 00:36:02',1),(129057,'2',6,'2015-07-29 00:43:57',1),(129058,'3',6,'2015-07-29 00:51:02',4),(129059,'7',6,'2015-07-29 09:38:51',1),(129060,'7',6,'2015-07-29 09:39:22',4),(129061,'5',6,'2015-07-29 09:50:21',1),(129062,'6',6,'2015-07-29 10:54:38',1),(129063,'3',6,'2015-07-29 17:20:27',1),(129064,'2',6,'2015-07-29 17:22:25',1),(129065,'5',6,'2015-07-29 17:32:40',4),(129066,'7',6,'2015-07-30 00:40:53',1),(129067,'2',6,'2015-07-30 00:43:50',4),(129068,'3',6,'2015-07-30 00:50:34',4),(129069,'7',6,'2015-07-30 09:41:30',4),(129070,'5',6,'2015-07-30 09:54:57',1),(129071,'6',6,'2015-07-30 09:57:43',1),(129072,'2',6,'2015-07-30 17:02:19',1),(129073,'3',6,'2015-07-30 17:03:08',1),(129074,'5',6,'2015-07-30 17:32:53',4),(129075,'7',6,'2015-07-31 00:32:43',1),(129076,'2',6,'2015-07-31 00:41:27',1),(129077,'3',6,'2015-07-31 00:56:51',1),(129078,'3',6,'2015-07-31 00:57:02',4),(129079,'7',6,'2015-07-31 09:38:55',1),(129080,'7',6,'2015-07-31 09:39:08',4),(129081,'5',6,'2015-07-31 09:51:15',1),(129082,'6',6,'2015-07-31 10:02:15',1),(129083,'3',6,'2015-07-31 17:17:34',1),(129084,'6',6,'2015-07-31 17:28:36',4),(129085,'5',6,'2015-07-31 17:31:21',4),(129086,'2',6,'2015-07-31 17:31:33',1),(129087,'5',6,'2015-07-31 17:32:23',4),(129088,'5',6,'2015-07-31 17:33:12',4),(129089,'2',6,'2015-07-31 17:41:52',1),(129090,'7',6,'2015-08-01 00:23:50',1),(129091,'2',6,'2015-08-01 00:25:28',4),(129092,'3',6,'2015-08-01 00:49:07',4),(129093,'2',6,'2015-08-01 10:00:17',1),(129094,'7',6,'2015-08-01 10:01:04',4),(129095,'3',6,'2015-08-01 15:56:32',1),(129096,'3',6,'2015-08-01 21:18:25',4),(129097,'8',6,'2015-08-01 21:52:53',1),(129098,'2',6,'2015-08-01 22:42:17',4),(129099,'8',6,'2015-08-02 11:05:12',4),(129100,'10',6,'2015-08-02 12:03:09',1),(129101,'10',6,'2015-08-02 19:55:35',1),(129102,'10',6,'2015-08-02 19:55:42',4),(129103,'10',6,'2015-08-02 19:55:44',4),(129104,'8',6,'2015-08-02 22:54:44',1),(129105,'3',6,'2015-08-03 09:59:12',1),(129106,'8',6,'2015-08-03 09:59:18',4),(129107,'2',6,'2015-08-03 10:33:14',1),(129108,'5',6,'2015-08-03 17:15:36',1),(129109,'3',6,'2015-08-03 17:27:50',4),(129110,'6',6,'2015-08-03 17:31:20',1),(129111,'7',6,'2015-08-04 00:52:52',1),(129112,'6',6,'2015-08-04 00:57:13',4),(129113,'5',6,'2015-08-04 01:03:23',4),(129114,'2',6,'2015-08-04 09:28:01',1),(129115,'7',6,'2015-08-04 09:28:19',4),(129116,'3',6,'2015-08-04 09:49:08',1),(129117,'5',6,'2015-08-04 17:20:19',1),(129118,'6',6,'2015-08-04 17:21:58',1),(129119,'3',6,'2015-08-04 17:22:13',4),(129120,'7',6,'2015-08-05 00:53:13',1),(129121,'6',6,'2015-08-05 00:56:05',4),(129122,'5',6,'2015-08-05 00:58:47',4),(129123,'5',6,'2015-08-05 09:35:54',1),(129124,'3',6,'2015-08-05 09:36:50',1),(129125,'7',6,'2015-08-05 09:40:29',1),(129126,'7',6,'2015-08-05 09:40:58',4),(129127,'3',6,'2015-08-05 17:27:38',4),(129128,'5',6,'2015-08-05 17:32:15',4),(129129,'2',6,'2015-08-05 17:32:20',4),(129130,'6',6,'2015-08-05 17:33:31',1),(129131,'7',6,'2015-08-06 00:40:39',1),(129132,'2',6,'2015-08-06 00:40:46',1),(129133,'2',6,'2015-08-06 00:40:58',4),(129134,'6',6,'2015-08-06 00:45:05',1),(129135,'7',6,'2015-08-06 09:42:08',1),(129136,'7',6,'2015-08-06 09:42:35',4),(129137,'2',6,'2015-08-06 09:59:59',1),(129138,'3',6,'2015-08-06 10:00:04',1),(129139,'6',6,'2015-08-06 17:44:15',1),(129140,'3',6,'2015-08-06 17:50:12',4),(129141,'2',6,'2015-08-06 23:58:13',4),(129142,'7',6,'2015-08-07 00:53:08',1),(129143,'6',6,'2015-08-07 00:58:47',4),(129144,'7',6,'2015-08-07 09:30:21',4),(129145,'2',6,'2015-08-07 09:31:10',1),(129146,'3',6,'2015-08-07 09:52:37',1),(129147,'5',6,'2015-08-07 17:09:12',1),(129148,'6',6,'2015-08-07 17:14:57',1),(129149,'3',6,'2015-08-07 18:55:13',4),(129150,'7',6,'2015-08-08 00:55:35',1),(129151,'6',6,'2015-08-08 00:57:45',4),(129152,'5',6,'2015-08-08 01:01:51',4),(129153,'5',6,'2015-08-08 09:59:25',1),(129154,'7',6,'2015-08-08 10:00:18',1),(129155,'6',6,'2015-08-08 11:53:33',1),(129156,'5',6,'2015-08-08 20:22:41',4),(129157,'8',6,'2015-08-08 21:54:26',1),(129158,'6',6,'2015-08-08 22:04:06',4),(129159,'8',6,'2015-08-09 11:00:01',4),(129160,'10',6,'2015-08-09 12:12:21',1),(129161,'10',6,'2015-08-09 20:01:34',4),(129162,'10',6,'2015-08-09 20:01:36',4),(129163,'8',6,'2015-08-09 22:53:59',1),(129164,'5',6,'2015-08-10 09:54:49',1),(129165,'6',6,'2015-08-10 09:58:54',1),(129166,'8',6,'2015-08-10 10:01:42',4),(129167,'3',6,'2015-08-10 17:14:16',1),(129168,'2',6,'2015-08-10 17:18:59',1),(129169,'5',6,'2015-08-10 17:30:52',4),(129170,'2',6,'2015-08-11 00:35:32',4),(129171,'7',6,'2015-08-11 00:35:43',1),(129172,'5',6,'2015-08-11 09:50:51',1),(129173,'7',6,'2015-08-11 09:56:00',4),(129174,'6',6,'2015-08-11 10:07:21',1),(129175,'3',6,'2015-08-11 17:13:39',1),(129176,'2',6,'2015-08-11 17:16:01',1),(129177,'6',6,'2015-08-11 17:29:42',4),(129178,'5',6,'2015-08-11 17:35:07',4),(129179,'7',6,'2015-08-12 00:25:34',1),(129180,'2',6,'2015-08-12 00:26:45',1),(129181,'3',6,'2015-08-12 00:43:52',4),(129182,'5',6,'2015-08-12 09:47:30',1),(129183,'7',6,'2015-08-12 09:53:21',4),(129184,'6',6,'2015-08-12 10:13:21',1),(129185,'3',6,'2015-08-12 17:22:36',1),(129186,'2',6,'2015-08-12 17:24:03',1),(129187,'6',6,'2015-08-12 17:28:36',4),(129188,'5',6,'2015-08-12 17:37:03',1),(129189,'5',6,'2015-08-12 17:37:11',4),(129190,'7',6,'2015-08-13 00:35:56',1),(129191,'3',6,'2015-08-13 00:47:58',4),(129192,'5',6,'2015-08-13 10:00:00',1),(129193,'7',6,'2015-08-13 10:01:10',1),(129194,'6',6,'2015-08-13 10:18:23',1),(129195,'3',6,'2015-08-13 17:08:42',1),(129196,'2',6,'2015-08-13 17:22:17',1),(129197,'5',6,'2015-08-13 17:27:13',1),(129198,'5',6,'2015-08-13 17:27:20',4),(129199,'7',6,'2015-08-14 00:35:17',1),(129200,'7',6,'2015-08-14 00:35:19',1),(129201,'2',6,'2015-08-14 00:39:24',1),(129202,'2',6,'2015-08-14 00:39:31',4),(129203,'3',6,'2015-08-14 00:44:05',4),(129204,'7',6,'2015-08-14 09:54:22',1),(129205,'6',6,'2015-08-14 10:17:13',1),(129206,'5',6,'2015-08-14 10:17:20',1),(129207,'3',6,'2015-08-14 17:24:37',1),(129208,'3',6,'2015-08-15 00:44:12',1),(129209,'3',6,'2015-08-15 00:44:21',4),(129210,'7',6,'2015-08-15 00:56:00',1),(129211,'5',6,'2015-08-15 01:06:20',4),(129212,'2',6,'2015-08-15 09:35:39',1),(129213,'7',6,'2015-08-15 09:36:09',4),(129214,'3',6,'2015-08-15 11:58:42',1),(129215,'2',6,'2015-08-15 20:20:04',1),(129216,'8',6,'2015-08-15 21:59:07',1),(129217,'3',6,'2015-08-15 22:02:54',1),(129218,'3',6,'2015-08-15 22:03:37',4),(129219,'8',6,'2015-08-16 11:05:55',1),(129220,'8',6,'2015-08-16 11:06:01',4),(129221,'10',6,'2015-08-16 11:35:08',1),(129222,'10',6,'2015-08-16 19:35:27',1),(129223,'10',6,'2015-08-16 19:35:34',4),(129224,'8',6,'2015-08-16 22:57:29',1),(129225,'3',6,'2015-08-17 09:53:18',1),(129226,'8',6,'2015-08-17 10:02:56',4),(129227,'2',6,'2015-08-17 10:54:32',1),(129228,'5',6,'2015-08-17 17:20:40',1),(129229,'6',6,'2015-08-17 17:26:19',1),(129230,'3',6,'2015-08-17 17:35:24',4),(129231,'2',6,'2015-08-17 17:35:34',4),(129232,'7',6,'2015-08-18 00:53:52',1),(129233,'5',6,'2015-08-18 01:07:25',4),(129234,'6',6,'2015-08-18 01:11:29',1),(129235,'6',6,'2015-08-18 01:11:36',4),(129236,'2',6,'2015-08-18 09:58:17',1),(129237,'7',6,'2015-08-18 09:58:28',4),(129238,'3',6,'2015-08-18 10:14:16',1),(129239,'5',6,'2015-08-18 17:09:01',1),(129240,'6',6,'2015-08-18 17:20:29',1),(129241,'3',6,'2015-08-18 17:32:25',4),(129242,'7',6,'2015-08-19 00:48:06',1),(129243,'6',6,'2015-08-19 01:03:44',4),(129244,'2',6,'2015-08-19 09:29:07',1),(129245,'7',6,'2015-08-19 09:30:14',1),(129246,'7',6,'2015-08-19 09:30:33',4),(129247,'3',6,'2015-08-19 11:30:03',1),(129248,'5',6,'2015-08-19 17:14:29',1),(129249,'2',6,'2015-08-19 17:28:57',1),(129250,'2',6,'2015-08-19 17:29:11',4),(129251,'6',6,'2015-08-19 17:45:41',1),(129252,'7',6,'2015-08-20 00:47:48',1),(129253,'6',6,'2015-08-20 00:57:23',4),(129254,'5',6,'2015-08-20 00:57:28',4),(129255,'2',6,'2015-08-20 09:37:03',1),(129256,'7',6,'2015-08-20 09:38:40',4),(129257,'3',6,'2015-08-20 09:45:09',1),(129258,'5',6,'2015-08-20 17:10:17',1),(129259,'2',6,'2015-08-20 17:12:12',1),(129260,'2',6,'2015-08-20 17:15:52',4),(129261,'6',6,'2015-08-20 17:17:56',1),(129262,'3',6,'2015-08-20 17:22:54',4),(129263,'7',6,'2015-08-21 00:45:44',1),(129264,'6',6,'2015-08-21 00:51:45',4),(129265,'5',6,'2015-08-21 00:53:29',4),(129266,'3',6,'2015-08-21 09:32:20',1),(129267,'7',6,'2015-08-21 09:38:08',1),(129268,'7',6,'2015-08-21 09:38:48',1),(129269,'7',6,'2015-08-21 09:39:34',1),(129270,'2',6,'2015-08-21 09:39:44',1),(129271,'7',6,'2015-08-21 09:39:55',4),(129272,'3',6,'2015-08-21 17:29:46',4),(129273,'2',6,'2015-08-21 17:30:09',4),(129274,'5',6,'2015-08-21 17:37:17',1),(129275,'6',6,'2015-08-21 17:41:34',1),(129276,'7',6,'2015-08-22 00:44:22',1),(129277,'6',6,'2015-08-22 00:50:54',4),(129278,'5',6,'2015-08-22 00:50:59',4),(129279,'7',6,'2015-08-22 10:01:24',1),(129280,'8',6,'2015-08-22 21:55:47',1),(129281,'5',6,'2015-08-22 22:21:53',4),(129282,'8',6,'2015-08-23 11:02:10',4),(129283,'10',6,'2015-08-23 12:12:18',1),(129284,'10',6,'2015-08-23 19:54:06',1),(129285,'10',6,'2015-08-23 19:54:15',4),(129286,'8',6,'2015-08-23 22:51:15',1),(129287,'5',6,'2015-08-24 09:53:32',1),(129288,'8',6,'2015-08-24 09:55:46',4),(129289,'6',6,'2015-08-24 10:15:35',1),(129290,'2',6,'2015-08-24 17:13:46',1),(129291,'2',6,'2015-08-24 17:13:48',1),(129292,'3',6,'2015-08-24 17:13:53',1),(129293,'5',6,'2015-08-24 17:26:41',1),(129294,'5',6,'2015-08-24 17:26:49',4),(129295,'6',6,'2015-08-24 17:28:13',4),(129296,'7',6,'2015-08-25 00:36:59',1),(129297,'3',6,'2015-08-25 00:42:00',1),(129298,'3',6,'2015-08-25 00:42:12',4),(129299,'2',6,'2015-08-25 00:50:55',4),(129300,'5',6,'2015-08-25 09:54:34',1),(129301,'7',6,'2015-08-25 09:55:20',1),(129302,'7',6,'2015-08-25 09:57:04',1),(129303,'7',6,'2015-08-25 09:57:34',4),(129304,'6',6,'2015-08-25 10:00:53',1),(129305,'3',6,'2015-08-25 17:13:04',1),(129306,'2',6,'2015-08-25 17:20:29',1),(129307,'6',6,'2015-08-25 17:32:26',4),(129308,'5',6,'2015-08-25 17:32:36',4),(129309,'7',6,'2015-08-26 00:49:57',1),(129310,'7',6,'2015-08-26 00:50:00',1),(129311,'2',6,'2015-08-26 00:50:07',4),(129312,'2',6,'2015-08-26 00:50:17',4),(129313,'3',6,'2015-08-26 00:50:33',4),(129314,'5',6,'2015-08-26 09:57:35',1),(129315,'7',6,'2015-08-26 09:59:35',4),(129316,'6',6,'2015-08-26 10:12:08',1),(129317,'3',6,'2015-08-26 17:15:14',1),(129318,'2',6,'2015-08-26 17:19:58',1),(129319,'5',6,'2015-08-26 17:33:33',4),(129320,'6',6,'2015-08-26 17:39:29',1),(129321,'6',6,'2015-08-26 17:39:37',4),(129322,'7',6,'2015-08-27 00:39:53',1),(129323,'2',6,'2015-08-27 00:41:34',4),(129324,'3',6,'2015-08-27 00:49:03',4),(129325,'5',6,'2015-08-27 09:56:08',1),(129326,'7',6,'2015-08-27 10:02:48',4),(129327,'6',6,'2015-08-27 10:09:05',1);
/*!40000 ALTER TABLE `tattendancelog` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tattendancemodify`
--

DROP TABLE IF EXISTS `tattendancemodify`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tattendancemodify` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cWho` bigint(20) NOT NULL,
  `cWhen` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `cEmployee` bigint(20) NOT NULL,
  `cAttendanceLog` bigint(20) DEFAULT NULL COMMENT 'Apply only when is modify, else is null',
  `cOldMachine` bigint(20) DEFAULT NULL,
  `cNewMachine` bigint(20) NOT NULL,
  `cOldDate` timestamp NULL DEFAULT NULL,
  `cNewDate` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `cOldMarkType` bigint(20) DEFAULT NULL,
  `cNewMarkType` bigint(20) NOT NULL,
  PRIMARY KEY (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tattendancemodify`
--

LOCK TABLES `tattendancemodify` WRITE;
/*!40000 ALTER TABLE `tattendancemodify` DISABLE KEYS */;
/*!40000 ALTER TABLE `tattendancemodify` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tdatatype`
--

DROP TABLE IF EXISTS `tdatatype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tdatatype` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(10) NOT NULL,
  `cName` varchar(20) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cId` (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tdatatype`
--

LOCK TABLES `tdatatype` WRITE;
/*!40000 ALTER TABLE `tdatatype` DISABLE KEYS */;
INSERT INTO `tdatatype` VALUES (1,'STRING','String'),(2,'DOUBLE','Double'),(3,'INTEGER','Integer'),(4,'TIMESTAMP','Timestamp'),(5,'BOOLEAN','Boolean'),(6,'LONG','Long');
/*!40000 ALTER TABLE `tdatatype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `temployee`
--

DROP TABLE IF EXISTS `temployee`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `temployee` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(25) NOT NULL,
  `cRut` varchar(11) DEFAULT NULL COMMENT 'Rut',
  `cName` varchar(50) NOT NULL COMMENT 'Nombre',
  `cPost` bigint(20) DEFAULT NULL COMMENT 'Codigo Cargo',
  `cArea` bigint(20) DEFAULT NULL COMMENT 'Codigo Area',
  `cPrivilege` bigint(20) DEFAULT '1',
  `cEnabled` bit(1) NOT NULL DEFAULT b'1',
  `cGroup` bigint(20) NOT NULL,
  `cFingerprint` text,
  `cFlag` int(11) DEFAULT NULL,
  `cFingerIndex` int(11) DEFAULT NULL,
  `cUsername` varchar(40) DEFAULT NULL,
  `cMail` varchar(50) DEFAULT NULL,
  `cBoss` bigint(20) DEFAULT NULL,
  `cCardNumber` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`),
  KEY `Employee_index_Post` (`cPost`),
  KEY `Employee_index_Area` (`cArea`),
  KEY `Employee_index_Privilege` (`cPrivilege`),
  KEY `employee_index_group` (`cGroup`),
  KEY `employee_index_employee` (`cBoss`),
  CONSTRAINT `EmployeeToArea` FOREIGN KEY (`cArea`) REFERENCES `tarea` (`cId`),
  CONSTRAINT `EmployeeToEmployee` FOREIGN KEY (`cBoss`) REFERENCES `temployee` (`cId`),
  CONSTRAINT `EmployeeToGroup` FOREIGN KEY (`cGroup`) REFERENCES `tgroup` (`cId`),
  CONSTRAINT `EmployeeToPost` FOREIGN KEY (`cPost`) REFERENCES `tpost` (`cId`),
  CONSTRAINT `EmployeeToPrivilege` FOREIGN KEY (`cPrivilege`) REFERENCES `tprivilege` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=89 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `temployee`
--

LOCK TABLES `temployee` WRITE;
/*!40000 ALTER TABLE `temployee` DISABLE KEYS */;
INSERT INTO `temployee` VALUES (81,'2','11974699-K','Luis Rojas',1,6,1,'',1,'SjVTUzIxAAADdnQECAUHCc7QAAAbd2kBAAAAg5seMHZTAH0NkACbACV5FgBjAPgOsgBxdigPmQBzAGIPpXaCACgPfgBBAKV5eQCNACkPkQCSdoYPQwCWAN4PDnauAD4MHAB2AC19MgC6ADkLfwC5djEPJQDCAGgLOHbEAFINEwADAFV6LwDNAMQLkADRdlMPJQDVAAgLKnbcAGENpQAiAEJ5HgDqAN4OvgDpdlQPzADsAAQPWHbuAM4PuQA9ADt4vwAOATsPaAAYd04PiQAhAaAPbfI6ZzP7iYIH/K31c3yv36dzTIWWdT8E/YGJgoMA/vfbhgYHNH9IfcV2MYcVA9alqG31F+/jWZW65mrITmZ46l6Q3fC4gKavbOixjJF1ZvGEBwIL+ei9dLiA1m6YkLWmIak4KUr8IfthGKV0BANl8reS4G6UC7Ahz+B4hO2cXQuDgr2ZfHxtEnYcY4gpYccHKYoSiYOCaQqveFt9MXpE/uaNrO39BhZ93BWtmwMZFhkPLhYSNXhKFSAsAQEpGJd8AXYcHsLAOv5wtgwAbCQT/wX+Xjw3DgBhJhc6XcOJwUxaAwC54yLDZQFFJw/B/Z1U/LZVwf9ABQBuLBSLwP8GAJ8t2UXDcQFBMAn//QVcCHYnOAA7/0aPGANUQwDA/jPABf9IiUb/XGoUAN9O9Ij/O0X+OD0FWQp2Gl73wP7+7f4OdpVeIEVERAX+HXYaZv3C/vsFK8GLNET+/sH/O/79if7A///+GsUlbovB/Csw//+FwCmJM/5vDgB5sCL8Mv/A/8DBL9wALw72/fv/wP46M/y2NTPAN1YJxaqAUVJF+QgApkMtwon+wzoGAFFKj8e1wccUAHuQ4jj9tkH+/yjA/p8aA2aV3vz+//w5QP2I/v/8//5BOsDDtm0SAEeUDD7//YvB/P/8//8F//23/sEEAD+WRcTCfgFHmhwuI9QAJ9P7wPr8/P86/f6I/P//wv7AxgAh3R/3BAC7vug3B3YWyUb5wATFPMg5JgkAVdhQO/1AicAEACLZYIYOA9PrPUD+J135AwNt7GnCDAB6KlD9iDnA/8BHBMXO80bBwAYAt/v4Wv5yAb37NML+zhARfujB/cLDnwHFCXY5tiL9+P47/MO1wAgQqh9M5HMEZrEfQPz6wTnBC2aEJGLA/v+dBBPkU3RPAA==',1,0,'luis.rojas','',NULL,'0'),(82,'3','12205301-6','Manuel Hernandez',1,6,1,'',1,'SsdTUzIxAAADhIsECAUHCc7QAAAbhWkBAAAAg6khVoRLACQOtACOAK6LWQBZAKwO9wBmhCsNTgBtAF8NyIRvAKIPPgC9AKuIbAB6ABsPEgB5hCUPvAB+AF8PSYSEABkNaABNABCLeACLAJgPhACThIIOXQCYAFMO7YSiAKEPXgAWABiLWwDhAJIP2QDnhGgPXgADAVEPCYUXAakPZwDnAZiLWAAkASgP4gApheIKOQAqAa8MXIQ3AaQPJQD8AcePDgE7AagMhQBHhR0M/ABIAf8NN4RPAUcLXACRAZqJTABVASANUHilCcP//g8PFT6LjgwoFv6SgYakk0kGTPW58i2CxIA+jov3+ZHBEUSCtoyMhfaB/YQcj4gAxPrhe6PtAJgK9SyCPfh1fAB9cgCQfVoE2Wx83gprxIWNf3UXSnx4j4oDsYiniOKHuvwrAW8rF9vKU1API/g2bKoF1wEk9Y4LYXQ1+l8IVgiMhdLA5SBYeb1NmIl9qk1TVH2ujiMMgeChXiB/QvaXAZMLydRM/RozLJYTkdOj2CziA0QrZXiu9Lt8XgwEBe3bBWZ6MQKkMwEB1RjiwQCOrB1JCQB2LNbANM8OAFwtFsI7U2NE/vyZCgBY/BfBx8E+AwBFQIXJCIS5RSRHwsGAwQqEWEcawmBgwgDSzRb+SsEJAAhOJPBj/QUA8VDi/4qSAT1WHow+gkpezjkFACpYNzi3EYRdXAz+VsA7wSzpUgcANl0wBsXHfsARAHJ9GqFEWERhwMAIANpFJMF5df0EABqB38f/jgG/gR7/wAc3wnoUAE6DDPw7xfx6wcD/wMFMk0cShG2LF8L+/5FdWOEFAD2SgGzXAGIYFsBUU8BgBFX8nAETngDAwDorQLllVMH/PBrFAamHev7+Pk9otlFIehkACLn3/4UyT8hl/sHAPQfFCMZzQC4IAALK1cb9uPwQAGLSF4PBT9/+wGwPAF8SIm7OwcBKTAcAzdz3ecMnEQAg4zgwK9xEwGANAF0gHEnRwf9kAwAaLWfCjAFe/5yWxFgHE94Fl8PAxJfPEGGDI1L+wcDABAgTlRHxwvz9/jv9BZQnEfr+/i3AEAucLDIFECgaxv8cgBEZHUN1BdUGHLlyBxBqJSQEQ8KCEV0nKW3AwhA+rg38wv3+/cYQNKlmyQMQHjTx+gaUPzgM/v39wRAwxSg0BBAwSJ9D',1,0,'manuel.hernandez','',NULL,'0'),(84,'5','12984406-K','Manuel Toro',1,6,4,'',1,'TdlTUzIxAAAEmpsECAUHCc7QAAAcm2kBAAAAhEcujZoWAIkPfQDkAIaVUwAwAHEPTAA5moIPQABFADEPTZpRAGwPMwCoAFuUegByAG0PhQBwmmAOlgB0AE8PBpt8ACkOLQBHAOCUngCLAI0N+ACImlcOJwCSAJEPcZqWAE8OiQBcADuXWgCbAEwOhQCZmk0PegCtAIUOxJquALAOqAB2ADiUmQC+ADYObQDDmrsOSADbAPIPKJrcADwPHQAkAD+UEwDpAE0O6wDomrsOpADyAHIPHJr7AKUNWgA+ALKV1AAMASoPQQALm7UPHQASAUoORJoXAa8PMQDSAaCUeAAXAa8POwAcm68PUQAeAXUP4ZotAakPnwCGAaKV/ABIAUcPRgBOm6EPswBQAWQPXJpWAZsPXQj/CmOB4PguAHMQqH9angLwrgC+/o4atRJoh9qXuXgn/HaXNABtflYI3Odeu0cytQSFfqAOLWR4H0ZOv3sWn8d17JC1kWmGYAZZyS9SZQzBdWQG+eogAj0LNRGsEqmdxPGdAim36P+1mcv57fgxAwD7/WgcAlYNSXb3+UblrAmFhT2OpH01Z+P5XYWJgW8NzWWzfHaBgYR8AEWdrPA9AF2B3BRhMziXgYBdgfQXimUvB4OBjVnQGqH0Fwl2gSoJQ4Fm5ep2NQSy/6YA+Xeo7vbhUQwgAVK72PRpFeb0fPxKmHP7OgReh9JoYZtbDJ79vvxDgfr/8AZRC3/7G6H/AuIf2f9WByIAfWRmAMf72v9m7p91/nc31qY/5UQFmE8fowYAg84MxGdcAwBnDQM6AwT9FQP+EwCN3BBAZ8A+T8BnK8AAfYSHhAoAyh/lwMTZOQgA4iEprP48nAF5I4BzwtAAhbkI/v/AL0w6/sXAwVAIAMQq5UpAmQFOLnfDG8VWNGA6//9A/1X3ZFzBwQMATzRwBAYEHzuJiMEVAEg/FLX/wDvBVcGAwFKcAYVAg3jCwQA40nF2BgBFT7R7wIIBTU/3wf3xPfpaP0xteAYAjVRt+MAdADZr6fgx+alKQv9kwYA7SQGaL21icQgAUG+UCJwGAHdwd1fDA5ozcVxrZQ7FQ3VzNcH9/f4y8gYEAHQgNcAPALJ2bx6YwcDBkMDGAETiW/0FAQCA9GQDmqGHnMXEw0gFBAGKjMOkCQD8jFgdWv4LAImOosWEWGPCDgCij+xGRlplkAcAPZCTeF+ZAZeSJ/8GxSORwHLCBgAolpVVxYgBk5gwRf+AfnzxCwBzm1OJBIHGlQGFnFDFWLv/c+sJAFedUHcGbBWajZ00OItitGQOmmSeRll+jc0AWQVNcMROBQD5oVdYXwsAQqFJBXGEZcMRAIepOp1wd1txbw4AwrPxVHPswP7ABwB6cUDE9cAOAKy3N59n+xNkBACZwTeeCgTS3jd4gVsOxSHhoMLCZsH/wARcAJou8DDC/QzFXPu3hP93wI4D1QIFmfsFEIYTLTp/DoogFRf+wGI6eAGKfRspwIAI1QUYmf3//1oFEJAiJlprCBAGJxcETHydEQc4F8FTBQYUnkUexFUEEENNGvMCELZTHsA=',1,0,'manuel.toro','',NULL,'0'),(85,'6','11110098-5','Victor Huete',1,6,1,'',1,'Tw1TUzIxAAAGTkwECAUHCc7QAAAeT2kBAAAAhvNTXk4ZALgNbgDZAMpDiAAkAM4OXwAiTskNpwAnACENzE4mAB8PUwDvAMdFwgArAJcO6wArTsUMWAAzABUM2E5DAJ0P1wCDAJZAQQBIANkN9gBPTswNhABNAD0PH05bAOEOVQCeAPFBXABiAHUPEgBsTo0PqAB1AMgPLE53ACUP9wCyACFBMAB6AO8OTQB6Tv4P8wCDAFkPEE6bADkNKQBeAMtDdgCjAAQPxQGtTiYOigCwANcPIk6/AD8LUQB6AP5DYADJAAgP2ADITk8LyQDQAOcPgE7XACYOrAASACVBFADaAEYNrwDZTicOBAHmAGkOkE7mAC4OYwApAF5AUADvAF0O6AD3TuANJQDyABcMeE75AEEPmwA9ADFBEwAFAccN/AAMT08MTQANAZYOJk4RAT0LuQDUAT9B9wAUAbUO/wAQT88MDwEXAXkOKk4ZAccMYgDYAc1AKQAiATkM3AAjT8MMMwAmAQUMwU4mATkPLgDoAURDPAAuAdIN2AApT08NBgEwAX4Oak43AcQO3QD8AbdD0QA7AT4MHQBGTzsNAAFCAXYPF05CAcsOMwCBAcBA+QBJAa4OqQBNT0wN0gBLAQAKkE5NAUcOWQCLAVRCFwBUAc0O2gBST0UOzABYAfMMUk5YAdINSwCZAVRDgABcAUoN0PnXoAjrPRbBA+cMs0Y8B7rswOf8/MR9JR+hTyIYCYqMy5OR7PONCWv00jRwtxIJ9fsj7LxLXRNxG5IEiQ6Mz4MJ3Paa+WdxIkHE54oIsPeoCxiiTy72h18wTxTM8sf2qIcpI9surs2rnvp/BmVz/RS87xBrgBcWtToACp9ZqI/qnVIBLoDfJToSevQX/zlGsXeCEhp3jG18sB8WNZV+4T+Rk7hPB9L/Do/SAZ0xCBK27tsMVPCQtgt1ofGu1s+7F1+o5raxjQjAEGwz1wDP9sPvuPrLTaflxfdWAHftE7ZkdxIIsdDIIktNIvgP8ZOHTPnzRDgP/TSh/f8YG0sPOGoMHBIIl0TSqfIRD1mPhA8jWdPo/QnJ+9sV08OY99YAcINUiT+ztAWdhUmLmHjnN3QFcQPmBrL817T3/CYHcIPoCANeSAoVAxMIzZOztlCMUXvlC/v+HjlVe3T78Hd8iIvIGYJQi9zzsP73TWSLGIboC4RwTlkwkAEO5I/UFCtCFAmVAxkPOHlrtRt0KHpId+DtXkg9j314IIoZ/po5MQed+VoFLAHfxIx+cYaN9uSHsrGo92r8rf0wiVdJkY8NkHmIZP+4sc6EgIMpBVQBssRoBaIIvHokeifNHHAd/xH75YKGzZiHIIIRAReNG0nQ/8b71yhc+wI9+IhyRAIg+QEEDx0IBACSAv/A8UoBZQRDNATFrQN+/8kEAIkHlSQDTrkLMMbC/sAAg2hq/nMOAKPsdPk5R3DAxgcACCoQsPrCxP8EAOQ4SnQXANRBk3kGZ0ESwcXFxcH9OAsGnUaMwMDDxDrBxLP+BQDaSSQGNQtOiUz3wP/7BP/6Ez0HAFFddAXBxYjEDgBZXf2oRvh+NQQAWmR6sw0GnGiPi3PBwQTAx0cBjHJ9dGI3CQblcgnAQP9GxgAIOTzDCACqedZd+XMJAIR8fW0HaBZOMn70W//AiT3GZA0AjH79/fr/Un0FAPWGHsAFBQZEjjr+wfgFxRSYef37wA0Ae2X9+LA/wP/AOwbFc6Uzw8DCwA4AvqYFsTTAS8DAKMIAg+GHgkEGAI1qDEaOAgEAryvCygCK+hJU//83wDtFFU5VuvT+Lv86wfiO/MFBwW4ExSjGevr/EABVwD87+GXB/sEvwgXFIsRz/18KABvFloZzsfoRAPTGnqxix8V+fBQAOqsoOMZ9R8D/Pv5W0gA8hqP+/PcoRDs7VbFF/wkAZ8rD//mySv8FAM3Q2UACTh3RRmYFAcbRL7XF/gYAydTl/0JDAa7YIkc+Bf7DjP4LAJrpJ/7+xbP8wv0FAF8uYsJ/BQBn7TQh0QAvoc0e/v/+/QX8+Qg5bRMAL+8S/Maw+v//+/79O//Hsf/B/MELAKfwUYxa/oz9BQC5+0CPOwgAgfs6Oz53RwGf+zTAQP0KBi39TMBX/8AH/g5Om/w9wjZAxgAdsUjD',1,0,'victor.huete','',NULL,'0'),(86,'7','5082087-4','Ricardo Morales',1,6,1,'',1,'TCFTUzIxAAAFYmAECAUHCc7QAAAdY2kBAAAAhY86gmI2AKIPagCLABlt8wBjAKkPBwB2YqgPswB8AGYPT2KXAIkPBAFcAK9tkgCdAC8PewC1Yi8PMACyAJgOCWO1AKwPLQB4AEBsNQDKADQOqADJYkAPoQDWAPcPvWLYALAPLwAZAERsegDfADoP+QDkYrQO/gDhAGsPE2LmADgOZwAzADht7QD4ADEP7gADY0UOWgAGAYIO+WIOAbENQADUATlv5QAWAa0PkAAeY8cNiQAgAWoO9GIjAa4OWQDiAURuxwArASMOhgA0Y7wMEQA6AfMO22I/ASYO/gD6AbFvbwBAASkLSQBDY5sN6gBHAWcNI2JJAcMMwwCNATdvNABKAbkLdABPYz4MDAFKAQAOOmJNAT8LqACIAa1ubABQAbsMpQBSYy4KsgBXAXgMwWJWATIN6gCSAbNvVwBYAT0LwAFdY8kOEwBZAfQNSWJYAUYLJACeAUxvkwBcAYcPg4kOYQL7Sn23l7p7SmMOAksLQQgKAR4dyPw/dBd1ky5WJkpWDQOLAt7/Nu5mAIv/moIiAKqebRtdKgLWTAcmYip/BOtpEL8E/JKY9QXaZQpDB05zVIbG+isEkIKf5OqDUYwNDXQL6Jin/D4KXXS4gkMcLH8X/KME/Pt3l0OGofkiBFN6fOEsh5qEUQojDQvwFA2FgqkP4AZAZHiDWXrZ+vD39GPI/p587IdAgkjsDxYui09wtAGsnAP89H+thqMYpJF7/EZ5sX7Mg6SZZHaKBHbusISMEcz36fE9FsTvnBKs/2KQHRY093cSeHwh7NHyAAwEH1SOjQDJ9XR21R1M+ClytJpFhzhvEPxZEUIlDYtkm8h+zGr57IQjNO6IlDmCzPf4dMiLgYNlFMWNyADUF+j2jRTN87yTRXHB+zWGjQSoFzx1VOgxcg78/QvYazgZvRj9idyStIzg4/bMrKhygVUh1AAgQwECQR8RaAHcAylCwZ/7CWLMBSdCWP4BLQxiswctwv5ztgQFnggwbg4Ao88n+qPB/3tKXgjFxA5JZGsGAPAL9GnFcQGGDCTBQ5HAxDTD/lcQAJbKIkEGVHBBCgB+1SloNDkJAHgbHjr+fjYTAG8tGsA6VFY7/8P+SgkAoTQfoCrBQhgAYoQWSqJXN1L//8I6/fufxf8VAElHw/w7OUXA/G/A/7IPBSJPCSv+wFP7TRZibFAcwErA88P4AF76CQA5V8b7Ui4YADVeCf6FwPpJwf9SZ8HAO8LEngcA9Gcp/wVKE2IuaQn//zU7/zuiWcLAwlcZxR9zmCbA/v8xwTjD+6P+w4X//VHNAMMVJf57dAwA3oH/n/79Qf/9ZcMATfCRwsLCxQTFGJKVKgUATpocO8D+ZAGXny1Xw9cAl8M2w07+wVpG/v5LDwAgr/D7OPv5nf/+wcH/wzgFBUm1YJIKAMBxMMWh/X/6xA0A2bdboKE+wV8JAPS5Cpn6/cH/wMLKAALc2//A+f3/Ofz7ov3//sQEAOzASQoCAGnPQ8HPAHWtO0PDwsNqwwEBsjzD//3/C8Wh3lLBwG/BwcA4CQXY3CtFif0DxSzaJMMEADHfN/oFBRvjQMGFCgC64j+j/sOG/voLxT3gWPxxwf79g88AFog7/mXFwP06BgV66zf+/1kGxSH2Xzb/BwBj+YbCxqCPBABp+T0HwwBi7vw0wFoF1SkMK8NOBRAuCfj8l2YQERlDWQbVSCVf/2AIEGEg+P/EpsnC/wMQZ+0rxGYRVitJxP/BEF5JQXUFEMgw58D5oAIQhzMewsYQAVk7wQMQL0P//wZyxkopwQMQvE4DnAUQb2EDZQ==',1,0,'ricardo.morales','',NULL,'0'),(87,'8','19061109-4','Nicolas Araguiz',1,6,1,'',1,'SrNTUzIxAAAD8PUECAUHCc7QAAAb8WkBAAAAgx0mivBUAIcPnQCtABH/eAB1AAsOSQB48IoO1QCLANsPPfCSAGwPygBWAJr/hQCXAA0PawCZ8JAPTQCgADgPcvCjAIAPlgAGACr/UgDFAF8PoQDG8GAPdwDWAPwPIfDWAN0OYgASAEz/FQDYAFAOBwDl8DwPdgABAYsPmvACAUoP5ADPAcP97QAKAc0NLgAW8T4NKAAdARkPzfAhATkO2gDkAUH98wAhAcEMPwAo8UMN1QAuAXoOwvA1AUEP4ACHAT/9dgBMAdkPNABM8TEOpgBQAZoOtvBRAVEO5wCXAbj9wgBYAUUN3HdNjTf+zYoNjycKgnGrAUqFgYEQekJzyITWj/sP9HEgHUYOzXxdC06L3n5AhyoF5fsnd3V3IJGGfb6hKHaFdVMhwvEvmM4cIvBEEt5loQSgFT7axO3l2jIR5IyUcaaT9fExGRDyLoQm82d3Z31u9WCCNwX2F+MAf/0c/d4SwPbog9SCN/75k+kOBHctg25wYgNbj5uTift2jKD6wAuNhOAF53NohHX25IMgB83xkHxxiDWB8IUa+pPwdYBhDTR+rIyqi2uPxHco9R0BIBAuHAIidPRG/AMQuI91gId50gTL6PoFh6rmth/QNAECBRsRxgBz0w3ACQBEJsNT/DBsBQCvPRCHAwO5LHfABQCn9RDDuxAAGUD3WjoxXw5h/xEAHEoyWP0w/MFF/lf/zACGoY3Bd8FqCcWNVfxhQP8JAIWSg3GEwQwAmWaMQMNZMHkGAKFmEAU+BPChbBfAPMHPAH6BDT5K/v8JxXV3c8P/d2AQANV796NF/8AqwUfMAItkCDs7wAsARZWKcsBtjQYAOlNr/H4PAKqXk4Cng3L9AYiaE0//Ov81DMIRAFGc9zv8wsXBKzFUFQDHoeHFRz7/wDHAOv849gFJom14ws8AkU+bm4mLDAClw2ozwcQ/PMASxWjA8/r9/f7A/Dr/RTArwQ8AmsPl/v3bQTtCCgBQA2LCMmU7DwCWx+5B/TD+/kD/MwjFYcquhMI2GAAhFsn6MP4pLj78wDn/wzAuwBEAZdMi9P4LQTHA/v84ygB7KDbA/cH9/zv+w7BdCwBd2VOt/yzNAgAQ2lPAwQAVK01CBQAh24pUDvBi20n/Rv77wPwxCQDC6zo48gMDBPxDwAwQdcNM/TD/QFPABhBcB0oPRwQQ6yQ9mh0T9B3nw37//vH//Az8/f7+wP0E/v4w/v7//sAD1AchzcIDEMolQwcEEzI2Q8H8AxHBPDkNAhDcRkPCxhCioF/BDhACWhv8w4CFecAPAHIePTAP/8A7wv5y',1,0,'nicolas.aranguiz','',NULL,'0'),(88,'10','13149964-7','Victor Salas',1,6,1,'',1,'Tw1TUzIxAAAGTkwECAUHCc7QAAAeT2kBAAAAhvNTxk4qALMPhQDyADhBXgBIAFQPuABPTkYPawBfAJQPgU5rADwPewCpAENBvQBzALcPqQB4TlUPMACkACwPFE6sAPQPbABoAPRAXAC0AO8OSQCyTqUPxAC1AGoPqU66AKMPMgB6APRBBQG/AMEPTwDOTo0ORgDLAD0NA0/MADgOlgAXACFA7ADXAMcPBgDfTrcOSgDeALALgE7fAC8OKgAlABtFDgHiALkP3wDlTiwNTQDjAJgL/E7iAMYOOQAhAPBEyQDkAMIOiAD0TqMLogD3AIEPYE75ADsLigA8AMRADQH6ALwPMQD9TjgOKwD/AHMNak4FAcIMVwDAAb9DdQALAccLIgANT7gLigANAYcOok4QAUIOzgDUATpC7gASATUM6gART7sO4QAXAewLaE4YAVAMHADeAapDVgAgAboNLgAmT7cMKQAjAfEOdU4lAUAMPQDjATxACQErAaoMiQArT7cLUwAtAY8Lzk4vATgMeADyAbtDQwA5AbcIAQA7T8ENYgBBAfoMeE5DAUUNjgCHAbhAzABCATQMywFCT74MnQBFAf8OQE5JAcMINQCMAThGcwBKAT4NlgBLT8gK8gBNAWIOr05PATgMKQCKAVFGzQBRATAM9wBRT1II/gBXAX8OlU5ZAUEOYwCZAbhDrABdAbMNgncVsT5vlfmy717sX0kvDB4bDQlQ+7i6TA3d/w0PefvQoq/pNAvZ9VzyVTBOdwcLCRIrBBBX1PsO9MbzRwykS8rK/QSaUGtqh7Lz+Ar/IRnXfGD6RA4W+Q/sFPZEM2cBpf5NCx/V+8Yj/PYJEWR86TsQwIUhCr2ewHhzzJx29ZzB+cuE30+ok5oI+PdLCXBbNRp9gcV9/Akf6IxvbSjd8GdoQ7t0gg3+TRCTOHg2zeplvKFpnAG/Q4ySFdh9gUyZakGz/i6DoURcLQunuIZ5B54EsXuvy2x2AYG9gryXQ8iIBmn7pYFUBkMwBP6ewIqYGf9qxTwJrYHF+bAZXkkIeL2G5IfZk6PPAIHBfkUDOAPDTd+BURU9h0sE7jGYgL0MGIv4Ee/PLXN0d0n0pRMHxuyR7XjN9W/4Ez4kBL1uaI9QgIOzIX/liFX9NfNzywB6WYR9hQgJC6Fn9Hp1zG7sAFsyuZYFkJ2VUHiHSxP88Ht5fdSBB7qkAIF91I9IiPfcWAGleTGGLYujRjyIzYRFeDx+5jmQBAX9HQa8FzNVYATRfJn5CPxzQjyEsOuN7IR8K7bYARGBSQhYjdNA9OzN61Z6IAB7yrj6SAcYG+eUE7IAcsJ8zP8wFBPcZBSl/pIT0An/yCwKYfahgkSDgzJUd3V7gzRu8lntdvrFXgIghgEEDxnICABjAKyDxi4NAHgAdMIGc8eO/G8KAJAA5/35scBF/woAmcUkLY5LwBEAhAHS+sYNwf/BcP/CPv8CTqwCLUQDAHECK7EIALwCKSuZ/g1OqQYwWMD/OsDGjQYAygo0wAQ6AE7VDDFM/w3FdSQqwsL9aMA7BQ8GNShAL8H/NTj/xnwGAMIvN8E6WwtObzJTw//9ilRGQQGEMrfEzAN++XA9DQB0M0k6wPiOPWD9DgCD/0NuOcLBw8H/+8MAvpo2Z/0MAIj/Olwhcf0KAF5MlkFJGwoAfU9JwTjDKLA7BwBrY1D9/flVAQ9t6cLBmsBHsP34/f1Kaq9WAU6GcDrAw8KvBgY1ckbA/cD93gABMux+wmbA/jr8/7f//sH//8M6wcePVgoAa4RTOv37GT4EAHmWRgLEBU8AmUPCAwHMm0WPBwEOmzr/OZ8CTli2ccD/B8VhsLQgxPsGAOh/TMKKNAQA+7hDOMQCTi/AfUoFAdDCPLN0BgBJxvDv/wJOQ8yAwMEGxUrLtEDBAwEE0//CAE5O14BWxQXF1OdzwkQFAJnrjP3AsQUAGucwWsMA/akxwMP8/wXFFPZ/wWwDEJkMhf4FXphEQ8IFAP36PI7C/wUQuwj//ohKAWP8Q08Exfj4fsL9BRARFeL9x7IHEM8VPZ84BBbMPTcrBRDg3j3DjPoHEFMctAXF38YEEOwkMMQ//wVeJic3wAMQdzAyjQUQbzVJmMERA3s8MAQQqzj1JQJeeTtGxvsE1c5PacPA',1,0,'victor.salas','',NULL,'0');
/*!40000 ALTER TABLE `temployee` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tfile`
--

DROP TABLE IF EXISTS `tfile`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tfile` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cFileName` varchar(255) NOT NULL COMMENT 'Nombre del archivo, es el identificador',
  `cDateTime` date NOT NULL COMMENT 'Fecha de creacion',
  `cSize` bigint(20) DEFAULT NULL COMMENT 'Tamano del archivo',
  PRIMARY KEY (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tfile`
--

LOCK TABLES `tfile` WRITE;
/*!40000 ALTER TABLE `tfile` DISABLE KEYS */;
/*!40000 ALTER TABLE `tfile` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tfilecontent`
--

DROP TABLE IF EXISTS `tfilecontent`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tfilecontent` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cFile` bigint(20) NOT NULL COMMENT 'relacion con la tabla tFile',
  `cLine` text COMMENT 'Es una fila del archivo',
  `cOrder` int(11) NOT NULL COMMENT 'Orden de la fila dentro del archivo',
  PRIMARY KEY (`cId`),
  KEY `FileContent_index_File` (`cFile`),
  CONSTRAINT `FileContentToFile` FOREIGN KEY (`cFile`) REFERENCES `tfile` (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tfilecontent`
--

LOCK TABLES `tfilecontent` WRITE;
/*!40000 ALTER TABLE `tfilecontent` DISABLE KEYS */;
/*!40000 ALTER TABLE `tfilecontent` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tfiscaldate`
--

DROP TABLE IF EXISTS `tfiscaldate`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tfiscaldate` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cDate` date NOT NULL,
  `cReason` varchar(50) DEFAULT '',
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cDate` (`cDate`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tfiscaldate`
--

LOCK TABLES `tfiscaldate` WRITE;
/*!40000 ALTER TABLE `tfiscaldate` DISABLE KEYS */;
INSERT INTO `tfiscaldate` VALUES (10,'2014-01-01','A√±o Nuevo'),(11,'2014-04-18','Viernes Santo'),(12,'2014-04-19','S√°bado Santo'),(13,'2014-05-01','D√≠a Nacional del Trabajo'),(14,'2014-05-21','D√≠a de las Glorias Navales'),(15,'2014-06-29','San Pedro y San Pablo'),(16,'2014-07-16','D√≠a de la Virgen del Carmen'),(17,'2014-08-15','Asunci√≥n de la Virgen'),(18,'2014-09-18','Independencia Nacional'),(19,'2014-09-19','D√≠a de las Glorias del Ej√©rcito'),(20,'2014-10-12','Encuentro de Dos Mundos'),(21,'2014-10-31','D√≠a de las Iglesias Evang√©licas y Protestantes'),(22,'2014-11-01','D√≠a de Todos los Santos'),(23,'2014-12-08','Inmaculada Concepci√≥n'),(24,'2014-12-25','Navidad'),(25,'2015-01-01','A√±o Nuevo');
/*!40000 ALTER TABLE `tfiscaldate` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tgroup`
--

DROP TABLE IF EXISTS `tgroup`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tgroup` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(10) NOT NULL,
  `cName` varchar(50) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tgroup`
--

LOCK TABLES `tgroup` WRITE;
/*!40000 ALTER TABLE `tgroup` DISABLE KEYS */;
INSERT INTO `tgroup` VALUES (1,'MAIN','Principal');
/*!40000 ALTER TABLE `tgroup` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tlicense`
--

DROP TABLE IF EXISTS `tlicense`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tlicense` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cEmployee` bigint(20) NOT NULL COMMENT 'Identificador del empleado quien tiene las horas extras',
  `cStartDate` date NOT NULL COMMENT 'D√≠a del per√≠odo de comienzo de licencia',
  `cEndDate` date NOT NULL COMMENT 'D√≠a del per√≠odo de t√©rmino de licencia',
  `cLicenseCause` bigint(20) NOT NULL COMMENT 'Razon de la aucencia',
  `cDocument` varchar(15) DEFAULT NULL COMMENT 'Numero de documento',
  PRIMARY KEY (`cId`),
  KEY `License_index_LicenseCause` (`cLicenseCause`),
  KEY `License_index_Employee` (`cEmployee`),
  CONSTRAINT `LicenseToEmployee` FOREIGN KEY (`cEmployee`) REFERENCES `temployee` (`cId`),
  CONSTRAINT `LicenseToLicenseCause` FOREIGN KEY (`cLicenseCause`) REFERENCES `tlicensecause` (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tlicense`
--

LOCK TABLES `tlicense` WRITE;
/*!40000 ALTER TABLE `tlicense` DISABLE KEYS */;
/*!40000 ALTER TABLE `tlicense` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tlicensecause`
--

DROP TABLE IF EXISTS `tlicensecause`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tlicensecause` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cName` varchar(30) NOT NULL COMMENT 'Descripci√≥n de la causa',
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cId` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tlicensecause`
--

LOCK TABLES `tlicensecause` WRITE;
/*!40000 ALTER TABLE `tlicensecause` DISABLE KEYS */;
INSERT INTO `tlicensecause` VALUES (1,'Vacaciones'),(2,'1.0'),(3,'D√≠a Compensatorio'),(4,'Ma√±ana Administrativa'),(5,'Tarde Familiar'),(6,'Fallecimiento'),(7,'Matrimonio'),(8,'Nacimiento'),(9,'Otros');
/*!40000 ALTER TABLE `tlicensecause` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tmachine`
--

DROP TABLE IF EXISTS `tmachine`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmachine` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cName` varchar(50) NOT NULL DEFAULT '',
  `cIP` varchar(30) NOT NULL,
  `cPort` int(11) NOT NULL,
  `cLastAccess` timestamp NULL DEFAULT NULL,
  `cSerial` varchar(20) DEFAULT NULL COMMENT 'Numero de Serie',
  `cGroup` bigint(20) NOT NULL,
  PRIMARY KEY (`cId`),
  KEY `machine_index_group` (`cGroup`),
  CONSTRAINT `MachineToGroup` FOREIGN KEY (`cGroup`) REFERENCES `tgroup` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tmachine`
--

LOCK TABLES `tmachine` WRITE;
/*!40000 ALTER TABLE `tmachine` DISABLE KEYS */;
INSERT INTO `tmachine` VALUES (6,'Ossa1000','200.28.182.83',4370,'2015-08-28 01:14:49','0695140700270',1);
/*!40000 ALTER TABLE `tmachine` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tmarktype`
--

DROP TABLE IF EXISTS `tmarktype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmarktype` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(1) NOT NULL,
  `cName` varchar(20) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tmarktype`
--

LOCK TABLES `tmarktype` WRITE;
/*!40000 ALTER TABLE `tmarktype` DISABLE KEYS */;
INSERT INTO `tmarktype` VALUES (1,'0','Entrada'),(2,'2','Colaci√≥n'),(3,'3','Vuelta'),(4,'1','Salida'),(5,'4','Otra entrada'),(6,'5','Otra salida');
/*!40000 ALTER TABLE `tmarktype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `toption`
--

DROP TABLE IF EXISTS `toption`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `toption` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(20) NOT NULL,
  `cLabel` varchar(50) NOT NULL,
  `cUrl` varchar(100) DEFAULT NULL,
  `cParent` bigint(20) DEFAULT NULL,
  `cType` bigint(20) NOT NULL DEFAULT '1',
  `cOrder` int(11) NOT NULL DEFAULT '0',
  `cEnable` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `toption`
--

LOCK TABLES `toption` WRITE;
/*!40000 ALTER TABLE `toption` DISABLE KEYS */;
INSERT INTO `toption` VALUES (1,'SYSTEM','Sistema',NULL,NULL,1,1,''),(2,'USER','Usuarios','/servlet/system/user/UserManager',1,1,1,''),(3,'ALLOW','Permisos de roles','/servlet/system/roleDef/RoleDef',1,1,3,''),(4,'CH_PASS','Cambio de clave','/servlet/system/changepassword/SearchPassword',1,1,4,''),(5,'ROL','Roles','/servlet/system/role/RolManager',1,1,2,''),(6,'PARAMS','Par√°metros','/servlet/config/systemparams/ParameterManager',1,1,5,''),(7,'CONFIG','Configuraci√≥n del Sistema',NULL,NULL,1,2,''),(8,'EMPLOYEE','Empleados','/servlet/config/employee/EmployeeManager',7,1,1,''),(9,'TABLES','Tablas',NULL,7,1,2,''),(10,'POST','Cargos','/servlet/config/employee/PostManager',9,1,1,''),(11,'AREA','Areas','/servlet/config/employee/AreaManager',9,1,2,''),(12,'TURN','Config. Turnos','/servlet/timectrl/turns/TurnManager',9,1,3,''),(13,'FISCAL_DATE','Feriados','/servlet/timectrl/fiscalDate/FiscalDateManager',9,1,4,''),(14,'MACHINE','Relojes','/servlet/timectrl/machine/MachineManager',9,1,5,''),(15,'LICENSE_CAUSE','Permisos y licencias','/servlet/timectrl/licenseCause/LicenseCauseManager',9,1,6,''),(16,'REPORT','Consultas y Reportes',NULL,NULL,1,3,''),(17,'FILES','Archivos','/servlet/timectrl/files/FilesManager',16,1,1,'\0'),(18,'SUMMARY','Resumenes','/servlet/timectrl/report/Summary',16,1,2,'\0'),(19,'DETAIL','Detalles',NULL,16,1,3,'\0'),(20,'REP_ASIST','Reporte de Asistencia','/servlet/timectrl/report/execute/ReadParameters?reportId=1',16,1,4,''),(21,'REP_WEEKLY','Reporte por Semana','/servlet/timectrl/report/execute/ReadParameters?reportId=7',16,1,5,''),(22,'REP_PLAIN','Reporte Completo (xls)','/servlet/timectrl/report/execute/ReadParameters?reportId=5',16,1,6,''),(23,'REP_LATE','Reporte Atrasos','/servlet/timectrl/report/execute/ReadParameters?reportId=8',16,1,7,''),(24,'REP_ABSENCE','Reporte Inasistencias','/servlet/timectrl/report/execute/ReadParameters?reportId=6',16,1,8,''),(25,'REP_CONFIG','Configuraci√≥n reportes',NULL,16,1,8,''),(26,'REP_CFG_OUT_TYPE','Tipos de reportes','/servlet/timectrl/report/config/ReportTypeManager',25,1,3,'\0'),(28,'REP_LIST','Lista de Reportes','/servlet/timectrl/report/config/ReportManager',25,1,1,''),(29,'EXECUTE_REPORT','Ejecuci√≥n de reportes','/servlet/timectrl/report/execute/ExecutionReport',16,1,10,''),(30,'GROUP_MGR','Grupos','/servlet/timectrl/group/GroupManager',9,1,7,''),(31,'DOMAIN_MGR','Dominios','/servlet/system/DomainManager',1,1,6,''),(32,'DOMAIN_ATTR_MGR','Atributos de Dominios','/servlet/system/DomainAttributeManager',1,1,7,'');
/*!40000 ALTER TABLE `toption` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tparameter`
--

DROP TABLE IF EXISTS `tparameter`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tparameter` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(20) NOT NULL,
  `cLabel` varchar(100) NOT NULL,
  `cValue` varchar(300) NOT NULL,
  `cDataType` bigint(20) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cId` (`cId`),
  UNIQUE KEY `cKey` (`cKey`),
  KEY `Parameter_index` (`cDataType`),
  CONSTRAINT `ParameterToDataType` FOREIGN KEY (`cDataType`) REFERENCES `tdatatype` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tparameter`
--

LOCK TABLES `tparameter` WRITE;
/*!40000 ALTER TABLE `tparameter` DISABLE KEYS */;
INSERT INTO `tparameter` VALUES (1,'FORMAT_DATE','Formato de Fecha','dd-MM-yyyy',1),(2,'FORMAT_DATETIME','Formado de fecha/hora','dd-MM-yyyy HH:mm:ss',1),(3,'LOCALE','Regi√≥n, afecta a formato de n&uacute;meros(ISO-639)','ES',1),(4,'PATTERN_INTEGER','Formato para montos enteros','###.###.##0',1),(5,'PATTERN_DECIMAL','Formato para montos con decimales','###.###.##0,00###',1),(6,'CSV_SEPARATOR','Separador de archivos csv',';',1),(7,'RECORDS_PER_PAGE','Registros por p√°gina','20',3),(8,'EMPLOYEE_FILES','Ubicaci&oacute;n de archivos de empleados (en server)','D:\\temp\\remcon',1),(9,'EMULATE','Simula interfaz de reloj control','false',5),(10,'ATTENDANCE_REPORT','Archivo de reporte de asistencia','D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report\\Enlasa\\rpt_AsistenciaPDF_v2.jasper',1),(11,'WEEKLY_REPORT','Archivo de reporte de asistencia, semanal','D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report\\weekly-main.jasper',1),(13,'LATE_REPORT','Archivo de reporte para retrasados','D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\sql\\timecontrol\\rpt_RSA_Atrasos_Tabla.jasper',1),(14,'OUTPUT_LATE_NAME','Archivo del reporte de retrazo','Reporte_de_atrazados.pdf',1),(15,'OUTPUT_REPORT','Carpeta donde va a dejar los archivos de reporte','D:\\ReportesAsistencia',1),(16,'ABSENCE_REPORT','Archivo de reporte para inasistencias','D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\sql\\timecontrol\\Inasistencas.jasper',1),(17,'OUTPUT_ABSENCE_NAME','Archivo de inasistencias','Reporte_de_inasistencias.pdf',1),(19,'RANGE_MARK','Rango para administracion de marcas','7',3),(20,'AREA_FILTER','Indica si se filtran los empleados por area','false',5),(34,'INFER_TIME1','Horario 1 de inferencia de turno rotativo','00:00:00',1),(35,'INFER_TIME2','Horario 2 de finferencia de turno rotativo','08:00:00',1),(36,'INFER_TIME3','Horario 3 de dinferencia de turno rotativo','16:00:00',1),(37,'INFER_TIME4','Horario 4 de dinferencia de turno rotativo','20:00:00',1),(38,'TOLERANCE_INFERENCE','Tolerancia Horario diferido (minutos)','240',3),(39,'HOURS_WORKDAY','Horas m√°xima de la jornada laboral','15',3),(40,'EMPLOYEE_ORDER','Campo con el que se ordenan los empleados. default \"CAST(tEmployee.cKey AS UNSIGNED)\"','cRut',1),(41,'JASPER_FOLDER','Carpeta donde destan los archivos jasper','d:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report',1),(42,'BOOTSTRAP','Uso de interfaz bootstrap en las pantallas que estan habilitadas para esto','true',5);
/*!40000 ALTER TABLE `tparameter` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tpost`
--

DROP TABLE IF EXISTS `tpost`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tpost` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(10) NOT NULL DEFAULT '',
  `cName` varchar(60) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tpost`
--

LOCK TABLES `tpost` WRITE;
/*!40000 ALTER TABLE `tpost` DISABLE KEYS */;
INSERT INTO `tpost` VALUES (1,'100','Administrativo'),(2,'200','Operador'),(3,'110','Administrativo Diego');
/*!40000 ALTER TABLE `tpost` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tprivilege`
--

DROP TABLE IF EXISTS `tprivilege`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tprivilege` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` int(11) NOT NULL,
  `cName` varchar(20) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tprivilege`
--

LOCK TABLES `tprivilege` WRITE;
/*!40000 ALTER TABLE `tprivilege` DISABLE KEYS */;
INSERT INTO `tprivilege` VALUES (1,0,'Usuario com√∫n'),(2,1,'Enrolador'),(3,2,'Administrador'),(4,3,'Super administrador');
/*!40000 ALTER TABLE `tprivilege` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tr_employeeturn`
--

DROP TABLE IF EXISTS `tr_employeeturn`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tr_employeeturn` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cEmployee` bigint(20) NOT NULL,
  `cTurn` bigint(20) NOT NULL,
  `cStartDate` date DEFAULT NULL,
  `cEndDate` date DEFAULT NULL,
  PRIMARY KEY (`cId`),
  KEY `R_EmployeeTurn_index_Employee` (`cEmployee`),
  KEY `R_EmployeeTurn_index_Turn` (`cTurn`),
  CONSTRAINT `R_EmployeeTurn_To_Employee` FOREIGN KEY (`cEmployee`) REFERENCES `temployee` (`cId`),
  CONSTRAINT `R_EmployeeTurn_To_Turn` FOREIGN KEY (`cTurn`) REFERENCES `tturn` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=127 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tr_employeeturn`
--

LOCK TABLES `tr_employeeturn` WRITE;
/*!40000 ALTER TABLE `tr_employeeturn` DISABLE KEYS */;
INSERT INTO `tr_employeeturn` VALUES (117,81,9,'2015-06-01','2015-06-30'),(118,85,9,'2015-04-06','2050-04-01'),(119,82,9,'2015-05-04','2050-04-01'),(120,84,9,'2015-05-04','2050-04-01'),(121,86,9,'2015-05-04','2050-04-01'),(122,88,11,'2015-05-04','2050-04-01'),(123,84,13,'2015-05-04','2050-04-01'),(124,85,12,'2015-05-04','2050-04-01'),(125,84,14,'2015-05-04','2050-04-01'),(126,87,14,'2015-05-04','2050-05-04');
/*!40000 ALTER TABLE `tr_employeeturn` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tr_reportpropertytype_reporttype`
--

DROP TABLE IF EXISTS `tr_reportpropertytype_reporttype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tr_reportpropertytype_reporttype` (
  `cReportType` bigint(20) NOT NULL,
  `cReportPropertyType` bigint(20) NOT NULL,
  PRIMARY KEY (`cReportType`,`cReportPropertyType`),
  KEY `index_ReportType` (`cReportType`),
  KEY `index_ReportPropertyType` (`cReportPropertyType`),
  CONSTRAINT `r_ToReportPropertyType` FOREIGN KEY (`cReportPropertyType`) REFERENCES `treportpropertytype` (`cId`),
  CONSTRAINT `r_ToReportType` FOREIGN KEY (`cReportType`) REFERENCES `treporttype` (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tr_reportpropertytype_reporttype`
--

LOCK TABLES `tr_reportpropertytype_reporttype` WRITE;
/*!40000 ALTER TABLE `tr_reportpropertytype_reporttype` DISABLE KEYS */;
INSERT INTO `tr_reportpropertytype_reporttype` VALUES (1,1),(1,2),(1,4),(1,5),(1,8),(4,1),(4,4),(4,9),(4,10),(4,11),(4,12),(4,13),(4,14),(4,15),(9,16),(9,17),(9,18),(9,19),(9,20),(9,21),(9,22),(9,23),(9,24),(9,25),(9,26),(10,1),(10,4),(10,9),(10,10),(10,11),(10,12),(10,13),(10,14),(10,15),(10,27),(10,28),(10,29);
/*!40000 ALTER TABLE `tr_reportpropertytype_reporttype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tr_roloption`
--

DROP TABLE IF EXISTS `tr_roloption`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tr_roloption` (
  `cRol` bigint(20) NOT NULL,
  `cOption` bigint(20) NOT NULL,
  PRIMARY KEY (`cRol`,`cOption`),
  KEY `index_rol` (`cRol`),
  KEY `index_option` (`cOption`),
  CONSTRAINT `RolOption_To_Option` FOREIGN KEY (`cOption`) REFERENCES `toption` (`cId`),
  CONSTRAINT `RolOption_To_Rol` FOREIGN KEY (`cRol`) REFERENCES `trol` (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tr_roloption`
--

LOCK TABLES `tr_roloption` WRITE;
/*!40000 ALTER TABLE `tr_roloption` DISABLE KEYS */;
INSERT INTO `tr_roloption` VALUES (1,1),(1,2),(1,3),(1,4),(1,5),(1,6),(1,7),(1,8),(1,9),(1,10),(1,11),(1,12),(1,13),(1,14),(1,15),(1,16),(1,20),(1,21),(1,22),(1,23),(1,24),(1,25),(1,28),(1,29),(1,30),(1,31),(1,32),(2,7),(2,8),(2,9),(2,10),(2,11),(2,12),(2,13),(2,14),(2,15),(2,16),(2,20);
/*!40000 ALTER TABLE `tr_roloption` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tr_userrol`
--

DROP TABLE IF EXISTS `tr_userrol`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tr_userrol` (
  `cUser` bigint(20) NOT NULL,
  `cRol` bigint(20) NOT NULL,
  PRIMARY KEY (`cUser`,`cRol`),
  KEY `index_rol` (`cRol`),
  KEY `index_user` (`cUser`),
  CONSTRAINT `r_UserRolToRol` FOREIGN KEY (`cRol`) REFERENCES `trol` (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tr_userrol`
--

LOCK TABLES `tr_userrol` WRITE;
/*!40000 ALTER TABLE `tr_userrol` DISABLE KEYS */;
INSERT INTO `tr_userrol` VALUES (1,1),(2,2),(3,2),(4,2);
/*!40000 ALTER TABLE `tr_userrol` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treport`
--

DROP TABLE IF EXISTS `treport`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treport` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(20) NOT NULL,
  `cName` varchar(50) NOT NULL,
  `cType` bigint(20) NOT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`),
  KEY `Report_index_ReportOutType` (`cType`),
  CONSTRAINT `Report_To_ReportOutType` FOREIGN KEY (`cType`) REFERENCES `treporttype` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treport`
--

LOCK TABLES `treport` WRITE;
/*!40000 ALTER TABLE `treport` DISABLE KEYS */;
INSERT INTO `treport` VALUES (1,'1','Reporte de asistencia',1),(5,'PLAIN_EXCEL','Reporte Completo (xls)',4),(6,'ABSENCE','Reporte Inasistencias',4),(7,'WEEKLY','Reporte por Semanas',1),(8,'LATER','Reporte Atrasos',4),(9,'Ossa_Correo','Ossa_Correo',9);
/*!40000 ALTER TABLE `treport` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treportinparam`
--

DROP TABLE IF EXISTS `treportinparam`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treportinparam` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cReport` bigint(20) NOT NULL,
  `cName` varchar(20) NOT NULL,
  `cLabel` varchar(50) NOT NULL,
  `cType` bigint(20) NOT NULL,
  `cOrder` int(11) DEFAULT NULL,
  PRIMARY KEY (`cId`),
  KEY `ReportParam_index_Report` (`cReport`),
  KEY `ReportParam_index_Type` (`cType`),
  CONSTRAINT `ReportParam_To_Report` FOREIGN KEY (`cReport`) REFERENCES `treport` (`cId`),
  CONSTRAINT `ReportParam_To_ReportParamType` FOREIGN KEY (`cType`) REFERENCES `treportparamtype` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treportinparam`
--

LOCK TABLES `treportinparam` WRITE;
/*!40000 ALTER TABLE `treportinparam` DISABLE KEYS */;
INSERT INTO `treportinparam` VALUES (1,1,'Employee','Empleado',1,1),(2,1,'StartDate','StartDate',2,2),(3,1,'EndDate','EndDate',2,3),(9,5,'StartDate','StartDate',2,1),(10,5,'EndDate','EndDate',2,2),(12,6,'absenceDate','absenceDate',2,1),(14,7,'EmployeeId','EmployeeId',1,1),(15,7,'Month','Month',4,2),(16,7,'Year','Year',14,3),(17,8,'StartDate','StartDate',2,1),(18,8,'EndDate','EndDate',2,2),(19,9,'StartDate','StartDate',2,1),(20,9,'EndDate','EndDate',2,2);
/*!40000 ALTER TABLE `treportinparam` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treportparamtype`
--

DROP TABLE IF EXISTS `treportparamtype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treportparamtype` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(20) NOT NULL,
  `cName` varchar(20) NOT NULL,
  `cHTMLFile` varchar(50) NOT NULL,
  `cSource` varchar(20) DEFAULT NULL,
  `cJavaType` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treportparamtype`
--

LOCK TABLES `treportparamtype` WRITE;
/*!40000 ALTER TABLE `treportparamtype` DISABLE KEYS */;
INSERT INTO `treportparamtype` VALUES (1,'EMPLOYEE_LIST','Lista de empleados','EmployeeList.jsp','pListEmployee','LONG'),(2,'DATE','Ingreso de fecha','InputDate.jsp','','DATE'),(3,'SP','Store Procedure','',NULL,NULL),(4,'MONTH','Meses','Month.jsp',NULL,'INTEGER'),(14,'YEAR','A√±o','Year.jsp',NULL,'INTEGER'),(15,'BOSS_LIST','Listado de jefes','EmployeeList.jsp','pListBoss','LONG');
/*!40000 ALTER TABLE `treportparamtype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treportproperty`
--

DROP TABLE IF EXISTS `treportproperty`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treportproperty` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cPropertyType` bigint(20) NOT NULL,
  `cReport` bigint(20) NOT NULL,
  `cValue` varchar(255) NOT NULL,
  PRIMARY KEY (`cId`),
  KEY `reportProperty_index_reportPropertyType` (`cPropertyType`),
  KEY `reportProperty_index_Report` (`cReport`),
  CONSTRAINT `ReportPropertyToReport` FOREIGN KEY (`cReport`) REFERENCES `treport` (`cId`),
  CONSTRAINT `ReportPropertyToReportPropertyType` FOREIGN KEY (`cPropertyType`) REFERENCES `treportpropertytype` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=68 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treportproperty`
--

LOCK TABLES `treportproperty` WRITE;
/*!40000 ALTER TABLE `treportproperty` DISABLE KEYS */;
INSERT INTO `treportproperty` VALUES (1,1,1,'r-{Date}_{Year}_{Month}_{EmployeeKey}_{EmployeeRut}.pdf'),(2,2,1,'pdf'),(13,1,5,'MarcasPlain_{Date}.xlsx'),(14,4,5,'D:\\ReportesAsistencia'),(15,1,6,'Inasistencias_{Date}.xls'),(16,4,6,'D:\\ReportesAsistencia'),(17,1,7,'Semanal-{Date}_{Year}_{Month}_{EmployeeKey}.pdf'),(18,4,7,'D:\\ReportesAsistencia\\{UserName}\\{Year}\\{Month}'),(19,1,8,'Atrasos_{Date}.xls'),(20,4,8,'D:\\ReportesAsistencia'),(21,5,1,'rpt_AsistenciaPDF_v2.jasper'),(27,5,7,'weekly-main.jasper'),(32,4,1,'D:\\ReportesAsistencia\\{CostCenter}\\{Year}\\{Month}'),(33,8,1,'D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report\\Enlasa'),(34,9,5,'pListAttendanceAsExcel3'),(35,9,6,'pAbsence'),(36,9,8,'pListLater'),(37,2,7,'pdf'),(38,8,7,'D:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report'),(39,10,5,'#190033'),(40,11,5,'#E0E0E0'),(41,12,5,'#FFFF99'),(42,13,5,'#660000'),(43,14,5,'Trebuchet MS'),(44,15,5,'10'),(45,10,6,'#190033'),(46,11,6,'#E0E0E0'),(47,12,6,'#FFFF99'),(48,13,6,'#660000'),(49,14,6,'Trebuchet MS'),(50,15,6,'10'),(51,10,8,'#190033'),(52,11,8,'#E0E0E0'),(53,12,8,'#FFFF99'),(54,13,8,'#660000'),(55,14,8,'Trebuchet MS'),(56,15,8,'10'),(57,16,9,'PLAIN_EXCEL'),(58,17,9,'smtp.zoho.com'),(59,18,9,'587'),(60,19,9,'true'),(61,20,9,'true'),(62,21,9,'informes@aitex.cl'),(63,22,9,'Moreno2013'),(64,23,9,'Informe de Asistencia'),(65,24,9,'Env√≠o Informe de Asistencia'),(66,25,9,'MANPOWER'),(67,26,9,'juan_fajara@yahoo.es');
/*!40000 ALTER TABLE `treportproperty` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treportpropertytype`
--

DROP TABLE IF EXISTS `treportpropertytype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treportpropertytype` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(30) NOT NULL,
  `cName` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`),
  UNIQUE KEY `cKey_2` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=30 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treportpropertytype`
--

LOCK TABLES `treportpropertytype` WRITE;
/*!40000 ALTER TABLE `treportpropertytype` DISABLE KEYS */;
INSERT INTO `treportpropertytype` VALUES (1,'OUTPUT_FILE','Nombre del archivo de salida'),(2,'FORMAT','Formato de salida (pdf o xls)'),(3,'SEPARATED','Separado por area + fecha'),(4,'OUTPUT_PATH','Carpeta de Salida'),(5,'JASPER_FILE','Archivo de iReport'),(8,'JASPER_PATH','Carpeta donde esta el archivo jasper'),(9,'SP','Nombre del SP a ejecutar'),(10,'BG_COLOR_HEAD','Color de fondo en cabecera'),(11,'FONT_COLOR_HEAD','Color de letra en cabecera'),(12,'BG_COLOR_CELL','Color de fondo en el contenido'),(13,'FONT_COLOR_CELL','Color de letra en contenido'),(14,'FONT_NAME','Tipo de Letra'),(15,'FONT_SIZE','Tama√±o de letra'),(16,'SUB_REPORT','Sub-Reporte (Reporte a enviar)'),(17,'mail.smtp.host','Servidor de correo (smtp.gmail.com)'),(18,'mail.smtp.port','Puerto del servidor (587)'),(19,'mail.smtp.starttls.enable','Habilitacion de TLS [true|false] default:true'),(20,'mail.smtp.auth','Usa autenticacion [true|false] default:true'),(21,'mail.smtp.user','Usuario de correo'),(22,'mail.smtp.password','Clave de correo'),(23,'SUBJECT','Asunto'),(24,'TEXT','Texto del mensaje'),(25,'DESTINY','Destinatario del correo [MANPOWER, EACH_ONE]'),(26,'MANPOWER_MAIL','Casilla de correo de Recursos Humanos'),(27,'SP_SUMMARY','Procedimiento Almacenado que genera el detalle'),(28,'COLS_AS_TITLE','Cantidad Columns como titulo de la sub tabla'),(29,'EMPLOYEE_DEPTH','Profundidad de nileves de empleados a considerar (0=todos)');
/*!40000 ALTER TABLE `treportpropertytype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `treporttype`
--

DROP TABLE IF EXISTS `treporttype`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `treporttype` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cKey` varchar(20) NOT NULL,
  `cName` varchar(50) NOT NULL,
  `cJavaClass` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`cId`),
  UNIQUE KEY `cKey` (`cKey`),
  UNIQUE KEY `cKey_2` (`cKey`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treporttype`
--

LOCK TABLES `treporttype` WRITE;
/*!40000 ALTER TABLE `treporttype` DISABLE KEYS */;
INSERT INTO `treporttype` VALUES (1,'FILE','Generacion de archivos','cl.buildersoft.timectrl.business.services.impl.FileReportImpl'),(4,'PLAIN_EXCEL','Listado Excel','cl.buildersoft.timectrl.business.services.impl.ListToXExcelImpl'),(9,'SEND_BY_MAIL','Envio reporte por correo','cl.buildersoft.timectrl.business.services.impl.SendReportByMailImpl'),(10,'EXCEL_2','Excel con hoja resumen y detalle','cl.buildersoft.timectrl.business.services.impl.XExcel2Impl');
/*!40000 ALTER TABLE `treporttype` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `trol`
--

DROP TABLE IF EXISTS `trol`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `trol` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cName` varchar(50) DEFAULT NULL,
  `cDeleted` bit(1) NOT NULL DEFAULT b'0',
  PRIMARY KEY (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `trol`
--

LOCK TABLES `trol` WRITE;
/*!40000 ALTER TABLE `trol` DISABLE KEYS */;
INSERT INTO `trol` VALUES (1,'Administrador','\0'),(2,'Operaciones','\0');
/*!40000 ALTER TABLE `trol` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ttimectrl`
--

DROP TABLE IF EXISTS `ttimectrl`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ttimectrl` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cFile` bigint(20) NOT NULL,
  `cEmployeeKey` varchar(15) NOT NULL,
  `cDate` date NOT NULL,
  `cTurn` varchar(5) DEFAULT NULL,
  `cOnDuty` time DEFAULT NULL,
  `cOffDuty` time DEFAULT NULL,
  `cClockIn` time DEFAULT NULL,
  `cClockOut` time DEFAULT NULL,
  `cLate` time DEFAULT NULL,
  `cEarly` time DEFAULT NULL,
  `cWorkTime` time DEFAULT NULL,
  `cWeekEnd` bit(1) DEFAULT NULL,
  `cHoliday` bit(1) DEFAULT NULL,
  PRIMARY KEY (`cId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ttimectrl`
--

LOCK TABLES `ttimectrl` WRITE;
/*!40000 ALTER TABLE `ttimectrl` DISABLE KEYS */;
/*!40000 ALTER TABLE `ttimectrl` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tturn`
--

DROP TABLE IF EXISTS `tturn`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tturn` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cName` varchar(20) NOT NULL,
  `cFlexible` bit(1) NOT NULL DEFAULT b'0',
  PRIMARY KEY (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tturn`
--

LOCK TABLES `tturn` WRITE;
/*!40000 ALTER TABLE `tturn` DISABLE KEYS */;
INSERT INTO `tturn` VALUES (1,'AdministrativoCM','\0'),(2,'AdministrativoSL','\0'),(3,'AdministrativoPlanta','\0'),(4,'AdministrativoCMA','\0'),(5,'Soporte','\0'),(6,'Operador','\0'),(7,'Flexible 8-16-24',''),(8,'Flexible 8-20',''),(9,'O Flex Lun-Vier 7-22',''),(11,'O Domingo 09-17','\0'),(12,'O Sab 9-19','\0'),(13,'O Sab 07-17','\0'),(14,'O Dom 8-20','\0');
/*!40000 ALTER TABLE `tturn` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tturnday`
--

DROP TABLE IF EXISTS `tturnday`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tturnday` (
  `cId` bigint(20) NOT NULL AUTO_INCREMENT,
  `cTurn` bigint(20) NOT NULL,
  `cDay` int(11) NOT NULL,
  `cBusinessDay` tinyint(1) NOT NULL DEFAULT '1',
  `cEdgePrevIn` int(11) NOT NULL DEFAULT '0',
  `cStartTime` varchar(5) NOT NULL,
  `cEdgePostIn` int(11) NOT NULL DEFAULT '0',
  `cEdgePrevOut` int(11) NOT NULL DEFAULT '0',
  `cEndTime` varchar(5) NOT NULL,
  `cEdgePostOut` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`cId`),
  KEY `TurnDay_index_Turn` (`cTurn`),
  CONSTRAINT `TurnDay_To_Turn` FOREIGN KEY (`cTurn`) REFERENCES `tturn` (`cId`)
) ENGINE=InnoDB AUTO_INCREMENT=90 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tturnday`
--

LOCK TABLES `tturnday` WRITE;
/*!40000 ALTER TABLE `tturnday` DISABLE KEYS */;
INSERT INTO `tturnday` VALUES (1,1,1,1,0,'08:30',0,0,'18:45',0),(2,1,2,1,0,'08:30',0,0,'18:45',0),(3,1,3,1,0,'08:30',0,0,'18:45',0),(4,1,4,1,0,'08:30',0,0,'18:45',0),(8,1,5,1,0,'08:30',0,0,'16:30',0),(9,1,6,0,0,'00:00',0,0,'00:00',0),(10,1,7,0,0,'00:00',0,0,'00:00',0),(11,2,1,1,0,'08:00',0,0,'20:00',0),(12,2,2,1,0,'08:00',0,0,'20:00',0),(13,2,3,1,0,'08:00',0,0,'20:00',0),(14,2,4,1,0,'08:00',0,0,'20:00',0),(15,2,5,1,0,'08:00',0,0,'20:00',0),(18,3,1,1,0,'08:00',0,0,'18:00',0),(19,3,2,1,0,'08:00',0,0,'18:00',0),(20,3,3,1,0,'08:00',0,0,'18:00',0),(21,3,4,1,0,'08:00',0,0,'18:00',0),(22,3,5,1,0,'08:00',0,0,'18:00',0),(23,3,6,0,0,'00:00',0,0,'00:00',0),(24,3,7,0,0,'00:00',0,0,'00:00',0),(25,4,1,1,0,'07:30',0,0,'17:45',0),(26,4,2,1,0,'07:30',0,0,'17:45',0),(27,4,3,1,0,'07:30',0,0,'17:45',0),(28,4,4,1,0,'07:30',0,0,'17:45',0),(29,4,5,1,0,'07:30',0,0,'16:30',0),(30,4,6,0,0,'00:00',0,0,'00:00',0),(31,4,7,0,0,'00:00',0,0,'00:00',0),(32,5,1,1,0,'08:45',0,0,'13:30',0),(33,5,2,1,0,'08:45',0,0,'13:30',0),(34,5,3,1,0,'08:45',0,0,'13:30',0),(35,5,4,1,0,'08:45',0,0,'13:30',0),(36,5,5,1,0,'08:45',0,0,'13:30',0),(37,5,6,0,0,'00:00',0,0,'00:00',0),(38,5,7,0,0,'00:00',0,0,'00:00',0),(48,2,6,1,0,'08:00',0,0,'20:00',0),(49,2,7,1,0,'08:00',0,0,'20:00',0),(50,8,1,1,0,'08:00',0,0,'20:00',0),(51,8,2,1,0,'20:00',0,0,'08:00',0),(52,7,1,1,0,'08:00',0,0,'16:00',0),(53,7,2,1,0,'16:00',0,0,'00:00',0),(54,7,3,1,0,'00:00',0,0,'08:00',0),(55,9,1,1,0,'07:00',0,0,'14:30',0),(56,9,2,1,0,'14:30',0,0,'22:00',0),(57,9,3,1,0,'22:00',0,0,'07:00',0),(61,13,1,0,0,'00:00',0,0,'00:00',0),(62,13,2,0,0,'00:00',0,0,'00:00',0),(63,13,3,0,0,'00:00',0,0,'00:00',0),(64,13,4,0,0,'00:00',0,0,'00:00',0),(65,13,5,0,0,'00:00',0,0,'00:00',0),(66,13,6,1,0,'07:00',0,0,'17:00',0),(67,13,7,0,0,'00:00',0,0,'00:00',0),(68,12,1,0,0,'00:00',0,0,'00:00',0),(69,12,2,0,0,'00:00',0,0,'00:00',0),(70,12,3,0,0,'00:00',0,0,'00:00',0),(71,12,4,0,0,'00:00',0,0,'00:00',0),(72,12,5,0,0,'00:00',0,0,'00:00',0),(74,12,6,1,0,'09:00',0,0,'19:00',0),(75,12,7,0,0,'00:00',0,0,'00:00',0),(76,11,1,0,0,'00:00',0,0,'00:00',0),(77,11,2,0,0,'00:00',0,0,'00:00',0),(78,11,3,0,0,'00:00',0,0,'00:00',0),(79,11,4,0,0,'00:00',0,0,'00:00',0),(80,11,5,0,0,'00:00',0,0,'00:00',0),(81,11,6,0,0,'00:00',0,0,'00:00',0),(82,11,7,1,0,'09:00',0,0,'17:00',0),(83,14,1,0,0,'00:00',0,0,'00:00',0),(84,14,2,0,0,'00:00',0,0,'00:00',0),(85,14,3,0,0,'00:00',0,0,'00:00',0),(86,14,4,0,0,'00:00',0,0,'00:00',0),(87,14,5,0,0,'00:00',0,0,'00:00',0),(88,14,6,0,0,'00:00',0,0,'00:00',0),(89,14,7,1,0,'08:00',0,0,'20:00',0);
/*!40000 ALTER TABLE `tturnday` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'timectrl'
--
/*!50003 DROP FUNCTION IF EXISTS `fAppendComment` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fAppendComment`(vComment VARCHAR(120), vText VARCHAR(120)) RETURNS char(120) CHARSET utf8
BEGIN
	DECLARE vOut VARCHAR(120) DEFAULT '';

	IF(LENGTH(vComment)>0) THEN
		SET vOut = CONCAT(vComment, ', ', vText);
	ELSE
		SET vOut = vText;
	END IF;
		
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fCheckOutFriday` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fCheckOutFriday`() RETURNS char(5) CHARSET utf8
BEGIN
	RETURN '16:00';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fCheckOutFriday2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fCheckOutFriday2`() RETURNS char(5) CHARSET utf8
BEGIN
	RETURN '16:00';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fDate2DateTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fDate2DateTime`(vDate DATE, vHour INTEGER, vMinute INTEGER, vSecond INTEGER) RETURNS datetime
BEGIN
	DECLARE vOut DATETIME;
	SET vOut = fToDateTime(YEAR(vDate), MONTH(vDate), DAY(vDate), vHour, vMinute, vSecond);
	RETURN vOut;	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fDayOfWeek` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fDayOfWeek`(vMarkTime DATETIME) RETURNS char(10) CHARSET utf8
BEGIN 
	DECLARE vOut CHAR(10) DEFAULT '';
	
	CASE DAYOFWEEK(vMarkTime)
		WHEN 1 THEN SET vOut = 'Domingo';
		WHEN 2 THEN SET vOut = 'Lunes';
		WHEN 3 THEN SET vOut = 'Martes';
		WHEN 4 THEN SET vOut = 'Miercoles';
		WHEN 5 THEN SET vOut = 'Jueves';
		WHEN 6 THEN SET vOut = 'Viernes';
		WHEN 7 THEN SET vOut = 'Sabado';
		ELSE SET vOut = '';
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fDayOfWeek2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fDayOfWeek2`(vMarkTime DATETIME) RETURNS char(10) CHARSET utf8
BEGIN 
	DECLARE vOut CHAR(10) DEFAULT '';
	
	CASE DAYOFWEEK(vMarkTime)
		WHEN 1 THEN SET vOut = 'Domingo';
		WHEN 2 THEN SET vOut = 'Lunes';
		WHEN 3 THEN SET vOut = 'Martes';
		WHEN 4 THEN SET vOut = 'Miercoles';
		WHEN 5 THEN SET vOut = 'Jueves';
		WHEN 6 THEN SET vOut = 'Viernes';
		WHEN 7 THEN SET vOut = 'Sabado';
		ELSE SET vOut = '';
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fDayOfWeek3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fDayOfWeek3`(vMarkTime DATE) RETURNS char(10) CHARSET utf8
BEGIN 
	DECLARE vOut CHAR(10) DEFAULT '';
	
	CASE DAYOFWEEK(vMarkTime)
		WHEN 1 THEN SET vOut = 'Domingo';
		WHEN 2 THEN SET vOut = 'Lunes';
		WHEN 3 THEN SET vOut = 'Martes';
		WHEN 4 THEN SET vOut = 'Miercoles';
		WHEN 5 THEN SET vOut = 'Jueves';
		WHEN 6 THEN SET vOut = 'Viernes';
		WHEN 7 THEN SET vOut = 'Sabado';
		ELSE SET vOut = '';
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fEndDiffInSelect` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fEndDiffInSelect`(vEndDiffI INTEGER, vStartMark TIMESTAMP, vEndMark TIMESTAMP) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut VARCHAR(20) DEFAULT '';

	IF(NOT vEndMark IS NULL) THEN
		IF(vStartMark IS NULL) THEN
			SET vOut = CONCAT('(', vEndDiffI, ')');
		ELSE
			SET vOut = vEndDiffI;
		END IF;
	END IF;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fEndMark` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fEndMark`(	vEmployeeKey VARCHAR(20), vStartMark TIMESTAMP, 
							vHoursWorkday INTEGER, vCurrent DATE, vTolerance INTEGER,
							vBusinessDay BOOLEAN, vTurnDayId BIGINT(20)) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;
	DECLARE vEndTime TIMESTAMP;

	
	IF(vStartMark IS NULL) THEN
		SET vEndTime = CONCAT(vCurrent, ' ', (SELECT cEndTime FROM tTurnDay WHERE cId = vTurnDayId));
		SET vOut = fGetRealMark3(vEmployeeKey, vTolerance, vEndTime, 4);
	ELSE
		SELECT cDate INTO vOut
		FROM tAttendanceLog 
		WHERE cEmployeeKey = vEmployeeKey AND 
			cDate BETWEEN vStartMark AND TIMESTAMPADD(HOUR, vHoursWorkday, vStartMark) AND
			cMarkType=4 
		ORDER BY cDate DESC LIMIT 1;
	END IF;
	
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fEndTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fEndTime`(	vEndMark TIMESTAMP, vStartMark TIMESTAMP,
							vBusinessDay BOOLEAN, vTurnDayId BIGINT(20)) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;


	IF(vBusinessDay) THEN
		SET vOut = CONCAT(DATE(vEndMark), ' ', (SELECT cEndTime FROM tTurnDay WHERE cId = vTurnDayId));
	ELSE
		SET vOut = vStartMark;
	END IF;


	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fEndTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fEndTime2`(vMarkTime DATETIME, vUserId INT, vType CHAR(1)) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN fGetLimitTime2(vMarkTime, vUserId, vType, 4);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTime`(vMark DATETIME, vLimitTime CHAR(8), vStart BOOLEAN) RETURNS char(100) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(100) DEFAULT '';
	DECLARE vMinutes INTEGER DEFAULT 0;
	
	SET vMinutes = fExtraTimeAsMins(vMark, vLimitTime, vStart);
	
	IF(vMinutes != 0) THEN
		SET vOut = TIMESTAMPADD(MINUTE, vMinutes, MAKETIME(0,0,0));
	END IF;
	
	RETURN vOut;
	
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTime2`(vMark DATETIME, vLimitTime CHAR(8), vStart BOOLEAN) RETURNS char(100) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(100) DEFAULT '';
	DECLARE vMinutes INTEGER DEFAULT 0;
	
	SET vMinutes = fExtraTimeAsMins2(vMark, vLimitTime, vStart);
	
	IF(vMinutes != 0) THEN
		SET vOut = TIMESTAMPADD(MINUTE, vMinutes, MAKETIME(0,0,0));
	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTime3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTime3`(vMinutes INTEGER) RETURNS varchar(10) CHARSET utf8
BEGIN
	DECLARE vOut VARCHAR(10) DEFAULT '';
	
	SET vOut = TIMESTAMPADD(MINUTE, vMinutes, MAKETIME(0,0,0));

	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTimeAsMins` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTimeAsMins`(vMark DATETIME, vLimitTime CHAR(8), vStart BOOLEAN) RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 0;
	DECLARE vDateMarkAsString CHAR(100) DEFAULT '';
	DECLARE vDateMark DATETIME;
	
	IF(CHAR_LENGTH(vLimitTime)>0) THEN
		SET vDateMarkAsString = concat(DATE_FORMAT(vMark, '%Y-%m-%d'), ' ', vLimitTime);
		SET vDateMark = STR_TO_DATE(vDateMarkAsString, '%Y-%m-%d %H:%i:%S');

		IF(EXTRACT(HOUR FROM vMark)=23 AND vLimitTime='00:00:00') THEN
			SET vDateMark = TIMESTAMPADD(DAY, 1, vDateMark);
		END IF;
		
		IF(vStart) THEN
			SET vOut = TIMESTAMPDIFF(MINUTE, vMark, vDateMark);
		ELSE
			SET vOut = TIMESTAMPDIFF(MINUTE, vDateMark, vMark);
		END IF;

	END IF;

	
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTimeAsMins2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTimeAsMins2`(vMark DATETIME, vLimitTime CHAR(8), vStart BOOLEAN) RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 0;
	DECLARE vDateMarkAsString CHAR(100) DEFAULT '';
	DECLARE vDateMark DATETIME;
	
	IF(CHAR_LENGTH(vLimitTime)>0) THEN
		SET vDateMarkAsString = concat(DATE_FORMAT(vMark, '%Y-%m-%d'), ' ', vLimitTime);
		SET vDateMark = STR_TO_DATE(vDateMarkAsString, '%Y-%m-%d %H:%i:%S');

		IF(EXTRACT(HOUR FROM vMark)=23 AND vLimitTime='00:00:00') THEN
			SET vDateMark = TIMESTAMPADD(DAY, 1, vDateMark);
		END IF;
		
		IF(vStart) THEN
			SET vOut = TIMESTAMPDIFF(MINUTE, vMark, vDateMark);
		ELSE
			SET vOut = TIMESTAMPDIFF(MINUTE, vDateMark, vMark);
		END IF;

	END IF;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTimeAsMins3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTimeAsMins3`(vMark TIMESTAMP, vLimitTime TIMESTAMP, vStart BOOLEAN) RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 0;
	
	
	
	IF(vStart) THEN
		SET vOut = TIMESTAMPDIFF(MINUTE, vMark, vLimitTime);
	ELSE
		SET vOut = TIMESTAMPDIFF(MINUTE, vLimitTime, vMark);
	END IF;	
	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTimeAsMins4` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTimeAsMins4`(vMark TIMESTAMP, vLimitTime VARCHAR(8), vStart BOOLEAN, vCurrent DATE) RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 0; 
	DECLARE vDateMarkAsString VARCHAR(100) DEFAULT '';
	DECLARE vDateMark datetime;
	
	IF(CHAR_LENGTH(vLimitTime)>0) THEN

		SET vDateMarkAsString = CONCAT(DATE_FORMAT(vCurrent, '%Y-%m-%d'), ' ', vLimitTime);


		SET vDateMark = STR_TO_DATE(vDateMarkAsString, '%Y-%m-%d %H:%i:%s');
		
		IF(EXTRACT(HOUR FROM vMark)=23 AND vLimitTime='00:00:00') THEN
			SET vDateMark = TIMESTAMPADD(DAY, 1, vDateMark);
		END IF;
		
		IF(vStart) THEN
			SET vOut = TIMESTAMPDIFF(MINUTE, vMark, vDateMark);
		ELSE
			SET vOut = TIMESTAMPDIFF(MINUTE, vDateMark, vMark);
		END IF;

	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fExtraTimeAsMins5` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fExtraTimeAsMins5`(vFrom TIMESTAMP, vTo TIMESTAMP, vStart BOOLEAN) RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 0;
	DECLARE vDiff DECIMAL(8,3);
	IF(vStart) THEN
		SET vDiff = TIMESTAMPDIFF(SECOND, vFrom, vTo)/60;
	ELSE
		SET vDiff = TIMESTAMPDIFF(SECOND, vTo, vFrom)/60;
	END IF;
	SET vOut := ROUND(vDiff);
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fFindMarkOnDay` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fFindMarkOnDay`(vPersonKey VARCHAR(25), vCurrent DATE, vMarkType INTEGER) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;

	DECLARE vStart TIME;
	DECLARE vEnd TIME;
	
	SET vStart = MAKETIME(0,0,0);
	SET vEnd = MAKETIME(23,59,59);
	
	SELECT	cDate INTO vOut
	FROM	tAttendanceLog 
	WHERE	cEmployeeKey = vPersonKey AND 
			DATE(cDate) = DATE(vCurrent) AND 
			TIME(cDate) BETWEEN vStart AND vEnd
			AND cMarkType=vMarkType
	LIMIT 1;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fFindTurn` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fFindTurn`(vTurn BIGINT(20), vMark TIMESTAMP) RETURNS bigint(20)
BEGIN
	DECLARE vOut BIGINT(20);
	DECLARE vId BIGINT(20);
	
	DECLARE vTime TIME DEFAULT '00:00';
	DECLARE vDone BOOLEAN DEFAULT FALSE;
	DECLARE vTolerance INTEGER;
	DECLARE vTemp VARCHAR(20);
	DECLARE vStartRange TIMESTAMP;
	DECLARE vEndRange TIMESTAMP;
	
	DECLARE cursorHorary CURSOR FOR
		SELECT cId, cStartTime FROM tTurnDay WHERE cTurn = vTurn ORDER BY cStartTime;

	DECLARE CONTINUE HANDLER FOR NOT FOUND SET vDone = TRUE;
	
	OPEN cursorHorary;
	cursorHorary_loop: LOOP
		FETCH cursorHorary INTO vId, vTime;

    	IF(vDone) THEN 
			LEAVE cursorHorary_loop;
		END IF;

		SET vTolerance = fGetTolerance();
		
		SET vTemp = DATE_FORMAT(vMark, CONCAT('%Y-%m-%d ', vTime));
		
		IF(HOUR(vTime)=0 AND (HOUR(vMark) >= 24-(vTolerance/60) )) THEN
			SET vTemp = TIMESTAMPADD(DAY, 1, vTemp);
		END IF;
		
		SET vStartRange = TIMESTAMPADD(MINUTE, vTolerance * -1, vTemp);
		SET vEndRange = TIMESTAMPADD(MINUTE, vTolerance, vTemp);
		
		IF(vMark > vStartRange AND vMark < vEndRange) THEN
			SET vOut := vId;
		END IF;



    	IF(NOT vOut IS NULL) THEN 
			LEAVE cursorHorary_loop;
		END IF;
		
	END LOOP cursorHorary_loop;
	CLOSE cursorHorary;

	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetComment3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetComment3`(vMark DATETIME, vEmployeeId BIGINT(20), vTurnDayId BIGINT(20), vBusinessDay BOOLEAN, 
							vStartMark DATETIME, vEndMark DATETIME) RETURNS char(120) CHARSET utf8
BEGIN
	DECLARE vOut VARCHAR(120) DEFAULT '';
	
	SELECT tLicenseCause.cName INTO vOut 
	FROM tLicense 
	LEFT JOIN tLicenseCause ON tLicense.cLicenseCause = tLicenseCause.cId 
	WHERE	cEmployee = vEmployeeId AND 
			DATE(vMark) BETWEEN cStartDate AND cEndDate;
	
	IF(EXISTS(SELECT cId FROM tFiscalDate WHERE cDate = DATE(vMark))) THEN
		SET vOut = fAppendComment(vOut, 'D√≠a Feriado');
	END IF;

	IF(vStartMark IS NULL AND vEndMark IS NULL) THEN
		SET vOut = fAppendComment(vOut, 'Sin marcas');
	ELSEIF(vStartMark IS NULL) THEN
		SET vOut = fAppendComment(vOut, 'Sin entrada');
	ELSEIF(vEndMark IS NULL) THEN
		SET vOut = fAppendComment(vOut, 'Sin salida');
	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetHoursWorkday` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetHoursWorkday`() RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 12;
	
	IF(EXISTS(SELECT cValue FROM tParameter WHERE cKey='HOURS_WORKDAY')) THEN
		SELECT cValue INTO vOut FROM tParameter WHERE cKey='HOURS_WORKDAY' LIMIT 1;
	END IF;

	RETURN vOut;	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetLimitTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetLimitTime2`(vMarkTime DATETIME, vUserId BIGINT(20), vTypeAsNum INT, vExpectedType INT) RETURNS char(8) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(8) DEFAULT '';
	DECLARE vTurnDayId BIGINT(20);
	DECLARE vTurnDay BIGINT(20);
	DECLARE vDaysCount INTEGER;
	
	DECLARE vRTurno BIGINT(20);
	DECLARE vStart DATE;
	DECLARE vEnd DATE;
	DECLARE vDaysOfTurn INTEGER;

	SET vTurnDayId = fMarkAndUserToTurnDayId2(vMarkTime, vUserId);
	
	
	
	IF(vTypeAsNum = 1 AND vExpectedType = 1) THEN
		IF(vTurnDay IS NULL) THEN
			SET vOut = fInferTime2(vMarkTime);
		ELSE
			SELECT cStartTime INTO vOut 
			FROM tTurnDay 
			WHERE cId = vTurnDayId;
		END IF;
	END IF;

	
	IF(vTypeAsNum = 4 AND vExpectedType = 4) THEN
		IF(vTurnDay IS NULL) THEN
			SET vOut = fInferTime2(vMarkTime);
		ELSE
			SELECT cEndTime INTO vOut 
			FROM tTurnDay 
			WHERE cId = vTurnDayId;
		END IF;
	END IF;

	

	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetMarkTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetMarkTime`(vType CHAR, vDateTime DATETIME, vExpected INT) RETURNS char(8) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(8) DEFAULT '';
	DECLARE vTypeAsNum INT DEFAULT 0;  

	SET vTypeAsNum = fSolveTypeAsNum(vType);

	IF(vTypeAsNum = vExpected) THEN

		SET vOut = TIME(vDateTime);
	END IF;
	

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetMarkTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetMarkTime2`(vTypeAsNum INTEGER, vDateTime DATETIME, vExpected INT) RETURNS char(8) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(8) DEFAULT '';
	
	IF(vTypeAsNum = vExpected) THEN
		SET vOut = TIME(vDateTime);
	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetRealMark3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetRealMark3`(vPersonKey VARCHAR(25), vMinutes INTEGER, vTime TIMESTAMP, vMarkType INTEGER) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;

	SELECT cDate INTO vOut
	FROM tAttendanceLog 
	WHERE	cEmployeeKey = vPersonKey AND 
			cDate BETWEEN	TIMESTAMPADD(MINUTE, (vMinutes*-1), vTime) AND 
							TIMESTAMPADD(MINUTE, vMinutes, vTime) AND
			cMarkType = vMarkType
	LIMIT 1;

	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fGetTolerance` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fGetTolerance`() RETURNS int(11)
BEGIN
	DECLARE vOut INTEGER DEFAULT 120;
	IF (EXISTS(SELECT cId FROM tParameter WHERE cKey='TOLERANCE_INFERENCE')) THEN
		SELECT cValue INTO vOut FROM tParameter WHERE cKey='TOLERANCE_INFERENCE';
	END IF;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fInferTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fInferTime`(vMarkTime DATETIME) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP DEFAULT NULL;
	DECLARE vTime TIME DEFAULT '00:00:00';
	DECLARE vDone BOOLEAN DEFAULT FALSE;
	DECLARE cursorHorary CURSOR FOR
		SELECT cValue FROM tParameter WHERE cKey LIKE 'INFER_TIME%' ORDER BY cKey;

	DECLARE CONTINUE HANDLER FOR NOT FOUND SET vDone = TRUE;
	
	OPEN cursorHorary;
	cursorHorary_loop: LOOP
		FETCH cursorHorary INTO vTime;

    	IF(vDone) THEN 
			LEAVE cursorHorary_loop;
		END IF;

		SET vOut = fResolveTime(vTime, vMarkTime);

    	IF(NOT vOut IS NULL) THEN 
			LEAVE cursorHorary_loop;
		END IF;
		
		
	END LOOP cursorHorary_loop;
	CLOSE cursorHorary;

	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fInferTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fInferTime2`(vMarkTime DATETIME) RETURNS char(8) CHARSET utf8
BEGIN
	
	DECLARE vTime1 TIME DEFAULT '00:00:00';
	DECLARE vTime2 TIME DEFAULT '08:00:00';
	DECLARE vTime3 TIME DEFAULT '16:00:00';
	DECLARE vTime4 TIME DEFAULT '20:00:00';
	DECLARE vOut CHAR(10) DEFAULT '';
	
	SET vOut = fResolveTime2(vTime1, vMarkTime);
	
	IF(LENGTH(vOut) = 0) THEN
		SET vOut = fResolveTime2(vTime2, vMarkTime);
		IF(LENGTH(vOut) = 0) THEN
			SET vOut = fResolveTime2(vTime3, vMarkTime);
			IF(LENGTH(vOut) = 0) THEN
				SET vOut = fResolveTime2(vTime4, vMarkTime);
			END IF;
		END IF;
	END IF;
	
	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fIsBusinessDay` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fIsBusinessDay`(vTurnDayId BIGINT(20)) RETURNS tinyint(1)
BEGIN
	DECLARE vOut BOOLEAN;
	SELECT cBusinessDay INTO vOut FROM tTurnDay WHERE cId = vTurnDayId;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fIsFlexible` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fIsFlexible`(vMarkTime DATE, vEmployeeId BIGINT(20)) RETURNS tinyint(1)
BEGIN 
	DECLARE vOut BOOLEAN DEFAULT NULL;
	DECLARE vRTurn BIGINT(20);
	DECLARE vTurnDay BIGINT(20);
	DECLARE vTurn BIGINT(20);

	SELECT cId INTO vRTurn
	FROM tR_EmployeeTurn 
	WHERE cEmployee = vEmployeeId AND vMarkTime BETWEEN cStartDate AND cEndDate
	LIMIT 1;
	
	SELECT cTurn INTO vTurn
	FROM tR_EmployeeTurn
	WHERE cId = vRTurn;
	
	SELECT cFlexible INTO vOut
	FROM tTurn
	WHERE cId = vTurn;
		
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fIsHoliday` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fIsHoliday`(vCurrent DATE) RETURNS tinyint(1)
BEGIN
	DECLARE vOut BOOLEAN;
	DECLARE vDayOfWeek	INTEGER;
	SET vDayOfWeek := DAYOFWEEK(vCurrent);
	SET vOut := EXISTS(SELECT cId FROM tFiscalDate WHERE cDate = DATE(vCurrent)) OR vDayOfWeek=1 OR vDayOfWeek=7;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fLuchTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fLuchTime`(pType CHAR, vDateTime DATETIME) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(20) DEFAULT '';
	DECLARE vType INT DEFAULT 0;
	
	SET vType = fSolveTypeAsNum(pType); 

	IF (vType=2 OR vType=3) THEN
			SET vOut = fTimeFormat(vDateTime);

	END IF;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fLuchTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fLuchTime2`(pType CHAR, vDateTime DATETIME) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(20) DEFAULT '';
	
	IF (pType=2 OR pType=3) THEN
			SET vOut = fTimeFormat2(vDateTime);
	END IF;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fLunchMark` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fLunchMark`(vEmployeeKey VARCHAR(20), vStartMark TIMESTAMP, vHoursWorkday INTEGER) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;
	
	SELECT cDate INTO vOut
	FROM tAttendanceLog 
	WHERE cEmployeeKey = vEmployeeKey AND 
		cDate BETWEEN vStartMark AND TIMESTAMPADD(HOUR, vHoursWorkday, vStartMark) AND
		cMarkType=2 
	LIMIT 1	;
			
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fMarkAndUserToTurnDayId4` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fMarkAndUserToTurnDayId4`(vMarkTime TIMESTAMP, vEmployeeId BIGINT(20), 
						vTolerance INTEGER, vFlexible BOOLEAN) RETURNS bigint(20)
BEGIN 
	DECLARE vOut BIGINT(20) DEFAULT NULL;
	

	DECLARE vStart DATE;
	DECLARE vEnd DATE;
	DECLARE vDaysCount INTEGER;
	DECLARE vDaysOfTurn INTEGER;
	DECLARE vTurnDay BIGINT(20);
	DECLARE vTurn BIGINT(20);


	IF(NOT vFlexible IS NULL) THEN	
		
	
		SELECT cStartDate, cEndDate, cTurn INTO vStart, vEnd, vTurn
	
		FROM tR_EmployeeTurn 
		WHERE cEmployee = vEmployeeId AND DATE(vMarkTime) BETWEEN cStartDate AND cEndDate
		LIMIT 1;

		IF(vFlexible) THEN
			SET vOut := fFindTurn(vTurn, vMarkTime);

		ELSE
			SELECT MAX(cDay) INTO vDaysOfTurn 
			FROM tTurnDay
			WHERE cTurn = vTurn;
			
			SET vDaysCount = DATEDIFF(vMarkTime, vStart) % vDaysOfTurn;
			SET vDaysCount = vDaysCount + 1;
			
			SELECT cId INTO vOut 
			FROM tTurnDay 
			WHERE cTurn = vTurn AND cDay = vDaysCount;
		END IF;
	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fMarkInTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fMarkInTime`(vType CHAR, vDateTime DATETIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN fGetMarkTime(vType, vDateTime, 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fMarkInTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fMarkInTime2`(vType INTEGER, vDateTime DATETIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN fGetMarkTime2(vType, vDateTime, 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fMarkOutTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fMarkOutTime`(vType CHAR, vDateTime DATETIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN fGetMarkTime(vType, vDateTime, 4);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fMarkOutTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fMarkOutTime2`(vType INTEGER, vDateTime DATETIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN fGetMarkTime2(vType, vDateTime, 4);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fResolveTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fResolveTime`(vTime TIME, vMarkTime DATETIME) RETURNS datetime
BEGIN
	DECLARE vOut DATETIME DEFAULT NULL;
	DECLARE vStartRange DATETIME;
	DECLARE	vEndRange DATETIME;
	DECLARE vTemp CHAR(100);
	DECLARE vTolerance INTEGER;

	SET vTolerance = fGetTolerance();
	
	SET vTemp = DATE_FORMAT(vMarkTime, CONCAT('%Y-%m-%d ', vTime));
	

	IF(HOUR(vTime)=0 AND (HOUR(vMarkTime) >= 24-(vTolerance/60) )) THEN
		SET vTemp = TIMESTAMPADD(DAY, 1, vTemp);
	END IF;
	

	SET vStartRange = TIMESTAMPADD(MINUTE, vTolerance * -1, vTemp);
	SET vEndRange = TIMESTAMPADD(MINUTE, vTolerance, vTemp);

	
	IF(vMarkTime > vStartRange AND vMarkTime < vEndRange) THEN
		
		SET vOut := DATE_FORMAT(vTemp, CONCAT('%Y-%m-%d ', vTime));
	END IF;
	
	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fResolveTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fResolveTime2`(vTime TIME, vMarkTime DATETIME) RETURNS char(100) CHARSET utf8
BEGIN

	DECLARE vOut CHAR(100) DEFAULT '';
	DECLARE vStartRange DATETIME;
	DECLARE	vEndRange DATETIME;
	DECLARE vTemp CHAR(100);
	
	SET vTemp = DATE_FORMAT(vMarkTime, concat('%Y-%m-%d ', vTime));
	IF(HOUR(vMarkTime)=23) THEN
		SET vTemp = TIMESTAMPADD(DAY, 1, vTemp);
	END IF;

	SET vStartRange = TIMESTAMPADD(HOUR, -1, vTemp);
	SET vEndRange = TIMESTAMPADD(HOUR, 1, vTemp);
	
	

	


	IF(vMarkTime > vStartRange AND vMarkTime < vEndRange) THEN
		SET vOut = vTime;
	END IF;
	

	
	RETURN vOut;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fReturnMark` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fReturnMark`(vEmployeeKey VARCHAR(20), vStartMark TIMESTAMP, vHoursWorkday INTEGER, vLunchMark TIMESTAMP) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;
	SELECT cDate INTO vOut
	FROM tAttendanceLog 
	WHERE cEmployeeKey = vEmployeeKey AND 
		cDate BETWEEN vStartMark AND TIMESTAMPADD(HOUR, vHoursWorkday, vLunchMark) AND
		cMarkType=3 
	LIMIT 1;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveType` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveType`(pType CHAR) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(20) DEFAULT '';
	
	CASE pType
		WHEN 'I' THEN SET vOut = 'Entrada';
		WHEN '0' THEN SET vOut = 'Colacion';
		WHEN '1' THEN SET vOut = 'Volver';
		WHEN 'O' THEN SET vOut = 'Salida';
		ELSE SET vOut = '';
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveType2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveType2`(pType CHAR) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(20) DEFAULT '';
	
	CASE pType
		WHEN 'I' THEN SET vOut = 'Entrada';
		WHEN '0' THEN SET vOut = 'Colacion';
		WHEN '1' THEN SET vOut = 'Volver';
		WHEN 'O' THEN SET vOut = 'Salida';
		ELSE SET vOut = '';
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveTypeArea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveTypeArea`(pType CHAR(5)) RETURNS char(50) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(50) DEFAULT '';
	
	CASE pType
		WHEN '1 ' THEN SET vOut = 'Enlasa';
		WHEN '2 ' THEN SET vOut = 'Teno';
		WHEN '3 ' THEN SET vOut = 'Trapen';
		WHEN '4 ' THEN SET vOut = 'Pe√±on';
		WHEN '5 ' THEN SET vOut = 'Diego';
		
		ELSE SET vOut = '';

	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveTypeArea2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveTypeArea2`(pType CHAR(5)) RETURNS char(50) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(50) DEFAULT '';
	
	CASE pType
		WHEN '1 ' THEN SET vOut = 'Enlasa';
		WHEN '2 ' THEN SET vOut = 'Teno';
		WHEN '3 ' THEN SET vOut = 'Trapen';
		WHEN '4 ' THEN SET vOut = 'Pe√±on';
		WHEN '5 ' THEN SET vOut = 'Diego';
		
		ELSE SET vOut = '';

	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveTypeAsNum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveTypeAsNum`(pType CHAR) RETURNS int(11)
BEGIN
	DECLARE vOut INT DEFAULT -1;
	
	CASE pType
		WHEN 'I' THEN SET vOut = 1;
		WHEN '0' THEN SET vOut = 2;
		WHEN '1' THEN SET vOut = 3;
		WHEN 'O' THEN SET vOut = 4;
		ELSE SET vOut = -1;
	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveTypeTurno` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveTypeTurno`(pType CHAR(20)) RETURNS char(50) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(50) DEFAULT '';
	
	CASE pType
		WHEN 'Admin1' THEN SET vOut = '08:00 - 17:30';
		WHEN 'Admin2' THEN SET vOut = '08:45 - 18:15';
		WHEN 'Admin3' THEN SET vOut = '09:30 - 19:00';
		ELSE SET vOut = '';

	END CASE;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fSolveTypeTurno2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fSolveTypeTurno2`(vUserId BIGINT(20), vMarkTime DATETIME) RETURNS char(50) CHARSET utf8
BEGIN
	DECLARE vOut CHAR(50) DEFAULT '';
	DECLARE vRTurno BIGINT(20);
	
	
	SET vRTurno = fGetJournal2(vUserId, vMarkTime);
	
	return vRTurno;
	
	SELECT CONCAT(cStartTime, ' - ', cEndTime) INTO vOut 
	FROM tTurnDay
	WHERE cTurn=vRTurno;
	
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fStartDiffInSelect` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fStartDiffInSelect`(vStartDiffI INTEGER, vStartMark TIMESTAMP, vEndMark TIMESTAMP) RETURNS char(20) CHARSET utf8
BEGIN
	DECLARE vOut VARCHAR(20) DEFAULT '';
	
	IF(NOT vStartMark IS NULL) THEN
		IF(vEndMark IS NULL) THEN
			SET vOut = CONCAT('(', vStartDiffI, ')');
		ELSE
			SET vOut = vStartDiffI;
		END IF;
	END IF;

	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fStartMark` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fStartMark`(	vEmployeeKey VARCHAR(20), vTolerance INTEGER, vCurrent DATE,
							vBusinessDay BOOLEAN, vFlexible BOOLEAN, vTurnDayId BIGINT(20)) RETURNS timestamp
BEGIN
	DECLARE vOut		TIMESTAMP DEFAULT NULL;

	DECLARE vMark		TIMESTAMP;
	DECLARE vStart		TIMESTAMP;
	DECLARE vEnd		TIMESTAMP;
	DECLARE vTime		VARCHAR(5);
	
	IF (vFlexible) THEN 
		SET vMark := fDate2DateTime(vCurrent, 0, 0, 0);
		SET vStart := TIMESTAMPADD(MINUTE, vTolerance * -1, vMark);
		SET vMark := fDate2DateTime(vCurrent, 23, 59, 59);
		SET vEnd := TIMESTAMPADD(MINUTE, vTolerance * -1, vMark);
		
		SELECT cDate INTO vOut
		FROM tAttendanceLog 
		WHERE cEmployeeKey = vEmployeeKey AND 
			cDate BETWEEN vStart AND vEnd AND
			cMarkType=1 
		ORDER BY cDate ASC 
		LIMIT 1;



		
	ELSE 
		IF(vBusinessDay) THEN
			SET vTime = (SELECT cStartTime FROM tTurnDay WHERE cId = vTurnDayId);
			
			SET vMark = CONCAT(vCurrent, ' ', vTime);
			
			SET vStart := TIMESTAMPADD(MINUTE, vTolerance * -1, vMark);
			SET vEnd := TIMESTAMPADD(MINUTE, vTolerance, vMark);
			SELECT cDate INTO vOut
					FROM tAttendanceLog 
					WHERE cEmployeeKey = vEmployeeKey AND 
						cDate BETWEEN vStart AND vEnd AND
			cMarkType=1
			ORDER BY cDate ASC
			LIMIT 1;
			


		ELSE
			SET vOut = fFindMarkOnDay(vEmployeeKey, vCurrent, 1);
		END IF;
	END IF;
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fStartTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fStartTime`(vStartMark TIMESTAMP, vBusinessDay BOOLEAN, vTurnDayId BIGINT(20)) RETURNS timestamp
BEGIN
	DECLARE vOut TIMESTAMP;
	DECLARE vTime VARCHAR(10);
	
	IF(vTurnDayId IS NULL) THEN
		SET vOut = fInferTime(vStartMark);
	ELSE
		IF(vBusinessDay) THEN
			SELECT cStartTime INTO vTime FROM tTurnDay WHERE cId = vTurnDayId;
			
			IF(TIME(vTime)=0 AND HOUR(vStartMark)>22) THEN
				SET vStartMark = TIMESTAMPADD(DAY, 1, vStartMark);
			END IF;
			
			SET vOut = CONCAT(DATE(vStartMark), ' ', vTime);
		ELSE
			SET vOut = vStartMark;
		END IF;
	END IF;
	
	RETURN vOut;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fStartTime2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fStartTime2`(vMarkTime DATETIME, vUserId BIGINT(20), vType CHAR(1)) RETURNS char(80) CHARSET utf8
BEGIN
	RETURN fGetLimitTime2(vMarkTime, vUserId, vType, 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fTimeFormat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fTimeFormat`(vTime TIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN vTime;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fTimeFormat2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fTimeFormat2`(vTime TIME) RETURNS char(8) CHARSET utf8
BEGIN
	RETURN vTime;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fToDateTime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `fToDateTime`(vYear INTEGER,
							vMonth INTEGER,
							vDay INTEGER,
							vHour INTEGER,
							vMinute INTEGER,
							vSecond INTEGER) RETURNS datetime
BEGIN
	DECLARE vOut DATETIME;
	SET vOut = DATE_FORMAT(
					CONCAT(CONCAT_WS('-', vYear, vMonth, vDay), ' ', CONCAT_WS(':', vHour, vMinute, vSecond)),
					'%Y-%m-%d %H:%i:%s'
					);
	RETURN vOut;	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pAbsence` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pAbsence`(IN vDate DATE)
BEGIN	
	DECLARE vId		BIGINT(20);
	DECLARE vKey 	VARCHAR(15);
	DECLARE vDone BOOLEAN DEFAULT FALSE;
	DECLARE cursorEmployee CURSOR FOR
		SELECT	cId, cKey
		FROM	tEmployee;
	DECLARE CONTINUE HANDLER FOR NOT FOUND SET vDone = TRUE;
	
	DROP TEMPORARY TABLE IF EXISTS tEmployee_temp;
	
	CREATE TEMPORARY TABLE tEmployee_temp (
		idEmployee BIGINT(20)  NOT NULL
    );
	
	OPEN cursorEmployee;
	cursorEmployee_loop: LOOP
		FETCH cursorEmployee INTO vId, vKey;
		
		IF(vDone) THEN 
			LEAVE cursorEmployee_loop;
		END IF;

		IF NOT EXISTS(SELECT cDate FROM tAttendanceLog WHERE vDate = DATE(cDate) AND cEmployeeKey = vKey) THEN 
		    INSERT INTO tEmployee_temp(idEmployee) VALUES(vId);
		END IF;
		
	END LOOP cursorEmployee_loop;
	CLOSE cursorEmployee;
	
	SELECT	e.cId							AS 'Id Empleado',
			e.cRut							AS 'RUT',
			e.cName							AS 'Nombre', 
			a.cName							AS 'Area'
	FROM tEmployee AS e
	LEFT JOIN tArea AS a ON e.cArea = a.cId
	WHERE e.cId IN (SELECT idEmployee FROM tEmployee_temp)
	ORDER BY e.cName;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pAddReportProperty` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pAddReportProperty`(IN vKey VARCHAR(30), IN vName VARCHAR(100), IN vReportType BIGINT(20), IN vValue VARCHAR(255))
BEGIN
	DECLARE vId BIGINT(20);
	IF(EXISTS(SELECT cId  FROM tReportPropertyType WHERE cKey=vKey)) THEN
		SELECT cId INTO vId FROM tReportPropertyType WHERE cKey=vKey;
	ELSE
		INSERT INTO tReportPropertyType(cKey, cName) VALUES(vKey, vName);
		SET vId = LAST_INSERT_ID();
	END IF;


	
	INSERT INTO tR_ReportPropertyType_ReportType(cReportType, cReportPropertyType) VALUES(vReportType, vId);

	INSERT INTO tReportProperty(cPropertyType, cReport, cValue)	
		SELECT vId, cId, vValue FROM tReport WHERE cType = vReportType;
	

		
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pDeleteReport` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pDeleteReport`(IN vId BIGINT(20))
BEGIN
	DELETE FROM tReportProperty WHERE cReport=vId;
	DELETE FROM tReportInParam WHERE cReport=vId;
	DELETE FROM tReport WHERE cId=vId;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pExistsAttendanceLog` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pExistsAttendanceLog`(	IN vEmployeeKey VARCHAR(15), 
										IN vMachine BIGINT(20), 
										IN vMarkType BIGINT(20),
										IN vYear INTEGER,
										IN vMonth INTEGER,
										IN vDay INTEGER,
										IN vHour INTEGER,
										IN vMinute INTEGER,
										IN vSecond INTEGER)
BEGIN
	DECLARE vDate DATETIME;
	SET vDate = fToDateTime(vYear, vMonth, vDay, vHour, vMinute, vSecond);
	
	SELECT	count(cId) 
	FROM	tAttendanceLog 
	WHERE	cEmployeeKey=vEmployeeKey AND 
			cMachine=vMachine AND 
			cMarkType=vMarkType	AND 
			cDate=vDate;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pExistsLicense` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pExistsLicense`(IN vEmployeeId BIGINT(20), IN vLicenseCause BIGINT(20), IN vDocument VARCHAR(15), IN vStartDate DATE, IN vEndDate DATE)
BEGIN

	SELECT COUNT(cId) AS counter 
	FROM tLicense 
	WHERE cEmployee=vEmployeeId AND cLicenseCause=vLicenseCause AND cDocument=vDocument AND cStartDate=vStartDate AND cEndDate=vEndDate;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pGetEmployeeInfo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pGetEmployeeInfo`(IN vId BIGINT(20))
BEGIN
	SELECT	e.cId, e.cRut, e.cName, e.cPost, e.cArea, e.cPrivilege, 
			e.cUsername, a.cName AS cAreaName, a.cKey AS cCC,
			IFNULL((SELECT	t.cName
					FROM	tR_EmployeeTurn AS r
					LEFT JOIN tTurn AS t ON r.cTurn = t.cId
					WHERE	r.cEmployee = e.cId
					LIMIT 1
			), 'Diferido') AS cTurnName,
			IFNULL((	SELECT	CONCAT(t.cStartTime, ' - ', t.cEndTime) 
				FROM	tR_EmployeeTurn AS r
				LEFT JOIN tTurnDay AS t ON r.cTurn = t.cTurn
				WHERE	r.cEmployee = e.cId AND cDay = 1 
				LIMIT 1
			),'') AS cHorary
	FROM 	tEmployee AS e
	LEFT JOIN tArea AS a ON e.cArea = a.cId
	WHERE	e.cId = vId;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListAttendance3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListAttendance3`(IN vEmployeeId BIGINT(20), IN vStartDate DATE, IN vEndDate DATE)
BEGIN
	DECLARE vCurrent	DATE;
	DECLARE vStartTime	TIMESTAMP;
	DECLARE vStartMark	TIMESTAMP;
	DECLARE vStartDiffI	INTEGER;
	DECLARE vStartDiffM	VARCHAR(10);
	
	DECLARE vLunchMark	TIMESTAMP;
	DECLARE vReturnMark	TIMESTAMP;
	
	DECLARE vEndTime	TIMESTAMP;
	DECLARE vEndMark	TIMESTAMP;
	DECLARE vEndDiffI	INTEGER;
	DECLARE vEndDiffM	VARCHAR(10);
	
	DECLARE vComment	VARCHAR(120) DEFAULT '';
	DECLARE vMachine	BIGINT(20);
	
	
	DECLARE vTurnDayId		BIGINT(20);
	DECLARE vEmployeeKey	VARCHAR(25);
	DECLARE vRUT			VARCHAR(12);

	
	DECLARE vUpperLimit		DATETIME;
	DECLARE vLowerLimit		DATETIME;
	
	DECLARE vTolerance		INTEGER;
	DECLARE vBusinessDay	BOOLEAN DEFAULT FALSE;
	DECLARE vHoursWorkday	INTEGER;
	DECLARE vFlexible		BOOLEAN;
	
	SET vTolerance = fGetTolerance();
	SET vHoursWorkday = fGetHoursWorkday();
	
	DROP TEMPORARY TABLE IF EXISTS tAttendance_temp;
	CREATE TEMPORARY TABLE tAttendance_temp(
		cId			BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
		cDate		DATE NOT NULL,
		
		cStartTime	TIMESTAMP NULL,
		cStartMark	TIMESTAMP NULL,
		cStartDiffI	INTEGER,
		cStartDiffM	VARCHAR(10),
		
		cLunchMark	TIMESTAMP NULL,
		cReturnMark	TIMESTAMP NULL,
		
		cEndTime	TIMESTAMP NULL,
		cEndMark	TIMESTAMP NULL,
		cEndDiffI	INTEGER,
		cEndDiffM	VARCHAR(10),
		
		cComment	VARCHAR(120),
		cMachine	BIGINT(20)
    ) Engine=memory;
	
    SET vCurrent = vStartDate;
    SET vEndDate = DATE_ADD(vEndDate, INTERVAL 1 DAY);
    
	SELECT cKey, cRUT INTO vEmployeeKey, vRUT 
	FROM tEmployee 
	WHERE cId = vEmployeeId;
	
	WHILE vCurrent != vEndDate DO
		SET vFlexible = fIsFlexible(vCurrent, vEmployeeId);
		SET vComment = '';
		IF(vFlexible IS NULL) THEN
			SET vComment = fAppendComment(vComment, 'Sin turno');
			SET vStartTime = NULL;
			SET vStartMark = NULL;
			SET vStartDiffI = NULL;
			SET vStartDiffM = NULL;
			SET vLunchMark = NULL;
			SET vReturnMark = NULL;
			SET vEndTime = NULL;
			SET vEndMark = NULL;
			SET vEndDiffI = NULL;
			SET vEndDiffM = NULL;
			SET vMachine = NULL;
		ELSE
			IF(vFlexible) THEN
				SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, NULL, TRUE, NULL);

				SET vTurnDayId = fMarkAndUserToTurnDayId4(vStartMark, vEmployeeId, vTolerance, TRUE);
				SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);
			ELSE
				SET vTurnDayId = fMarkAndUserToTurnDayId4(vCurrent, vEmployeeId, vTolerance, FALSE);
				SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);

				SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, vBusinessDay, FALSE, vTurnDayId);
			END IF;
			








			




			SET vStartTime = fStartTime(vStartMark, vBusinessDay, vTurnDayId);


			SET vStartDiffI = fExtraTimeAsMins5(vStartMark, vStartTime, TRUE);

			SET vStartDiffM = fExtraTime3(vStartDiffI);

			SET vEndMark = fEndMark(vEmployeeKey, vStartMark, vHoursWorkday, vCurrent, vTolerance, vBusinessDay, vTurnDayId);

			SET vEndTime = fEndTime(vEndMark, vStartMark, vBusinessDay, vTurnDayId);


			SET vLunchMark = fLunchMark(vEmployeeKey, vStartMark, vHoursWorkday);
			
			SET vReturnMark = fReturnMark(vEmployeeKey, vStartMark, vHoursWorkday, vLunchMark);
			SET vEndDiffI = fExtraTimeAsMins5(vEndMark, vEndTime, FALSE);
			SET vEndDiffM = fExtraTime3(vEndDiffI);
			SET vMachine = (SELECT cMachine FROM tAttendanceLog WHERE cEmployeeKey = vEmployeeKey AND DATE(cDate) = DATE(vCurrent) AND cMarkType=1 LIMIT 1);
			SET vComment = fGetComment3(vCurrent, vEmployeeId, vTurnDayId, vBusinessDay, vStartMark, vEndMark);
	
			IF(NOT vBusinessDay) THEN
				SET vStartTime = NULL;
				SET vEndTime = NULL;
			END IF;
		
		END IF;
		
		INSERT INTO tAttendance_temp
				(cDate   , cStartTime, cStartMark, cStartDiffI, cStartDiffM, 
				cLunchMark, cReturnMark, 
				cEndTime, cEndMark, cEndDiffI, cEndDiffM,
				cMachine, cComment)
		VALUES	(vCurrent, vStartTime, vStartMark, vStartDiffI, vStartDiffM,			 
				vLunchMark, vReturnMark, 
				vEndTime, vEndMark, vEndDiffI, vEndDiffM,
				vMachine, vComment);

		SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 DAY);
	END WHILE;
	
	SELECT  cId, 
			cDate, 
			IFNULL(TIME(cStartTime),'') AS cStartTime, 
			IFNULL(TIME(cStartMark),'') AS cStartMark, 
			fStartDiffInSelect(cStartDiffI, cStartMark, cEndMark) AS cStartDiffI, 
			IFNULL(cStartDiffI, 0) AS cStartDiffI2, 
			IFNULL(cStartDiffM, '') AS cStartDiffM, 
			IFNULL(TIME(cLunchMark), '') AS cLunchMark, 
			IFNULL(TIME(cReturnMark), '') AS cReturnMark, 
			IFNULL(TIME(cEndTime), '') AS cEndTime, 
			IFNULL(TIME(cEndMark), '') AS cEndMark, 
			fEndDiffInSelect(cEndDiffI, cStartMark, cEndMark) AS cEndDiffI,
			IFNULL(cEndDiffI,0) AS cEndDiffI2, 
			IFNULL(cEndDiffM,'') AS cEndDiffM, 
			cComment, 
			IFNULL(cMachine,'') AS cMachine,
			fDayOfWeek3(cDate) AS cDayOfWeek, 
			vRUT AS cRUT  
	FROM tAttendance_temp;
	
	DROP TEMPORARY TABLE tAttendance_temp;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListAttendanceAsExcel3` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListAttendanceAsExcel3`(IN vStartDate DATE, IN vEndDate DATE)
BEGIN
	DECLARE vCurrent	DATE;
	DECLARE vStartTime	TIMESTAMP;
	DECLARE vStartMark	TIMESTAMP;
	DECLARE vStartDiffI	INTEGER;
	DECLARE vStartDiffM	VARCHAR(10);
	
	DECLARE vLunchMark	TIMESTAMP;
	DECLARE vReturnMark	TIMESTAMP;
	
	DECLARE vEndTime	TIMESTAMP;
	DECLARE vEndMark	TIMESTAMP;
	DECLARE vEndDiffI	INTEGER;
	DECLARE vEndDiffM	VARCHAR(10);
	
	DECLARE vComment	VARCHAR(120) DEFAULT '';
	DECLARE vMachine	BIGINT(20);
	
	DECLARE vTurnDayId	BIGINT(20);
	DECLARE vEmployeeId	BIGINT(20);
	DECLARE vEmployeeKey	VARCHAR(15);
	DECLARE vRUT		VARCHAR(12);


	
	
	DECLARE vName	VARCHAR(90);
	DECLARE vArea	VARCHAR(90);	
	DECLARE vCC		VARCHAR(10);
	DECLARE vTurn	VARCHAR(20);
	DECLARE vStart  VARCHAR(10);
	DECLARE vEnd	VARCHAR(10);
	

	DECLARE vTolerance		INTEGER;
	DECLARE vBusinessDay	BOOLEAN DEFAULT FALSE;
	DECLARE vHoursWorkday	INTEGER;
	DECLARE vFlexible		BOOLEAN;
	
	
	DECLARE vDone BOOLEAN DEFAULT FALSE;
	DECLARE cursorEmployee CURSOR FOR
		SELECT a.cId AS cId, a.cKey AS cKey, a.cRUT AS cRUT, a.cName AS cName, b.cName AS cArea, b.cKey AS cCC
		FROM tEmployee AS a
		LEFT JOIN tArea AS b on a.cArea = b.cId

		ORDER BY cId;
	DECLARE CONTINUE HANDLER FOR NOT FOUND SET vDone = TRUE;

	SET vTolerance = fGetTolerance();
	SET vHoursWorkday = fGetHoursWorkday();
	
	
	DROP TABLE IF EXISTS tAttendance_temp;
	CREATE TEMPORARY TABLE tAttendance_temp (
		cId			BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
		cDate		DATE NOT NULL,
		
		cStartTime	TIMESTAMP NULL,
		cStartMark	TIMESTAMP NULL,
		cStartDiffI	INTEGER,
		cStartDiffM	VARCHAR(10),
		
		cLunchMark	TIMESTAMP NULL,
		cReturnMark	TIMESTAMP NULL,		
		
		cEndTime	TIMESTAMP NULL,
		cEndMark	TIMESTAMP NULL,
		cEndDiffI	INTEGER,
		cEndDiffM	VARCHAR(10),
		
		cComment	VARCHAR(120),
		cMachine	BIGINT(20),

		cRut		varchar(12),
		cName		varchar(90),
		cArea		VARCHAR(90),
		cCC			VARCHAR(10),
		cTurn		VARCHAR(20),
		cStart		VARCHAR(10),
		cEnd		VARCHAR(10)		
    ) ENGINE=innoDB;
	

    
    
    SET vEndDate = DATE_ADD(vEndDate, INTERVAL 1 DAY);
    
    OPEN cursorEmployee;
    cursorEmployee_loop: LOOP
    	FETCH cursorEmployee INTO vEmployeeId, vEmployeeKey, vRUT, vName, vArea, vCC;
    	
    	IF(vDone) THEN 
			LEAVE cursorEmployee_loop;
		END IF;
    	
	    SET vCurrent = vStartDate;
		WHILE vCurrent != vEndDate DO

			SET vFlexible = fIsFlexible(vCurrent, vEmployeeId);
			SET vComment = '';
			IF(vFlexible IS NULL) THEN
				SET vComment = fAppendComment(vComment, 'Sin turno');
				SET vStartTime = NULL;
				SET vStartMark = NULL;
				SET vStartDiffI = NULL;
				SET vStartDiffM = NULL;
				SET vLunchMark = NULL;
				SET vReturnMark = NULL;
				SET vEndTime = NULL;
				SET vEndMark = NULL;
				SET vEndDiffI = NULL;
				SET vEndDiffM = NULL;
				SET vMachine = NULL;
				
			ELSE
				IF(vFlexible) THEN
					SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, NULL, TRUE, NULL);
					SET vTurnDayId = fMarkAndUserToTurnDayId4(vStartMark, vEmployeeId, vTolerance, TRUE);
					SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);
				ELSE
					SET vTurnDayId = fMarkAndUserToTurnDayId4(vCurrent, vEmployeeId, vTolerance, FALSE);
					SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);
					SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, vBusinessDay, FALSE, vTurnDayId);
				END IF;

				SET vStartTime = fStartTime(vStartMark, vBusinessDay, vTurnDayId);	
				SET vStartDiffI = fExtraTimeAsMins5(vStartMark, vStartTime, TRUE);
				SET vStartDiffM = fExtraTime3(vStartDiffI);
				
				SET vEndMark = fEndMark(vEmployeeKey, vStartMark, vHoursWorkday, vCurrent, vTolerance, vBusinessDay, vTurnDayId);
				SET vEndTime = fEndTime(vEndMark, vStartMark, vBusinessDay, vTurnDayId);
				
				SET vLunchMark = fLunchMark(vEmployeeKey, vStartMark, vHoursWorkday);
				
				SET vReturnMark = fReturnMark(vEmployeeKey, vStartMark, vHoursWorkday, vLunchMark);
				SET vEndDiffI = fExtraTimeAsMins5(vEndMark, vEndTime, FALSE);
				SET vEndDiffM = fExtraTime3(vEndDiffI);
				SET vMachine = (SELECT cMachine FROM tAttendanceLog WHERE cEmployeeKey = vEmployeeKey AND DATE(cDate) = DATE(vCurrent) AND cMarkType=1 LIMIT 1);
				SET vComment = fGetComment3(vCurrent, vEmployeeId, vTurnDayId, vBusinessDay, vStartMark, vEndMark);
				
				
			
				IF(NOT vBusinessDay) THEN
					SET vStartTime = NULL;
					SET vEndTime = NULL;
				END IF;
				
				INSERT INTO tAttendance_temp
						(cDate   , cStartTime, cStartMark, cStartDiffI, cStartDiffM, 
						cLunchMark, cReturnMark, 
						cEndTime, cEndMark, cEndDiffI, cEndDiffM,
						cMachine, cComment, 
						cRut, cName, cArea, cCC, cTurn, cStart, cEnd)
				VALUES	(vCurrent, vStartTime, TIME(vStartMark), IFNULL(vStartDiffI, 0), vStartDiffM,			 
						vLunchMark, vReturnMark, 
						vEndTime, TIME(vEndMark), IFNULL(vEndDiffI,0), vEndDiffM,
						vMachine, vComment, 
						vRut, vName, vArea, vCC, vTurn, vStart, vEnd);
			END IF;
			SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 DAY);
		END WHILE;

	END LOOP cursorEmployee_loop;
	CLOSE cursorEmployee;
	
	SELECT
		cId					AS 'Item',
		cRut				AS 'RUT',
		cName				AS 'Nombre',
		cArea				AS '√Årea',
		cCC					AS 'C.Costo',

		fDayOfWeek3(cDate)	AS 'D√≠a',
		cDate				AS 'Fecha',
		TIME(cStartTime)	AS 'Entrada',
		TIME(cStartMark)	AS 'Marca Entrada',
		cStartDiffI			AS 'Extra/Atraso',
		cStartDiffM			AS 'Diferencia',
		
		TIME(cLunchMark)	AS 'Salida a Colaci√≥n',
		TIME(cReturnMark)	AS 'Regreso de Colaci√≥n',
		
		TIME(cEndTime)		AS 'Salida',
		TIME(cEndMark)		AS 'Marca Salida',
		cEndDiffI			AS 'Extra/Atraso',
		cEndDiffM			AS 'Diferencia',
		
		cComment			AS 'Comentarios',
		cMachine			AS 'M√°quina',
		cTurn				AS 'Turno',
		TIME(cStartTime)	AS 'Entrada Turno',
		TIME(cEndTime)		AS 'Salida Turno'
	FROM tAttendance_temp;
	
	DROP TABLE IF EXISTS tAttendance_temp;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListBoss` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListBoss`()
BEGIN
	SELECT	cId, cKey, cRut, cName, cPost, cArea, cPrivilege, cEnabled, cUsername 
	FROM 	tEmployee
	WHERE	cId IN (SELECT DISTINCT(cBoss) FROM tEmployee WHERE NOT cBoss IS NULL);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListDetailReport` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListDetailReport`(IN vBoss BIGINT(20), IN vEmployees VARCHAR(1000), IN vStartMonth INT, IN vStartYear INT, 
									IN vEndMonth INT, IN vEndYear INT)
BEGIN
	DECLARE vCommaPosition INTEGER DEFAULT 0;
	DECLARE vEmployee BIGINT(20);
	DECLARE vStart DATE;
	DECLARE vEnd DATE;
	

	
	SET vStart = DATE_FORMAT(CONCAT_WS('-', vStartYear, vStartMonth, '1'), '%Y-%m-%d');
	SET vEnd = DATE_FORMAT(CONCAT_WS('-', vEndYear, vEndMonth, '1'), '%Y-%m-%d');
	SET vEnd = LAST_DAY(vEnd);
	
	WHILE (LENGTH(vEmployees)>0) DO
		SET vCommaPosition = INSTR(vEmployees, ',');
		
		IF(vCommaPosition=0) THEN
			SET vEmployee = CAST(vEmployees AS UNSIGNED);
			SET vEmployees = '';
		ELSE
			SET vEmployee = CAST(SUBSTR(vEmployees,1,vCommaPosition-1) AS UNSIGNED);
			SET vEmployees = RIGHT(vEmployees, LENGTH(vEmployees)-(LENGTH(vEmployee)+1));
		END IF;
		

		call pListAttendance3(vEmployee, vStart, vEnd);
	END WHILE;
	



	
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListEmployee` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListEmployee`()
BEGIN
	SELECT	cId, cKey, cRut, cName, cPost, cArea, cPrivilege, cEnabled, cUsername 
	FROM 	tEmployee;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListLater` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListLater`(IN vStartDate DATE, IN vEndDate DATE)
BEGIN
	DECLARE vCurrent	DATE;
	DECLARE vStartTime	TIMESTAMP;
	DECLARE vStartMark	TIMESTAMP;
	DECLARE vStartDiffI	INTEGER;
	DECLARE vStartDiffM	VARCHAR(10);
	
	DECLARE vLunchMark	TIMESTAMP;
	DECLARE vReturnMark	TIMESTAMP;
	
	DECLARE vEndTime	TIMESTAMP;
	DECLARE vEndMark	TIMESTAMP;
	DECLARE vEndDiffI	INTEGER;
	DECLARE vEndDiffM	VARCHAR(10);
	
	DECLARE vComment	VARCHAR(120) DEFAULT '';
	DECLARE vMachine	BIGINT(20);
	
	DECLARE vTurnDayId	BIGINT(20);
	DECLARE vEmployeeId	BIGINT(20);
	DECLARE vEmployeeKey	VARCHAR(25);
	DECLARE vRUT		VARCHAR(12);
	DECLARE vMins		INTEGER;

	DECLARE vBusinessDay	BOOLEAN DEFAULT FALSE;
	DECLARE vTolerance		INTEGER;
	DECLARE vHoursWorkday	INTEGER;

	
	DECLARE vName	VARCHAR(90);
	DECLARE vArea	VARCHAR(90);	
	DECLARE vCC		VARCHAR(10);
	DECLARE vTurn	VARCHAR(20);
	DECLARE vStart  VARCHAR(10);
	DECLARE vEnd	VARCHAR(10);
	

	DECLARE vFlexible		BOOLEAN;
	
	DECLARE vDone BOOLEAN DEFAULT FALSE;
	DECLARE cursorEmployee CURSOR FOR
		SELECT a.cId AS cId, a.cKey AS cKey, a.cRUT AS cRUT, a.cName AS cName, b.cName AS cArea, b.cKey AS cCC
		FROM tEmployee AS a
		LEFT JOIN tArea AS b on a.cArea = b.cId;

	DECLARE CONTINUE HANDLER FOR NOT FOUND SET vDone = TRUE;
	
	SET vTolerance = fGetTolerance();
	SET vHoursWorkday = fGetHoursWorkday();
	
	DROP TEMPORARY TABLE IF EXISTS tAttendance_temp;
	CREATE TEMPORARY TABLE tAttendance_temp (
		cId			BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
		cDate		DATE NOT NULL,
		
		cStartTime	TIMESTAMP NULL,
		cStartMark	TIMESTAMP NULL,
		cStartDiffI	INTEGER,
		cStartDiffM	VARCHAR(10),
		
		cLunchMark	TIMESTAMP NULL,
		cReturnMark	TIMESTAMP NULL,		
		
		cEndTime	TIMESTAMP NULL,
		cEndMark	TIMESTAMP NULL,
		cEndDiffI	INTEGER,
		cEndDiffM	VARCHAR(10),
		
		cComment	VARCHAR(120),
		cMachine	BIGINT(20),

		cRut		varchar(12),
		cName		varchar(90),
		cArea		VARCHAR(90),
		cCC			VARCHAR(10),
		cTurn		VARCHAR(20),
		cStart		VARCHAR(10),
		cEnd		VARCHAR(10)		
    ) ENGINE=memory;
	
    SET vEndDate = DATE_ADD(vEndDate, INTERVAL 1 DAY);
    
    OPEN cursorEmployee;
    cursorEmployee_loop: LOOP
    	FETCH cursorEmployee INTO vEmployeeId, vEmployeeKey, vRUT, vName, vArea, vCC;
    	
    	IF(vDone) THEN 
			LEAVE cursorEmployee_loop;
		END IF;
    	
	    SET vCurrent = vStartDate;
		
		WHILE vCurrent != vEndDate DO
			SET vFlexible = fIsFlexible(vCurrent, vEmployeeId);
			SET vComment = '';
			IF(vFlexible IS NULL) THEN
				SET vComment = fAppendComment(vComment, 'Sin turno');			
			ELSE
				IF(vFlexible) THEN
					SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, NULL, TRUE, NULL);
					SET vTurnDayId = fMarkAndUserToTurnDayId4(vStartMark, vEmployeeId, vTolerance, TRUE);
					SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);
				ELSE
					SET vTurnDayId = fMarkAndUserToTurnDayId4(vCurrent, vEmployeeId, vTolerance, FALSE);
					SET vBusinessDay =  (SELECT cBusinessDay FROM tTurnDay WHERE cId = vTurnDayId);
					SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, vBusinessDay, FALSE, vTurnDayId);
				END IF;
		
				SET vStartTime = fStartTime(vStartMark, vBusinessDay, vTurnDayId);
				SET vStartDiffI = fExtraTimeAsMins5(vStartMark, vStartTime, TRUE);
				IF(vStartDiffI < 0) THEN
					SET vStartDiffM = fExtraTime3(vStartDiffI);
					SET vEndMark = fEndMark(vEmployeeKey, vStartMark, vHoursWorkday, vCurrent, vTolerance, vBusinessDay, vTurnDayId);
					SET vEndTime = fEndTime(vEndMark, vStartMark, vBusinessDay, vTurnDayId);
					
					SET vLunchMark = fLunchMark(vEmployeeKey, vStartMark, vHoursWorkday);
					
					SET vReturnMark = fReturnMark(vEmployeeKey, vStartMark, vHoursWorkday, vLunchMark);
					SET vEndDiffI = fExtraTimeAsMins5(vEndMark, vEndTime, FALSE);
					SET vEndDiffM = fExtraTime3(vEndDiffI);
					SET vMachine = (SELECT cMachine FROM tAttendanceLog WHERE cEmployeeKey = vEmployeeKey AND DATE(cDate) = DATE(vCurrent) AND cMarkType=1 LIMIT 1);
					SET vComment = fGetComment3(vCurrent, vEmployeeId, vTurnDayId, vBusinessDay, vStartMark, vEndMark);
			
					IF(NOT vBusinessDay) THEN
						SET vStartTime = NULL;
						SET vEndTime = NULL;
					END IF;
					
					INSERT INTO tAttendance_temp
							(cDate   , cStartTime, cStartMark, cStartDiffI, cStartDiffM, 
							cLunchMark, cReturnMark, 
							cEndTime, cEndMark, cEndDiffI, cEndDiffM,
							cMachine, cComment, 
							cRut, cName, cArea, cCC, cTurn, cStart, cEnd)
					VALUES	(vCurrent, vStartTime, TIME(vStartMark), IFNULL(vStartDiffI, 0), vStartDiffM,			 
							vLunchMark, vReturnMark, 
							vEndTime, TIME(vEndMark), IFNULL(vEndDiffI,0), vEndDiffM,
							vMachine, vComment, 
							vRut, vName, vArea, vCC, vTurn, vStart, vEnd);
				END IF;
				
			END IF;
			SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 DAY);
		END WHILE;

	END LOOP cursorEmployee_loop;
	CLOSE cursorEmployee;
	
	SELECT 
		cId														AS 'Item',
		cDate													AS 'Fecha',
		IFNULL(TIME(cStartTime),'')								AS 'Entrada',
		IFNULL(TIME(cStartMark),'')								AS 'Marca Entrada',
		fStartDiffInSelect(cStartDiffI, cStartMark, cEndMark)	AS 'Extra/Atraso',
		IFNULL(cStartDiffM, '')									AS 'Diferencia',

		IFNULL(TIME(cLunchMark), '')							AS 'Salida a Colaci√≥n',
		IFNULL(TIME(cReturnMark), '')							AS 'Regreso de Colaci√≥n',

		IFNULL(TIME(cEndTime), '')								AS 'Salida',
		IFNULL(TIME(cEndMark), '')								AS 'Marca Salida',

		fEndDiffInSelect(cEndDiffI, cStartMark, cEndMark)		AS 'Extra/Atraso',
		IFNULL(cEndDiffM,'')									AS 'Diferencia',

		cComment												AS 'Comentarios',
		IFNULL(cMachine,'')										AS 'M√°quina',
		
		cRut													AS 'RUT',
		cName													AS 'Nombre',
		cArea													AS '√Årea',
		cCC														AS 'C.Costo',
		IFNULL(cTurn,'')										AS 'Turno',
			
		fDayOfWeek3(cDate)										AS 'D√≠a'
	FROM tAttendance_temp;
	
	DROP TABLE IF EXISTS tAttendance_temp;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListMarkOfEmployee` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListMarkOfEmployee`(IN vEmployeeId BIGINT(20), IN vStartDate DATE, 
									IN vEndDate DATE)
BEGIN
	SELECT	tAttendanceLog.cId					AS 'cId',
			tAttendanceLog.cMachine				AS 'cMachineId', 
			tMachine.cName						AS 'cMachineName', 
			tAttendanceLog.cDate				AS 'cDate',
			fDayOfWeek3(tAttendanceLog.cDate)	AS 'cWeekDay',
			tAttendanceLog.cMarkType			AS 'cMarkTypeId', 
			tMarkType.cName						AS 'cMarkTypeName',
			IF(tAttendanceModify.cId IS NULL,'','N')				
												AS 'cType'
	FROM 	tAttendanceLog
	LEFT JOIN tEmployee ON tAttendanceLog.cEmployeeKey = tEmployee.cKey
	LEFT JOIN tMachine ON tAttendanceLog.cMachine = tMachine.cId
	LEFT JOIN tMarkType ON tAttendanceLog.cMarkType = tMarkType.cId
	LEFT JOIN tAttendanceModify ON tAttendanceLog.cId = tAttendanceModify.cAttendanceLog
	WHERE	tEmployee.cId = vEmployeeId AND DATE(cDate) BETWEEN DATE(vStartDate) AND DATE(vEndDate)
	ORDER BY cDate DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListReportInputParameter` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListReportInputParameter`(IN vReport BIGINT(20))
BEGIN
	SELECT 
		A.cId AS cId,
		A.cReport AS cReport,
		A.cName AS cName,
		A.cLabel AS cLabel,
		A.cOrder AS cOrder,
		B.cId AS cTypeId,
		B.cKey AS cTypeKey,
		B.cName AS cTypeName,
		B.cHTMLFile AS cTypeHTMLFile, 
		B.cSource AS cTypeSource,
		B.cJavaType AS cJavaType
	FROM tReportInParam AS A 
	LEFT JOIN tReportParamType AS B ON A.cType = B.cId
	WHERE cReport = vReport
	ORDER BY cOrder;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListReportParams` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListReportParams`(IN vIdReport BIGINT(20))
BEGIN	
	SELECT	cId
	FROM	tReportInParam
	WHERE	cReport = vIdReport
	ORDER BY cOrder;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListReportPropertyByReportId` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListReportPropertyByReportId`(IN vReportId BIGINT(20))
BEGIN
	DECLARE vType BIGINT(20);
	
	SELECT cType INTO vType FROM tReport WHERE cId = vReportId;
	
	SELECT 
		b.cId 			AS cPropertyId, 
		b.cPropertyType	AS cPropertyType, 
		b.cReport		AS cPropertyReport, 
		b.cValue		AS cPropertyValue,
		c.cId			AS cPropertyTypeId, 
		c.cKey			AS cPropertyTypeKey, 
		c.cName			AS PropertyTypeName
	FROM tR_ReportPropertyType_ReportType AS a
	LEFT JOIN tReportProperty AS b ON a.cReportPropertyType = b.cPropertyType AND b.cReport = vReportId
	LEFT JOIN tReportPropertyType AS c ON a.cReportPropertyType = c.cId 
	WHERE a.cReportType = vType;
	
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pListSummaryReport` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pListSummaryReport`(IN vBoss BIGINT(20), IN vEmployees VARCHAR(1000), IN vStartMonth INT, IN vStartYear INT, 
									IN vEndMonth INT, IN vEndYear INT)
BEGIN
	DECLARE vCurrent			DATE;
	DECLARE vLast				DATE;
	DECLARE vFirst				DATE;
	DECLARE vFirstMonth			DATE;
	DECLARE vLastMonth			DATE;
	DECLARE vBusinessDayCount	INTEGER DEFAULT 0;
	DECLARE vMarkCount			INTEGER DEFAULT 0;
	DECLARE vDelayCount			INTEGER DEFAULT 0;
	DECLARE vExtraTimeAM		INTEGER DEFAULT 0;
	DECLARE vExtraTimePM		INTEGER DEFAULT 0;
	DECLARE vI					INTEGER;
	DECLARE vJ					INTEGER;
	DECLARE vMax				INTEGER;
	DECLARE vEmployeeKey		VARCHAR(15);
	DECLARE vEmployeeId			BIGINT(20);
	DECLARE vFlexible			BOOLEAN;
	DECLARE vBusinessDay		BOOLEAN;
	DECLARE vTurnDayId			BIGINT(20);
	DECLARE vTolerance			INTEGER;
	DECLARE vHoursWorkday		INTEGER;
	DECLARE vHoliday			BOOLEAN;
	DECLARE vStartMark			DATETIME;
	DECLARE vEndMark			DATETIME;
	DECLARE vStartTime			DATETIME;
	DECLARE vEndTime			DATETIME;
	DECLARE vStartDiffI			INTEGER;
	DECLARE vEndDiffI			INTEGER;
	



	
	DROP TEMPORARY TABLE IF EXISTS tTemp;
	CREATE TEMPORARY TABLE tTemp (
		cId 				BIGINT(20) NOT NULL auto_increment,
		cStart				DATE  NOT NULL,
		cEnd				DATE  NOT NULL,
		cEmployeeKey		VARCHAR(15) NULL,
		cEmployeeId			BIGINT(20),
		cEmployeeName		VARCHAR(50),
		cBusinessDayCount	INTEGER DEFAULT 0,
		cMarkCount			INTEGER DEFAULT 0,
		cDelayCount			INTEGER DEFAULT 0,
		cExtraTimeAM		INTEGER DEFAULT 0,
		cExtraTimePM		INTEGER DEFAULT 0,
		PRIMARY KEY (cId)
    ) Engine=memory;

	SET vFirst = DATE(CONCAT(vStartYear, '-', vStartMonth, '-01'));
	SET vCurrent = vFirst;
	SET vLast = LAST_DAY(DATE(CONCAT(vEndYear, '-', vEndMonth, '-01')));
	SET vTolerance = fGetTolerance();
	SET vHoursWorkday = fGetHoursWorkday();
	
    
	WHILE vCurrent <= vLast DO


		SET @vDynamicSQL = CONCAT('INSERT INTO tTemp(cStart, cEnd, cEmployeeKey, cEmployeeId, cEmployeeName) SELECT ?, LAST_DAY(?), cKey, cId, cName FROM tEmployee WHERE cId IN (', vEmployees, ') ORDER BY cName;');


		SET @vCurrent = vCurrent;

		
		PREPARE smpt FROM @vDynamicSQL;
		EXECUTE smpt USING @vCurrent, @vCurrent;
		DEALLOCATE PREPARE smpt;



		SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 MONTH);
	END WHILE;
	


	
    
	SET vI = 1;
	SELECT MAX(cId) INTO vMax FROM tTemp;  
	WHILE (vI <= vMax) DO
		SELECT
			cEmployeeId, cEmployeeKey, cStart, cEnd INTO vEmployeeId, vEmployeeKey, vFirstMonth, vLastMonth
		FROM	tTemp
		WHERE	cId = vI;
		
		SET vBusinessDayCount := 0;
		SET vMarkCount := 0;
		SET vDelayCount := 0;
		SET vExtraTimeAM := 0;
		SET vExtraTimePM := 0;
		SET vCurrent = vFirstMonth;
		WHILE vCurrent <= vLastMonth DO
			SET vFlexible := fIsFlexible(vCurrent, vEmployeeId); 
			IF(vFlexible IS NULL OR vFlexible = TRUE) THEN
				DELETE FROM tTemp WHERE cId = vI;
				SET vCurrent = vLastMonth;
			ELSE
				SET vTurnDayId := fMarkAndUserToTurnDayId4(vCurrent, vEmployeeId, vTolerance, FALSE);				
				SET vBusinessDay := fIsBusinessDay(vTurnDayId);
				SET vHoliday := fIsHoliday(vCurrent);

				SET vStartMark = fStartMark(vEmployeeKey, vTolerance, vCurrent, vBusinessDay, FALSE, vTurnDayId);
				SET vStartTime = fStartTime(vStartMark, vBusinessDay, vTurnDayId);				
				SET vStartDiffI = fExtraTimeAsMins5(vStartMark, vStartTime, TRUE);
				SET vStartDiffI = IFNULL(vStartDiffI, 0);

				SET vEndMark = fEndMark(vEmployeeKey, vStartMark, vHoursWorkday, vCurrent, vTolerance, vBusinessDay, vTurnDayId);
				SET vEndTime = fEndTime(vEndMark, vStartMark, vBusinessDay, vTurnDayId);
				SET vEndDiffI = fExtraTimeAsMins5(vEndMark, vEndTime, FALSE);
				SET vEndDiffI = IFNULL(vEndDiffI, 0);
				
				IF(vBusinessDay AND NOT vHoliday) THEN
					SET vBusinessDayCount = vBusinessDayCount + 1;
				END IF;
				
				IF(NOT vStartMark IS NULL AND NOT vEndMark IS NULL) THEN 
					SET vMarkCount := vMarkCount + 1;
				END IF;
				
				IF(vStartDiffI<0) THEN
					SET vDelayCount := vDelayCount + 1;
				END IF;
				
				SET vExtraTimeAM := vExtraTimeAM + vStartDiffI;
				SET vExtraTimePM := vExtraTimePM + vEndDiffI;
				



				
			END IF;

			SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 DAY);
		END WHILE;
		
		UPDATE tTemp SET 
			cBusinessDayCount = vBusinessDayCount,
			cMarkCount = vMarkCount,
			cDelayCount = vDelayCount,
			cExtraTimeAM = vExtraTimeAM,
			cExtraTimePM = vExtraTimePM
		WHERE cId = vI;
		
		SET vI = vI + 1;
	END WHILE;
	
    
	SET vCurrent = DATE(CONCAT(vStartYear, '-', vStartMonth, '-01'));
	WHILE vCurrent <= vLast DO
		SELECT	cStart											AS 'Inicio', 
				cEnd											AS 'Termino',
				cEmployeeName									AS 'Nombre Empleado',

				CONCAT(cMarkCount, '/', cBusinessDayCount)		AS 'Marcas realizadas',
				ROUND((cMarkCount*100)/cBusinessDayCount, 0)	AS 'Cumplimiento %',
				cDelayCount										AS 'Total atrasos',
				cExtraTimeAM									AS 'Minutos Extras AM',
				cExtraTimePM									AS 'Minutos Extras PM'
		FROM tTemp 
		WHERE cStart = vCurrent;
		
		SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 MONTH);
	END WHILE;

	
	DROP TEMPORARY TABLE IF EXISTS tTemp;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pOvertime` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pOvertime`(IN vMonth INTEGER, IN vYear INTEGER, IN vArea BIGINT(20))
BEGIN
	
	
	CREATE TEMPORARY TABLE tOvertime_temp(
		cId			BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
		cEmployeeId	BIGINT(20) NOT NULL,
		
		cKey		VARCHAR(25),
		cRut		VARCHAR(11),
		cName		VARCHAR(50),
		
		cOvertimeI	INTEGER,
		cOvertimeM	VARCHAR(9)
    ) Engine=memory;
	
	INSERT	INTO tOvertime_temp(cEmployeeId, cKey, cRut, cName)
	SELECT	cId, cKey, cRut, cName
	FROM	tEmployee
	WHERE	cKey IN (SELECT DISTINCT(cEmployeeKey) 
					FROM tAttendanceLog 
					WHERE MONTH(cDate) = vMonth AND YEAR(cDate) = vYear) AND cArea = vArea;
					
	SELECT * FROM tAttendanceLog 
	WHERE MONTH(cDate) = vMonth AND YEAR(cDate) = vYear AND cEmployeeKey = '299';
					

	
	SELECT * FROM tOvertime_temp;
	DROP TEMPORARY TABLE tOvertime_temp;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pReadWeeksOfMonth` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pReadWeeksOfMonth`(IN vMonth INTEGER, IN vYear INTEGER)
BEGIN
	DECLARE vCurrent	DATE;
	DECLARE vLast		DATE;
	DECLARE vFirst		DATE;
	DECLARE vFirstLoop	BOOLEAN DEFAULT TRUE;
	DECLARE vMonday		DATE; 
	DECLARE vSunday		DATE; 
	
	SET vFirst = DATE(CONCAT(vYear, '-', vMonth, '-01'));
	SET vCurrent = vFirst;
	SET vLast = LAST_DAY(vFirst);
	
	DROP TEMPORARY TABLE IF EXISTS tWeek;
	CREATE TEMPORARY TABLE tWeek (
		cStart	DATE  NOT NULL,
		cEnd	DATE  NOT NULL
    ) Engine=memory;
	
	WHILE vCurrent <= vLast DO
		IF(vFirstLoop) THEN
			SET vMonday = vCurrent;
			SET vFirstLoop = FALSE;
		END IF;
	
		IF(DAYOFWEEK(vCurrent)=1) THEN 
			SET vSunday = vCurrent;
		ELSE
			IF(DAYOFWEEK(vCurrent)=2) THEN
				SET vMonday = vCurrent;
			END IF;
		END IF;
		
		IF(vCurrent = vLast) THEN
			SET vSunday = vCurrent;
		END IF;
		
		IF((IFNULL(vMonday, 0) != 0 AND IFNULL(vSunday, 0) != 0) OR vCurrent = vLast) THEN
			INSERT INTO tWeek(cStart, cEnd) VALUES(vMonday, vSunday);
			SET vMonday = NULL;
			SET vSunday = NULL;
		END IF;
		
		SET vCurrent = DATE_ADD(vCurrent, INTERVAL 1 DAY);
	END WHILE;

	SELECT cStart, cEnd FROM tWeek;
	
	DROP TEMPORARY TABLE IF EXISTS tWeek;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pSaveAttendanceLog` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pSaveAttendanceLog`(	IN vEmployeeKey VARCHAR(15), 
										IN vMachine BIGINT(20), 
										IN vMarkType BIGINT(20),
										IN vYear INTEGER,
										IN vMonth INTEGER,
										IN vDay INTEGER,
										IN vHour INTEGER,
										IN vMinute INTEGER,
										IN vSecond INTEGER)
BEGIN
	DECLARE vDate DATETIME;
	
	SET vDate = fToDateTime(vYear, vMonth, vDay, vHour, vMinute, vSecond);
	
	INSERT INTO tAttendanceLog(cEmployeeKey, cMachine, cMarkType, cDate)
	VALUES					  (vEmployeeKey, vMachine, vMarkType, vDate);
	
	SELECT LAST_INSERT_ID();
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pSaveReport` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pSaveReport`(IN vKey VARCHAR(20), IN vName VARCHAR(50), IN vType BIGINT(20))
BEGIN
	DECLARE vId BIGINT(20);
	INSERT INTO tReport(cKey, cName, cType) VALUES(vKey, vName, vType);
	
	SET vId = LAST_INSERT_ID();
	
	INSERT INTO tReportProperty(cPropertyType, cReport, cValue)
		SELECT c.cId, vId, '' 
			FROM tR_ReportPropertyType_ReportType AS a
			LEFT JOIN tReportProperty AS b ON a.cReportPropertyType = b.cPropertyType AND b.cReport = vId
			LEFT JOIN tReportPropertyType AS c ON a.cReportPropertyType = c.cId 
			WHERE a.cReportType = vType;


	
	SELECT vId;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pSplit` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pSplit`(IN str VARCHAR(50))
BEGIN
	DECLARE vEnd BOOLEAN DEFAULT FALSE;
	DECLARE vIndex INTEGER DEFAULT 0;
	DECLARE vPos INTEGER DEFAULT 0;
	DECLARE vValue VARCHAR(50) DEFAULT '';

	DROP TEMPORARY TABLE IF EXISTS tTempSplit;
	CREATE TEMPORARY TABLE tTempSplit (
		cId 				BIGINT(20) NOT NULL auto_increment,
		cValue				VARCHAR(50) NULL,
		PRIMARY KEY (cId)
    ) Engine=memory;

   	select vIndex, vPos, str;
    
    WHILE (NOT vEnd) DO
    	SET vPos = INSTR(str, ',');
    	SET vValue = SUBSTR(str, vIndex+1, vPos-1);
    	SET str = SUBSTR(str, vPos+1);
    	SET vIndex = vPos; 
    	
    	select vIndex, vPos, str;
    	
    	IF(LENGTH(str)=0 OR vPos = 0) THEN
    		SET vEnd = TRUE;
    	END IF;
    	
    	INSERT INTO tTempSplit(cValue) VALUES(vValue);
    	

    END WHILE;
    
	SELECT	cValue 
	FROM 	tTempSplit;
	DROP TEMPORARY TABLE IF EXISTS tTempSplit;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pSummary` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pSummary`(IN vStartDate DATE, IN vEndDate DATE, IN vEmployee VARCHAR(10), IN vTurn VARCHAR(10))
BEGIN
	IF(vEmployee = '') THEN
		SELECT * 
		FROM tTimeCtrl 
		WHERE cDate BETWEEN vStartDate AND vEndDate AND cTurn = vTurn;
	ELSE
		SELECT * 
		FROM tTimeCtrl 
		WHERE cDate BETWEEN vStartDate AND vEndDate AND cEmployeeKey = vEmployee AND cTurn = vTurn;
	END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pTest` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pTest`(IN vIds VARCHAR(50))
BEGIN
	SELECT	cid, cName 
	FROM 	tEmployee

	WHERE	pSplit(vIds) IN (cId);

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `pUpdateData_Temp` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `pUpdateData_Temp`()
BEGIN

	DECLARE vIdReport BIGINT(20);

	
	UPDATE tReportOutType SET cJavaClass= 'cl.buildersoft.timectrl.report.FileReport' WHERE cKey = 'FILE';
	
	INSERT INTO tParameter(cKey, cLabel, cValue, cDataType) 
			VALUES('JASPER_FOLDER', 'Carpeta donde destan los archivos jasper', 'E:\\workspace\\timectrl-web\\WebContent\\WEB-INF\\report', (SELECT cId FROM tDataType WHERE cKey = 'STRING'));
	
	INSERT INTO tReportParamType(cKey, cName) VALUES('INTEGER', 'Valor entero');
	INSERT INTO tReportParamType(cKey, cName) VALUES('LONG', 'Valor Long');

	INSERT INTO tReport(cName, cJasperfile, cOutType) VALUES('Reporte por Semanas', 'weekly-main.jasper',
							(SELECT cId FROM tReportOutType WHERE cKey = 'FILE'));
	SET vIdReport = LAST_INSERT_ID();
	
	INSERT INTO tReportOutValue(cParam, cType, cReport, cValue)
		VALUES((SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FILE'), 
				(SELECT cId FROM tReportOutType WHERE cKey='FILE'),
				vIdReport,
				'ReporteSemanal.xls');	
	
	INSERT INTO tReportOutValue(cParam, cType, cReport, cValue)
		VALUES(	(SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FOLDER'), 
				(SELECT cId FROM tReportOutType WHERE cKey='FILE'),
				vIdReport,
				'E:\\temp');	
	
	INSERT INTO tReportParam(cName, cType, cReport, cValue, cFromUser, cOrder) 
		VALUES('EmployeeId', 
		(SELECT cId FROM tReportParamType WHERE cKey='LONG'), 
		vIdReport,
		'', true, 1);
	
	INSERT INTO tReportParam(cName, cType, cReport, cValue, cFromUser, cOrder) 
		VALUES('Month', 
		(SELECT cId FROM tReportParamType WHERE cKey='INTEGER'), 
		vIdReport,
		'', true, 2);

	INSERT INTO tReportParam(cName, cType, cReport, cValue, cFromUser, cOrder) 
		VALUES('Year', 
		(SELECT cId FROM tReportParamType WHERE cKey='INTEGER'), 
		vIdReport,
		'', true, 3);
		
		
	
	UPDATE tReportOutValue 
			SET cValue='Inasistencias_{Date}.xls'
			WHERE cReport=6 AND cParam=(SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FILE');

	UPDATE tReportOutValue 
			SET cValue='MarcasPlain_{Date}.xls'
			WHERE cReport=5 AND cParam=(SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FILE');



		
			
	INSERT INTO tReport(cName, cJasperfile, cOutType) VALUES('Reporte Atrasos', '',
							(SELECT cId FROM tReportOutType WHERE cKey = 'PLAIN_EXCEL'));
	SET vIdReport = LAST_INSERT_ID();
	
	INSERT INTO tReportOutValue(cParam, cType, cReport, cValue)
		VALUES((SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FILE'), 
				(SELECT cId FROM tReportOutType WHERE cKey='FILE'),
				vIdReport,
				'Atrasos_{Date}.xls');
	INSERT INTO tReportOutValue(cParam, cType, cReport, cValue)
		VALUES((SELECT cId FROM tReportOutParam WHERE cKey='OUTPUT_FOLDER'), 
				(SELECT cId FROM tReportOutType WHERE cKey='FILE'),
				vIdReport,
				'E:\\temp\\timectrl');	

	INSERT INTO tReportParam(cName, cType, cReport, cValue, cOrder, cFromUser) 
		VALUES('StartDate', 
		(SELECT cId FROM tReportParamType WHERE cKey='DATE'), 
		vIdReport,
		'', 1, true);
	INSERT INTO tReportParam(cName, cType, cReport, cValue, cOrder, cFromUser) 
		VALUES('EndDate', 
		(SELECT cId FROM tReportParamType WHERE cKey='DATE'), 
		vIdReport,
		'', 2, true);

	INSERT INTO tReportParam(cName, cType, cReport, cValue, cOrder, cFromUser) 
		VALUES('Nombre SP', 
		(SELECT cId FROM tReportParamType WHERE cKey='SP'), 
		vIdReport,
		'pListLater', 0, false);
		
			
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2015-08-27 23:40:10
